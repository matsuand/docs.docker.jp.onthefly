<!-- Page generated 2019-04-30 08:10:32 +0000 -->
<!-- relative link basehrefs -->

	
	
	
		
			
		
	
		
			
		
	
		
			
			


<!-- Logic for 'edit this button' -->


	

	

	

	

	

	

	

	

	


<!-- End of logic for 'edit this button' -->


<!DOCTYPE html>
<html lang="ja">

<head>
	<base href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/" />
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@charset "UTF-8";
		[ng\:cloak],
		[ng-cloak],
		[data-ng-cloak],
		[x-ng-cloak],
		.ng-cloak,
		.x-ng-cloak,
		.ng-hide:not(.ng-hide-animate) {
			display: none !important;
		}

		ng\:form {
			display: block;
		}
	</style>
	<script type="text/javascript">
	  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
	  analytics.load("IWj9D0UpZHZdZUZX9jl98PcpBFWBnBMy");
	  analytics.page();
	  }}();
	</script>
	
	<!-- favicon -->
	<link rel="icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta name="msapplication-TileImage" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico">
	<link rel="apple-touch-icon" type="image/x-icon" href="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
	<meta property="og:image" content="https://matsuand.github.io/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
	<!-- metadata -->
	<meta property="og:type" content="website"/>
	<meta property="og:updated_time" itemprop="dateUpdated" content="2019-04-30T08:10:32+00:00"/>
	<meta property="og:image" itemprop="image primaryImageOfPage" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:card" content="summary"/>
	<meta name="twitter:domain" content="docs.docker.jp"/>
	<meta name="twitter:site" content="@docker_docs"/>
	<meta name="twitter:url" content="https://twitter.com/docker_docs"/>
	<meta name="twitter:title" itemprop="title name" content="Compose file version 2 reference"/>
	<meta name="twitter:description" property="og:description" itemprop="description" content="Reference and guidelines These topics describe version 2 of the Compose file format. Compose and Docker compatibility matrix There are several versions of the Compose file format – 1, 2,..." />
	<meta name="twitter:image:src" content="https://matsuand.github.io/docs.docker.jp.onthefly/images/docs@2x.png"/>
	<meta name="twitter:image:alt" content="Docker Documentation"/>
	<meta property="article:published_time" itemprop="datePublished" content="2019-04-30T08:10:32+00:00"/>

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="fig, composition, compose version 3, docker">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/bootstrap.min.css">
	<link id="pygments" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/pygments/perldoc.css">
	<link id="pagestyle" rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/style.css">

	<!-- Go get "Open Sans" font from Google -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
	<!-- SEO stuff -->
	<title>Compose file version 2 reference | Docker Documentation</title>
<meta property="og:title" content="Compose file version 2 reference" />
<meta property="og:locale" content="ja_JP" />
<meta name="description" content="Compose file reference" />
<meta property="og:description" content="Compose file reference" />
<link rel="canonical" href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/" />
<meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/" />
<meta property="og:site_name" content="Docker Documentation" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"Compose file version 2 reference","description":"Compose file reference","url":"https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/"}</script>
	<!-- END SEO STUFF -->
	
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	</script>
</head>
<body ng-app="Docker" ng-controller="DockerController" class="colums">
	<header>
		 <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="https://matsuand.github.io/docs.docker.jp.onthefly/"><img class="logo" src="https://matsuand.github.io/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs"></a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" /id="searchForm" action="/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container">
    <div id="tabs">
        <ul class="tabs" id="jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right hidden-xs hidden-sm">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v18.09 (current)        <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/edge/">Docker edge</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.12/">Docker v17.12</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.09/">Docker v17.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.03/">Docker v17.03</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

	</header>

	<div class="wrapper right-open">
		<div class="container-fluid">
			<div class="row">
				<div class="col-body">
					<main class="col-content content">
						<section class="section">
							
								
							<h1>Compose file version 2 reference</h1>  <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    43 分
  
</span>

							
							
							<h2 id="reference-and-guidelines">Reference and guidelines</h2>

<p>These topics describe version 2 of the Compose file format.</p>

<h2 id="compose-and-docker-compatibility-matrix">Compose and Docker compatibility matrix</h2>

<p>There are several versions of the Compose file format – 1, 2, 2.x, and 3.x The
table below is a quick look. For full details on what each version includes and
how to upgrade, see <strong><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/">About versions and upgrading</a></strong>.</p>

<p>This table shows which Compose file versions support specific Docker releases.</p>

<table>
  <thead>
    <tr>
      <th><strong>Compose file format</strong></th>
      <th><strong>Docker Engine release</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>3.7</td>
      <td>18.06.0+</td>
    </tr>
    <tr>
      <td>3.6</td>
      <td>18.02.0+</td>
    </tr>
    <tr>
      <td>3.5</td>
      <td>17.12.0+</td>
    </tr>
    <tr>
      <td>3.4</td>
      <td>17.09.0+</td>
    </tr>
    <tr>
      <td>3.3</td>
      <td>17.06.0+</td>
    </tr>
    <tr>
      <td>3.2</td>
      <td>17.04.0+</td>
    </tr>
    <tr>
      <td>3.1</td>
      <td>1.13.1+</td>
    </tr>
    <tr>
      <td>3.0</td>
      <td>1.13.0+</td>
    </tr>
    <tr>
      <td>2.4</td>
      <td>17.12.0+</td>
    </tr>
    <tr>
      <td>2.3</td>
      <td>17.06.0+</td>
    </tr>
    <tr>
      <td>2.2</td>
      <td>1.13.0+</td>
    </tr>
    <tr>
      <td>2.1</td>
      <td>1.12.0+</td>
    </tr>
    <tr>
      <td>2.0</td>
      <td>1.10.0+</td>
    </tr>
    <tr>
      <td>1.0</td>
      <td>1.9.1.+</td>
    </tr>
  </tbody>
</table>

<p>In addition to Compose file format versions shown in the table, the Compose
itself is on a release schedule, as shown in <a href="https://github.com/docker/compose/releases/">Compose
releases</a>, but file format versions
do not necessarily increment with each release. For example, Compose file format
3.0 was first introduced in <a href="https://github.com/docker/compose/releases/tag/1.10.0">Compose release
1.10.0</a>, and versioned
gradually in subsequent releases.</p>

<h2 id="service-configuration-reference">Service configuration reference</h2>

<p>The Compose file is a <a href="http://yaml.org/">YAML</a> file defining
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#service-configuration-reference">services</a>,
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#network-configuration-reference">networks</a> and
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volume-configuration-reference">volumes</a>.
The default path for a Compose file is <code class="highlighter-rouge">./docker-compose.yml</code>.</p>

<blockquote>
  <p><strong>Tip</strong>: You can use either a <code class="highlighter-rouge">.yml</code> or <code class="highlighter-rouge">.yaml</code> extension for this file. They both work.</p>
</blockquote>

<p>A <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/glossary.md#container">container</a> definition contains configuration which are applied to each
container started for that service, much like passing command-line parameters to
<code class="highlighter-rouge">docker run</code>. Likewise, network and volume definitions are analogous to
<code class="highlighter-rouge">docker network create</code> and <code class="highlighter-rouge">docker volume create</code>.</p>

<p>As with <code class="highlighter-rouge">docker run</code>, options specified in the Dockerfile, such as <code class="highlighter-rouge">CMD</code>,
<code class="highlighter-rouge">EXPOSE</code>, <code class="highlighter-rouge">VOLUME</code>, <code class="highlighter-rouge">ENV</code>, are respected by default - you don’t need to
specify them again in <code class="highlighter-rouge">docker-compose.yml</code>.</p>

<p>You can use environment variables in configuration values with a Bash-like
<code class="highlighter-rouge">${VARIABLE}</code> syntax - see <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#variable-substitution">variable substitution</a> for
full details.</p>

<p>This section contains a list of all configuration options supported by a service
definition in version 2.</p>

<h3 id="blkio_config">blkio_config</h3>

<p>A set of configuration options to set block IO limits for this service.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
services:
  foo:
    image: busybox
    blkio_config:
      weight: 300
      weight_device:
        - path: /dev/sda
          weight: 400
      device_read_bps:
        - path: /dev/sdb
          rate: '12mb'
      device_read_iops:
        - path: /dev/sdb
          rate: 120
      device_write_bps:
        - path: /dev/sdb
          rate: '1024k'
      device_write_iops:
        - path: /dev/sdb
          rate: 30
</code></pre></div></div>

<h4 id="device_read_bps-device_write_bps">device_read_bps, device_write_bps</h4>

<p>Set a limit in bytes per second for read / write operations on a given device.
Each item in the list must have two keys:</p>

<ul>
  <li><code class="highlighter-rouge">path</code>, defining the symbolic path to the affected device</li>
  <li><code class="highlighter-rouge">rate</code>, either as an integer value representing the number of bytes or as
a string expressing a <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#specifying-byte-values">byte value</a>.</li>
</ul>

<h4 id="device_read_iops-device_write_iops">device_read_iops, device_write_iops</h4>

<p>Set a limit in operations per second for read / write operations on a given
device. Each item in the list must have two keys:</p>

<ul>
  <li><code class="highlighter-rouge">path</code>, defining the symbolic path to the affected device</li>
  <li><code class="highlighter-rouge">rate</code>, as an integer value representing the permitted number of operations
per second.</li>
</ul>

<h4 id="weight">weight</h4>

<p>Modify the proportion of bandwidth allocated to this service relative to other
services. Takes an integer value between 10 and 1000, with 500 being the
default.</p>

<h4 id="weight_device">weight_device</h4>

<p>Fine-tune bandwidth allocation by device. Each item in the list must have
two keys:</p>

<ul>
  <li><code class="highlighter-rouge">path</code>, defining the symbolic path to the affected device</li>
  <li><code class="highlighter-rouge">weight</code>, an integer value between 10 and 1000</li>
</ul>

<h3 id="build">build</h3>

<p>Configuration options that are applied at build time.</p>

<p><code class="highlighter-rouge">build</code> can be specified either as a string containing a path to the build
context, or an object with the path specified under <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#context">context</a> and
optionally <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#dockerfile">dockerfile</a> and <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#args">args</a>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build: ./dir

build:
  context: ./dir
  dockerfile: Dockerfile-alternate
  args:
    buildno: 1
</code></pre></div></div>

<p>If you specify <code class="highlighter-rouge">image</code> as well as <code class="highlighter-rouge">build</code>, then Compose names the built image
with the <code class="highlighter-rouge">webapp</code> and optional <code class="highlighter-rouge">tag</code> specified in <code class="highlighter-rouge">image</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build: ./dir
image: webapp:tag
</code></pre></div></div>

<p>This results in an image named <code class="highlighter-rouge">webapp</code> and tagged <code class="highlighter-rouge">tag</code>, built from <code class="highlighter-rouge">./dir</code>.</p>

<h4 id="cache_from">cache_from</h4>

<blockquote>
  <p>Added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-22">version 2.2</a> file format</p>
</blockquote>

<p>A list of images that the engine uses for cache resolution.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build:
  context: .
  cache_from:
    - alpine:latest
    - corp/web_app:3.14
</code></pre></div></div>

<h4 id="context">context</h4>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-2">Version 2 file format</a> and up. In version 1, just use
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#build">build</a>.</p>
</blockquote>

<p>Either a path to a directory containing a Dockerfile, or a url to a git repository.</p>

<p>When the value supplied is a relative path, it is interpreted as relative to the
location of the Compose file. This directory is also the build context that is
sent to the Docker daemon.</p>

<p>Compose builds and tags it with a generated name, and use that image thereafter.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build:
  context: ./dir
</code></pre></div></div>

<h4 id="dockerfile">dockerfile</h4>

<p>Alternate Dockerfile.</p>

<p>Compose uses an alternate file to build with. A build path must also be
specified.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build:
  context: .
  dockerfile: Dockerfile-alternate
</code></pre></div></div>

<h4 id="args">args</h4>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-2">Version 2 file format</a> and up.</p>
</blockquote>

<p>Add build arguments, which are environment variables accessible only during the
build process.</p>

<p>First, specify the arguments in your Dockerfile:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ARG buildno
ARG gitcommithash

RUN echo "Build number: $buildno"
RUN echo "Based on commit: $gitcommithash"
</code></pre></div></div>

<p>Then specify the arguments under the <code class="highlighter-rouge">build</code> key. You can pass a mapping
or a list:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build:
  context: .
  args:
    buildno: 1
    gitcommithash: cdc3b19

build:
  context: .
  args:
    - buildno=1
    - gitcommithash=cdc3b19
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: In your Dockerfile, if you specify <code class="highlighter-rouge">ARG</code> before the <code class="highlighter-rouge">FROM</code> instruction,
If you need an argument to be available in both places, also specify it under the <code class="highlighter-rouge">FROM</code> instruction.
See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/builder/#understand-how-arg-and-from-interact">Understand how ARGS and FROM interact</a> for usage details.</p>
</blockquote>

<p>You can omit the value when specifying a build argument, in which case its value
at build time is the value in the environment where Compose is running.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>args:
  - buildno
  - gitcommithash
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: YAML boolean values (<code class="highlighter-rouge">true</code>, <code class="highlighter-rouge">false</code>, <code class="highlighter-rouge">yes</code>, <code class="highlighter-rouge">no</code>, <code class="highlighter-rouge">on</code>, <code class="highlighter-rouge">off</code>) must
be enclosed in quotes, so that the parser interprets them as strings.</p>
</blockquote>

<h4 id="extra_hosts">extra_hosts</h4>

<p>Add hostname mappings at build-time. Use the same values as the docker client <code class="highlighter-rouge">--add-host</code> parameter.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extra_hosts:
 - "somehost:162.242.195.82"
 - "otherhost:50.31.209.229"
</code></pre></div></div>

<p>An entry with the ip address and hostname is created in <code class="highlighter-rouge">/etc/hosts</code> inside containers for this build, e.g:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>162.242.195.82  somehost
50.31.209.229   otherhost
</code></pre></div></div>

<h4 id="isolation">isolation</h4>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Specify a build’s container isolation technology. On Linux, the only supported value
is <code class="highlighter-rouge">default</code>. On Windows, acceptable values are <code class="highlighter-rouge">default</code>, <code class="highlighter-rouge">process</code> and
<code class="highlighter-rouge">hyperv</code>. Refer to the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/run.md#specify-isolation-technology-for-container---isolation">Docker Engine docs</a>
for details.</p>

<p>If unspecified, Compose will use the <code class="highlighter-rouge">isolation</code> value found in the service’s definition
to determine the value to use for builds.</p>

<h4 id="labels">labels</h4>

<blockquote>
  <p>Added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">version 2.1</a> file format</p>
</blockquote>

<p>Add metadata to the resulting image using <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/userguide/labels-custom-metadata.md">Docker labels</a>.
You can use either an array or a dictionary.</p>

<p>It’s recommended that you use reverse-DNS notation to prevent your labels from conflicting with
those used by other software.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build:
  context: .
  labels:
    com.example.description: "Accounting webapp"
    com.example.department: "Finance"
    com.example.label-with-empty-value: ""


build:
  context: .
  labels:
    - "com.example.description=Accounting webapp"
    - "com.example.department=Finance"
    - "com.example.label-with-empty-value"
</code></pre></div></div>

<h4 id="network">network</h4>

<blockquote>
  <p>Added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-22">version 2.2</a> file format</p>
</blockquote>

<p>Set the network containers connect to for the <code class="highlighter-rouge">RUN</code> instructions during
build.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build:
  context: .
  network: host


build:
  context: .
  network: custom_network_1
</code></pre></div></div>

<h4 id="shm_size">shm_size</h4>

<blockquote>
  <p>Added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-23">version 2.3</a> file format</p>
</blockquote>

<p>Set the size of the <code class="highlighter-rouge">/dev/shm</code> partition for this build’s containers. Specify
as an integer value representing the number of bytes or as a string expressing
a <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#specifying-byte-values">byte value</a>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>build:
  context: .
  shm_size: '2gb'


build:
  context: .
  shm_size: 10000000
</code></pre></div></div>

<h4 id="target">target</h4>

<blockquote>
  <p>Added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-23">version 2.3</a> file format</p>
</blockquote>

<p>Build the specified stage as defined inside the <code class="highlighter-rouge">Dockerfile</code>. See the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/userguide/eng-image/multistage-build.md">multi-stage build docs</a> for
details.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  build:
    context: .
    target: prod
</code></pre></div></div>

<h3 id="cap_add-cap_drop">cap_add, cap_drop</h3>

<p>Add or drop container capabilities.
See <code class="highlighter-rouge">man 7 capabilities</code> for a full list.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cap_add:
  - ALL

cap_drop:
  - NET_ADMIN
  - SYS_ADMIN
</code></pre></div></div>

<h3 id="command">command</h3>

<p>Override the default command.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>command: bundle exec thin -p 3000
</code></pre></div></div>

<p>The command can also be a list, in a manner similar to
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/builder.md#cmd">dockerfile</a>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>command: ["bundle", "exec", "thin", "-p", "3000"]
</code></pre></div></div>

<h3 id="cgroup_parent">cgroup_parent</h3>

<p>Specify an optional parent cgroup for the container.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cgroup_parent: m-executor-abcd
</code></pre></div></div>

<h3 id="container_name">container_name</h3>

<p>Specify a custom container name, rather than a generated default name.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>container_name: my-web-container
</code></pre></div></div>

<p>Because Docker container names must be unique, you cannot scale a service
beyond 1 container if you have specified a custom name. Attempting to do so
results in an error.</p>

<h3 id="cpu_rt_runtime-cpu_rt_period">cpu_rt_runtime, cpu_rt_period</h3>

<blockquote>
  <p>Added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-22">version 2.2</a> file format</p>
</blockquote>

<p>Configure CPU allocation parameters using the Docker daemon realtime scheduler.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cpu_rt_runtime: '400ms'
cpu_rt_period: '1400us'

# Integer values will use microseconds as units
cpu_rt_runtime: 95000
cpu_rt_period: 11000
</code></pre></div></div>

<h3 id="device_cgroup_rules">device_cgroup_rules</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-23">Added in version 2.3 file format</a>.</p>
</blockquote>

<p>Add rules to the cgroup allowed devices list.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>device_cgroup_rules:
  - 'c 1:3 mr'
  - 'a 7:* rmw'
</code></pre></div></div>

<h3 id="devices">devices</h3>

<p>List of device mappings.  Uses the same format as the <code class="highlighter-rouge">--device</code> docker
client create option.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>devices:
  - "/dev/ttyUSB0:/dev/ttyUSB0"
</code></pre></div></div>

<h3 id="depends_on">depends_on</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-2">Version 2 file format</a> and up.</p>
</blockquote>

<p>Express dependency between services, which has two effects:</p>

<ul>
  <li>
    <p><code class="highlighter-rouge">docker-compose up</code> starts services in dependency order. In the following
example, <code class="highlighter-rouge">db</code> and <code class="highlighter-rouge">redis</code> are started before <code class="highlighter-rouge">web</code>.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">docker-compose up SERVICE</code> automatically include <code class="highlighter-rouge">SERVICE</code>’s
dependencies. In the following example, <code class="highlighter-rouge">docker-compose up web</code> also
create and start <code class="highlighter-rouge">db</code> and <code class="highlighter-rouge">redis</code>.</p>
  </li>
</ul>

<p>Simple example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
services:
  web:
    build: .
    depends_on:
      - db
      - redis
  redis:
    image: redis
  db:
    image: postgres
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: <code class="highlighter-rouge">depends_on</code> does not wait for <code class="highlighter-rouge">db</code> and <code class="highlighter-rouge">redis</code> to be “ready” before
starting <code class="highlighter-rouge">web</code> - only until they have been started. If you need to wait
for a service to be ready, see <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/startup-order.md">Controlling startup order</a>
for more on this problem and strategies for solving it.</p>
</blockquote>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>A healthcheck indicates that you want a dependency to wait
for another container to be “healthy” (as indicated by a successful state from
the healthcheck) before starting.</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
services:
  web:
    build: .
    depends_on:
      db:
        condition: service_healthy
      redis:
        condition: service_started
  redis:
    image: redis
  db:
    image: redis
    healthcheck:
      test: "exit 0"
</code></pre></div></div>

<p>In the above example, Compose waits for the <code class="highlighter-rouge">redis</code> service to be started
(legacy behavior) and the <code class="highlighter-rouge">db</code> service to be healthy before starting <code class="highlighter-rouge">web</code>.</p>

<p>See the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#healthcheck">healthcheck section</a> for complementary
information.</p>

<h3 id="dns">dns</h3>

<p>Custom DNS servers. Can be a single value or a list.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dns: 8.8.8.8
dns:
  - 8.8.8.8
  - 9.9.9.9
</code></pre></div></div>

<h3 id="dns_opt">dns_opt</h3>

<p>List of custom DNS options to be added to the container’s <code class="highlighter-rouge">resolv.conf</code> file.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dns_opt:
  - use-vc
  - no-tld-query
</code></pre></div></div>

<h3 id="dns_search">dns_search</h3>

<p>Custom DNS search domains. Can be a single value or a list.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dns_search: example.com
dns_search:
  - dc1.example.com
  - dc2.example.com
</code></pre></div></div>

<h3 id="tmpfs">tmpfs</h3>

<p>Mount a temporary file system inside the container. Can be a single value or a list.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tmpfs: /run
tmpfs:
  - /run
  - /tmp
</code></pre></div></div>

<h3 id="entrypoint">entrypoint</h3>

<p>Override the default entrypoint.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>entrypoint: /code/entrypoint.sh
</code></pre></div></div>

<p>The entrypoint can also be a list, in a manner similar to
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/builder.md#entrypoint">dockerfile</a>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>entrypoint:
    - php
    - -d
    - zend_extension=/usr/local/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so
    - -d
    - memory_limit=-1
    - vendor/bin/phpunit
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: Setting <code class="highlighter-rouge">entrypoint</code> both overrides any default entrypoint set
on the service’s image with the <code class="highlighter-rouge">ENTRYPOINT</code> Dockerfile instruction, <em>and</em>
clears out any default command on the image - meaning that if there’s a <code class="highlighter-rouge">CMD</code>
instruction in the Dockerfile, it is ignored.</p>
</blockquote>

<h3 id="env_file">env_file</h3>

<p>Add environment variables from a file. Can be a single value or a list.</p>

<p>If you have specified a Compose file with <code class="highlighter-rouge">docker-compose -f FILE</code>, paths in
<code class="highlighter-rouge">env_file</code> are relative to the directory that file is in.</p>

<p>Environment variables declared in the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#environment">environment</a> section
<em>override</em> these values – this holds true even if those values are
empty or undefined.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>env_file: .env

env_file:
  - ./common.env
  - ./apps/web.env
  - /opt/secrets.env
</code></pre></div></div>

<p>Compose expects each line in an env file to be in <code class="highlighter-rouge">VAR=VAL</code> format. Lines
beginning with <code class="highlighter-rouge">#</code> are processed as comments and are ignored. Blank lines are
also ignored.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Set Rails/Rack environment
RACK_ENV=development
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: If your service specifies a <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#build">build</a> option, variables
defined in environment files are <em>not</em> automatically visible during the
build. Use the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#args">args</a> sub-option of <code class="highlighter-rouge">build</code> to define build-time
environment variables.</p>
</blockquote>

<p>The value of <code class="highlighter-rouge">VAL</code> is used as is and not modified at all. For example if the
value is surrounded by quotes (as is often the case of shell variables), the
quotes are included in the value passed to Compose.</p>

<p>Keep in mind that <em>the order of files in the list is significant in determining
the value assigned to a variable that shows up more than once</em>. The files in the
list are processed from the top down. For the same variable specified in file
<code class="highlighter-rouge">a.env</code> and assigned a different value in file <code class="highlighter-rouge">b.env</code>, if <code class="highlighter-rouge">b.env</code> is
listed below (after), then the value from <code class="highlighter-rouge">b.env</code> stands. For example, given the
following declaration in <code class="highlighter-rouge">docker-compose.yml</code>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">some-service</span><span class="pi">:</span>
    <span class="na">env_file</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">a.env</span>
      <span class="pi">-</span> <span class="s">b.env</span>
</code></pre></div></div>

<p>And the following files:</p>

<pre><code class="language-none"># a.env
VAR=1
</code></pre>

<p>and</p>

<pre><code class="language-none"># b.env
VAR=hello
</code></pre>

<p>$VAR is <code class="highlighter-rouge">hello</code>.</p>

<h3 id="environment">environment</h3>

<p>Add environment variables. You can use either an array or a dictionary. Any
boolean values; true, false, yes no, need to be enclosed in quotes to ensure
they are not converted to True or False by the YML parser.</p>

<p>Environment variables with only a key are resolved to their values on the
machine Compose is running on, which can be helpful for secret or host-specific values.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>environment:
  RACK_ENV: development
  SHOW: 'true'
  SESSION_SECRET:

environment:
  - RACK_ENV=development
  - SHOW=true
  - SESSION_SECRET
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: If your service specifies a <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#build">build</a> option, variables
defined in <code class="highlighter-rouge">environment</code> are <em>not</em> automatically visible during the
build. Use the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#args">args</a> sub-option of <code class="highlighter-rouge">build</code> to define build-time
environment variables.</p>
</blockquote>

<h3 id="expose">expose</h3>

<p>Expose ports without publishing them to the host machine - they’ll only be
accessible to linked services. Only the internal port can be specified.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>expose:
 - "3000"
 - "8000"
</code></pre></div></div>

<h3 id="extends">extends</h3>

<p>Extend another service, in the current file or another, optionally overriding
configuration.</p>

<p>You can use <code class="highlighter-rouge">extends</code> on any service together with other configuration keys.
The <code class="highlighter-rouge">extends</code> value must be a dictionary defined with a required <code class="highlighter-rouge">service</code>
and an optional <code class="highlighter-rouge">file</code> key.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extends:
  file: common.yml
  service: webapp
</code></pre></div></div>

<p>The <code class="highlighter-rouge">service</code> the name of the service being extended, for example
<code class="highlighter-rouge">web</code> or <code class="highlighter-rouge">database</code>. The <code class="highlighter-rouge">file</code> is the location of a Compose configuration
file defining that service.</p>

<p>If you omit the <code class="highlighter-rouge">file</code> Compose looks for the service configuration in the
current file. The <code class="highlighter-rouge">file</code> value can be an absolute or relative path. If you
specify a relative path, Compose treats it as relative to the location of the
current file.</p>

<p>You can extend a service that itself extends another. You can extend
indefinitely. Compose does not support circular references and <code class="highlighter-rouge">docker-compose</code>
returns an error if it encounters one.</p>

<p>For more on <code class="highlighter-rouge">extends</code>, see the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/extends.md#extending-services">the extends documentation</a>.</p>

<h3 id="external_links">external_links</h3>

<p>Link to containers started outside this <code class="highlighter-rouge">docker-compose.yml</code> or even outside
of Compose, especially for containers that provide shared or common services.
<code class="highlighter-rouge">external_links</code> follow semantics similar to <code class="highlighter-rouge">links</code> when specifying both the
container name and the link alias (<code class="highlighter-rouge">CONTAINER:ALIAS</code>).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>external_links:
 - redis_1
 - project_db_1:mysql
 - project_db_1:postgresql
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: For version 2 file format, the
externally-created containers must be connected to at least one of the same
networks as the service which is linking to them.</p>
</blockquote>

<h3 id="extra_hosts-1">extra_hosts</h3>

<p>Add hostname mappings. Use the same values as the docker client <code class="highlighter-rouge">--add-host</code> parameter.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extra_hosts:
 - "somehost:162.242.195.82"
 - "otherhost:50.31.209.229"
</code></pre></div></div>

<p>An entry with the ip address and hostname is created in <code class="highlighter-rouge">/etc/hosts</code> inside containers for this service, e.g:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>162.242.195.82  somehost
50.31.209.229   otherhost
</code></pre></div></div>

<h3 id="group_add">group_add</h3>

<p>Specify additional groups (by name or number) which the user inside the
container should be a member of. Groups must exist in both the container and the
host system to be added. An example of where this is useful is when multiple
containers (running as different users) need to all read or write the same
file on the host system. That file can be owned by a group shared by all the
containers, and specified in <code class="highlighter-rouge">group_add</code>. See the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/run.md#additional-groups">Docker documentation</a> for more
details.</p>

<p>A full example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
services:
  myservice:
    image: alpine
    group_add:
      - mail
</code></pre></div></div>

<p>Running <code class="highlighter-rouge">id</code> inside the created container shows that the user belongs to
the <code class="highlighter-rouge">mail</code> group, which would not have been the case if <code class="highlighter-rouge">group_add</code> were not
used.</p>

<h3 id="healthcheck">healthcheck</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Version 2.1 file format</a> and up.</p>
</blockquote>

<p>Configure a check that’s run to determine whether or not containers for this
service are “healthy”. See the docs for the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/builder.md#healthcheck">HEALTHCHECK Dockerfile instruction</a>
for details on how healthchecks work.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost"]
  interval: 1m30s
  timeout: 10s
  retries: 3
  start_period: 40s
</code></pre></div></div>

<p><code class="highlighter-rouge">interval</code>, <code class="highlighter-rouge">timeout</code> and <code class="highlighter-rouge">start_period</code> are specified as
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#specifying-durations">durations</a>.</p>

<p><code class="highlighter-rouge">test</code> must be either a string or a list. If it’s a list, the first item must be
either <code class="highlighter-rouge">NONE</code>, <code class="highlighter-rouge">CMD</code> or <code class="highlighter-rouge">CMD-SHELL</code>. If it’s a string, it’s equivalent to
specifying <code class="highlighter-rouge">CMD-SHELL</code> followed by that string.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Hit the local web app
test: ["CMD", "curl", "-f", "http://localhost"]

# As above, but wrapped in /bin/sh. Both forms below are equivalent.
test: ["CMD-SHELL", "curl -f http://localhost &amp;&amp; echo 'cool, it works'"]
test: curl -f https://localhost &amp;&amp; echo 'cool, it works'
</code></pre></div></div>

<p>To disable any default healthcheck set by the image, you can use <code class="highlighter-rouge">disable:
true</code>. This is equivalent to specifying <code class="highlighter-rouge">test: ["NONE"]</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>healthcheck:
  disable: true
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: The <code class="highlighter-rouge">start_period</code> option is a more recent feature and is only
available with the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-23">2.3 file format</a>.</p>
</blockquote>

<h3 id="image">image</h3>

<p>Specify the image to start the container from. Can either be a repository/tag or
a partial image ID.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>image: redis
image: ubuntu:14.04
image: tutum/influxdb
image: example-registry.com:4000/postgresql
image: a4bc65fd
</code></pre></div></div>

<p>If the image does not exist, Compose attempts to pull it, unless you have also
specified <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#build">build</a>, in which case it builds it using the specified
options and tags it with the specified tag.</p>

<h3 id="init">init</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-22">Added in version 2.2 file format</a>.</p>
</blockquote>

<p>Run an init inside the container that forwards signals and reaps processes.
Set this option to <code class="highlighter-rouge">true</code> to enable this feature for the service.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
services:
  web:
    image: alpine:latest
    init: true
</code></pre></div></div>

<blockquote>
  <p>The default init binary that is used is <a href="https://github.com/krallin/tini">Tini</a>,
and is installed in <code class="highlighter-rouge">/usr/libexec/docker-init</code> on the daemon host. You can
configure the daemon to use a custom init binary through the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/dockerd/#daemon-configuration-file"><code class="highlighter-rouge">init-path</code> configuration option</a>.</p>
</blockquote>

<h3 id="isolation-1">isolation</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Specify a container’s isolation technology. On Linux, the only supported value
is <code class="highlighter-rouge">default</code>. On Windows, acceptable values are <code class="highlighter-rouge">default</code>, <code class="highlighter-rouge">process</code> and
<code class="highlighter-rouge">hyperv</code>. Refer to the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/run.md#specify-isolation-technology-for-container---isolation">Docker Engine docs</a>
for details.</p>

<h3 id="labels-1">labels</h3>

<p>Add metadata to containers using <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/userguide/labels-custom-metadata.md">Docker labels</a>. You can use either an array or a dictionary.</p>

<p>It’s recommended that you use reverse-DNS notation to prevent your labels from conflicting with those used by other software.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>labels:
  com.example.description: "Accounting webapp"
  com.example.department: "Finance"
  com.example.label-with-empty-value: ""

labels:
  - "com.example.description=Accounting webapp"
  - "com.example.department=Finance"
  - "com.example.label-with-empty-value"
</code></pre></div></div>

<h3 id="links">links</h3>

<p>Link to containers in another service. Either specify both the service name and
a link alias (<code class="highlighter-rouge">"SERVICE:ALIAS"</code>), or just the service name.</p>

<blockquote>
  <p>Links are a legacy option. We recommend using
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#networks">networks</a> instead.</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web:
  links:
   - "db"
   - "db:database"
   - "redis"
</code></pre></div></div>

<p>Containers for the linked service are reachable at a hostname identical to
the alias, or the service name if no alias was specified.</p>

<p>Links also express dependency between services in the same way as
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#depends_on">depends_on</a>, so they determine the order of service startup.</p>

<blockquote>
  <p><strong>Note</strong>: If you define both links and <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#networks">networks</a>, services with
links between them must share at least one network in common in order to
communicate. We recommend using networks instead.</p>
</blockquote>

<h3 id="logging">logging</h3>

<p>Logging configuration for the service.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>logging:
  driver: syslog
  options:
    syslog-address: "tcp://192.168.0.42:123"
</code></pre></div></div>

<p>The <code class="highlighter-rouge">driver</code>  name specifies a logging driver for the service’s
containers, as with the <code class="highlighter-rouge">--log-driver</code> option for docker run
(<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/admin/logging/overview.md">documented here</a>).</p>

<p>The default value is json-file.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>driver: "json-file"
driver: "syslog"
driver: "none"
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: Only the <code class="highlighter-rouge">json-file</code> and <code class="highlighter-rouge">journald</code> drivers make the logs available directly from
<code class="highlighter-rouge">docker-compose up</code> and <code class="highlighter-rouge">docker-compose logs</code>. Using any other driver does not
print any logs.</p>
</blockquote>

<p>Specify logging options for the logging driver with the <code class="highlighter-rouge">options</code> key, as with the <code class="highlighter-rouge">--log-opt</code> option for <code class="highlighter-rouge">docker run</code>.</p>

<p>Logging options are key-value pairs. An example of <code class="highlighter-rouge">syslog</code> options:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>driver: "syslog"
options:
  syslog-address: "tcp://192.168.0.42:123"
</code></pre></div></div>

<h3 id="network_mode">network_mode</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-2">Version 2 file format</a> and up. Replaces the version 1 <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v1/#net">net</a> option.</p>
</blockquote>

<p>Network mode. Use the same values as the docker client <code class="highlighter-rouge">--net</code> parameter, plus
the special form <code class="highlighter-rouge">service:[service name]</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>network_mode: "bridge"
network_mode: "host"
network_mode: "none"
network_mode: "service:[service name]"
network_mode: "container:[container name/id]"
</code></pre></div></div>

<h3 id="networks">networks</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-2">Version 2 file format</a> and up. Replaces the version 1 <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v1/#net">net</a> option.</p>
</blockquote>

<p>Networks to join, referencing entries under the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#network-configuration-reference">top-level <code class="highlighter-rouge">networks</code> key</a>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>services:
  some-service:
    networks:
     - some-network
     - other-network
</code></pre></div></div>

<h4 id="aliases">aliases</h4>

<p>Aliases (alternative hostnames) for this service on the network. Other containers on the same network can use either the service name or this alias to connect to one of the service’s containers.</p>

<p>Since <code class="highlighter-rouge">aliases</code> is network-scoped, the same service can have different aliases on different networks.</p>

<blockquote>
  <p><strong>Note</strong>: A network-wide alias can be shared by multiple containers, and even by multiple services. If it is, then exactly which container the name resolves to is not guaranteed.</p>
</blockquote>

<p>The general format is shown here.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>services:
  some-service:
    networks:
      some-network:
        aliases:
         - alias1
         - alias3
      other-network:
        aliases:
         - alias2
</code></pre></div></div>

<p>In the example below, three services are provided (<code class="highlighter-rouge">web</code>, <code class="highlighter-rouge">worker</code>, and <code class="highlighter-rouge">db</code>), along with two networks (<code class="highlighter-rouge">new</code> and <code class="highlighter-rouge">legacy</code>). The <code class="highlighter-rouge">db</code> service is reachable at the hostname <code class="highlighter-rouge">db</code> or <code class="highlighter-rouge">database</code> on the <code class="highlighter-rouge">new</code> network, and at <code class="highlighter-rouge">db</code> or <code class="highlighter-rouge">mysql</code> on the <code class="highlighter-rouge">legacy</code> network.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"

services:
  web:
    build: ./web
    networks:
      - new

  worker:
    build: ./worker
    networks:
      - legacy

  db:
    image: mysql
    networks:
      new:
        aliases:
          - database
      legacy:
        aliases:
          - mysql

networks:
  new:
  legacy:
</code></pre></div></div>

<h4 id="ipv4_address-ipv6_address">ipv4_address, ipv6_address</h4>

<p>Specify a static IP address for containers for this service when joining the network.</p>

<p>The corresponding network configuration in the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#network-configuration-reference">top-level networks section</a> must have an <code class="highlighter-rouge">ipam</code> block with subnet and gateway configurations covering each static address. If IPv6 addressing is desired, the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#enableipv6"><code class="highlighter-rouge">enable_ipv6</code></a> option must be set.</p>

<p>An example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"

services:
  app:
    image: busybox
    command: ifconfig
    networks:
      app_net:
        ipv4_address: 172.16.238.10
        ipv6_address: 2001:3984:3989::10

networks:
  app_net:
    driver: bridge
    enable_ipv6: true
    ipam:
      driver: default
      config:
      - subnet: 172.16.238.0/24
        gateway: 172.16.238.1
      - subnet: 2001:3984:3989::/64
        gateway: 2001:3984:3989::1
</code></pre></div></div>

<h4 id="link_local_ips">link_local_ips</h4>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Specify a list of link-local IPs. Link-local IPs are special IPs which belong
to a well known subnet and are purely managed by the operator, usually
dependent on the architecture where they are deployed. Therefore they are not
managed by docker (IPAM driver).</p>

<p>Example usage:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
services:
  app:
    image: busybox
    command: top
    networks:
      app_net:
        link_local_ips:
          - 57.123.22.11
          - 57.123.22.13
networks:
  app_net:
    driver: bridge
</code></pre></div></div>

<h4 id="priority">priority</h4>

<p>Specify a priority to indicate in which order Compose should connect the
service’s containers to its networks. If unspecified, the default value is <code class="highlighter-rouge">0</code>.</p>

<p>In the following example, the <code class="highlighter-rouge">app</code> service connects to <code class="highlighter-rouge">app_net_1</code> first
as it has the highest priority. It then connects to <code class="highlighter-rouge">app_net_3</code>, then
<code class="highlighter-rouge">app_net_2</code>, which uses the default priority value of <code class="highlighter-rouge">0</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
services:
  app:
    image: busybox
    command: top
    networks:
      app_net_1:
        priority: 1000
      app_net_2:

      app_net_3:
        priority: 100
networks:
  app_net_1:
  app_net_2:
  app_net_3:
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: If multiple networks have the same priority, the connection order
is undefined.</p>
</blockquote>

<h3 id="pid">pid</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pid: "host"
pid: "container:custom_container_1"
pid: "service:foobar"
</code></pre></div></div>

<p>If set to one of the following forms: <code class="highlighter-rouge">container:&lt;container_name&gt;</code>,
<code class="highlighter-rouge">service:&lt;service_name&gt;</code>, the service shares the PID address space of the
designated container or service.</p>

<p>If set to “host”, the service’s PID mode is the host PID mode.  This turns
on sharing between container and the host operating system the PID address
space. Containers launched with this flag can access and manipulate
other containers in the bare-metal machine’s namespace and vice versa.</p>

<blockquote>
  <p><strong>Note</strong>: the <code class="highlighter-rouge">service:</code> and <code class="highlighter-rouge">container:</code> forms require
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">version 2.1</a> or above</p>
</blockquote>

<h3 id="pids_limit">pids_limit</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Tunes a container’s PIDs limit. Set to <code class="highlighter-rouge">-1</code> for unlimited PIDs.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pids_limit: 10
</code></pre></div></div>

<h3 id="platform">platform</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-24">Added in version 2.4 file format</a>.</p>
</blockquote>

<p>Target platform containers for this service will run on, using the
<code class="highlighter-rouge">os[/arch[/variant]]</code> syntax, e.g.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>platform: osx
platform: windows/amd64
platform: linux/arm64/v8
</code></pre></div></div>

<p>This parameter determines which version of the image will be pulled and/or
on which platform the service’s build will be performed.</p>

<h3 id="ports">ports</h3>

<p>Expose ports. Either specify both ports (<code class="highlighter-rouge">HOST:CONTAINER</code>), or just the container
port (an ephemeral host port is chosen).</p>

<blockquote>
  <p><strong>Note</strong>: When mapping ports in the <code class="highlighter-rouge">HOST:CONTAINER</code> format, you may experience
erroneous results when using a container port lower than 60, because YAML
parses numbers in the format <code class="highlighter-rouge">xx:yy</code> as a base-60 value. For this reason,
we recommend always explicitly specifying your port mappings as strings.</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ports:
 - "3000"
 - "3000-3005"
 - "8000:8000"
 - "9090-9091:8080-8081"
 - "49100:22"
 - "127.0.0.1:8001:8001"
 - "127.0.0.1:5000-5010:5000-5010"
 - "6060:6060/udp"
 - "12400-12500:1240"
</code></pre></div></div>

<h3 id="runtime">runtime</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-23">Added in version 2.3 file format</a></p>
</blockquote>

<p>Specify which runtime to use for the service’s containers. Default runtime
and available runtimes are listed in the output of <code class="highlighter-rouge">docker info</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web:
  image: busybox:latest
  command: true
  runtime: runc
</code></pre></div></div>

<h3 id="scale">scale</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-22">Added in version 2.2 file format</a></p>
</blockquote>

<p>Specify the default number of containers to deploy for this service. Whenever
you run <code class="highlighter-rouge">docker-compose up</code>, Compose creates or removes containers to match
the specified number. This value can be overridden using the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/reference/up.md"><code class="highlighter-rouge">--scale</code></a> flag.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web:
  image: busybox:latest
  command: echo 'scaled'
  scale: 3
</code></pre></div></div>

<h3 id="security_opt">security_opt</h3>

<p>Override the default labeling scheme for each container.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>security_opt:
  - label:user:USER
  - label:role:ROLE
</code></pre></div></div>

<h3 id="stop_grace_period">stop_grace_period</h3>

<p>Specify how long to wait when attempting to stop a container if it doesn’t
handle SIGTERM (or whatever stop signal has been specified with
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#stopsignal"><code class="highlighter-rouge">stop_signal</code></a>), before sending SIGKILL. Specified
as a <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#specifying-durations">duration</a>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stop_grace_period: 1s
stop_grace_period: 1m30s
</code></pre></div></div>

<p>By default, <code class="highlighter-rouge">stop</code> waits 10 seconds for the container to exit before sending
SIGKILL.</p>

<h3 id="stop_signal">stop_signal</h3>

<p>Sets an alternative signal to stop the container. By default <code class="highlighter-rouge">stop</code> uses
SIGTERM. Setting an alternative signal using <code class="highlighter-rouge">stop_signal</code> causes
<code class="highlighter-rouge">stop</code> to send that signal instead.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>stop_signal: SIGUSR1
</code></pre></div></div>

<h3 id="storage_opt">storage_opt</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Set storage driver options for this service.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>storage_opt:
  size: '1G'
</code></pre></div></div>

<h3 id="sysctls">sysctls</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Kernel parameters to set in the container. You can use either an array or a
dictionary.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sysctls:
  net.core.somaxconn: 1024
  net.ipv4.tcp_syncookies: 0

sysctls:
  - net.core.somaxconn=1024
  - net.ipv4.tcp_syncookies=0
</code></pre></div></div>

<h3 id="ulimits">ulimits</h3>

<p>Override the default ulimits for a container. You can either specify a single
limit as an integer or soft/hard limits as a mapping.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ulimits:
  nproc: 65535
  nofile:
    soft: 20000
    hard: 40000
</code></pre></div></div>

<h3 id="userns_mode">userns_mode</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>userns_mode: "host"
</code></pre></div></div>

<p>Disables the user namespace for this service, if Docker daemon is configured with user namespaces.
See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/dockerd.md#disable-user-namespace-for-a-container">dockerd</a> for
more information.</p>

<h3 id="volumes">volumes</h3>

<p>Mount host folders or named volumes. Named volumes need to be specified with the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volume-configuration-reference">top-level <code class="highlighter-rouge">volumes</code> key</a>.</p>

<p>You can mount a relative path on the host, which expands relative to
the directory of the Compose configuration file being used. Relative paths
should always begin with <code class="highlighter-rouge">.</code> or <code class="highlighter-rouge">..</code>.</p>

<h4 id="short-syntax">Short syntax</h4>

<p>The short syntax uses the generic <code class="highlighter-rouge">[SOURCE:]TARGET[:MODE]</code> format, where
<code class="highlighter-rouge">SOURCE</code> can be either a host path or volume name. <code class="highlighter-rouge">TARGET</code> is the container
path where the volume is mounted. Standard modes are <code class="highlighter-rouge">ro</code> for read-only
and <code class="highlighter-rouge">rw</code> for read-write (default).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>volumes:
  # Just specify a path and let the Engine create a volume
  - /var/lib/mysql

  # Specify an absolute path mapping
  - /opt/data:/var/lib/mysql

  # Path on the host, relative to the Compose file
  - ./cache:/tmp/cache

  # User-relative path
  - ~/configs:/etc/configs/:ro

  # Named volume
  - datavolume:/var/lib/mysql
</code></pre></div></div>

<h4 id="long-syntax">Long syntax</h4>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-23">Added in version 2.3 file format</a>.</p>
</blockquote>

<p>The long form syntax allows the configuration of additional fields that can’t be
expressed in the short form.</p>

<ul>
  <li><code class="highlighter-rouge">type</code>: the mount type <code class="highlighter-rouge">volume</code>, <code class="highlighter-rouge">bind</code>, <code class="highlighter-rouge">tmpfs</code> or <code class="highlighter-rouge">npipe</code></li>
  <li><code class="highlighter-rouge">source</code>: the source of the mount, a path on the host for a bind mount, or the
name of a volume defined in the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volume-configuration-reference">top-level <code class="highlighter-rouge">volumes</code> key</a>. Not applicable for a tmpfs mount.</li>
  <li><code class="highlighter-rouge">target</code>: the path in the container where the volume is mounted</li>
  <li><code class="highlighter-rouge">read_only</code>: flag to set the volume as read-only</li>
  <li><code class="highlighter-rouge">bind</code>: configure additional bind options
    <ul>
      <li><code class="highlighter-rouge">propagation</code>: the propagation mode used for the bind</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">volume</code>: configure additional volume options
    <ul>
      <li><code class="highlighter-rouge">nocopy</code>: flag to disable copying of data from a container when a volume is
created</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">tmpfs</code>: configure additional tmpfs options
    <ul>
      <li><code class="highlighter-rouge">size</code>: the size for the tmpfs mount in bytes</li>
    </ul>
  </li>
</ul>

<pre><code class="language-none">version: "2.4"
services:
  web:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - type: volume
        source: mydata
        target: /data
        volume:
          nocopy: true
      - type: bind
        source: ./static
        target: /opt/app/static

networks:
  webnet:

volumes:
  mydata:
</code></pre>

<blockquote>
  <p><strong>Note</strong>: When creating bind mounts, using the long syntax requires the
referenced folder to be created beforehand. Using the short syntax
creates the folder on the fly if it doesn’t exist.
See the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/admin/volumes/bind-mounts.md/#differences-between--v-and---mount-behavior">bind mounts documentation</a>
for more information.</p>
</blockquote>

<h3 id="volume_driver">volume_driver</h3>

<p>Specify a default volume driver to be used for all declared volumes on this
service.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>volume_driver: mydriver
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: In <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-2">version 2 files</a>, this
option only applies to anonymous volumes (those specified in the image,
or specified under <code class="highlighter-rouge">volumes</code> without an explicit named volume or host path).
To configure the driver for a named volume, use the <code class="highlighter-rouge">driver</code> key under the
entry in the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volume-configuration-reference">top-level <code class="highlighter-rouge">volumes</code> option</a>.</p>
</blockquote>

<p>See <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/userguide/dockervolumes.md">Docker Volumes</a> and
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/extend/plugins_volume.md">Volume Plugins</a> for more information.</p>

<h3 id="volumes_from">volumes_from</h3>

<p>Mount all of the volumes from another service or container, optionally
specifying read-only access (<code class="highlighter-rouge">ro</code>) or read-write (<code class="highlighter-rouge">rw</code>). If no access level is specified,
then read-write is used.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>volumes_from:
 - service_name
 - service_name:ro
 - container:container_name
 - container:container_name:rw
</code></pre></div></div>

<blockquote>
  <p><strong>Notes</strong></p>

  <ul>
    <li>
      <p>The <code class="highlighter-rouge">container:...</code> formats are only supported in the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-2">version 2 file format</a>.</p>
    </li>
    <li>
      <p>In <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-1">version 1</a>, you can use
container names without marking them as such:</p>

      <ul>
        <li><code class="highlighter-rouge">service_name</code></li>
        <li><code class="highlighter-rouge">service_name:ro</code></li>
        <li><code class="highlighter-rouge">container_name</code></li>
        <li><code class="highlighter-rouge">container_name:rw</code></li>
      </ul>
    </li>
  </ul>
</blockquote>

<h3 id="restart">restart</h3>

<p><code class="highlighter-rouge">no</code> is the default restart policy, and it doesn’t restart a container under any circumstance. When <code class="highlighter-rouge">always</code> is specified, the container always restarts. The <code class="highlighter-rouge">on-failure</code> policy restarts a container if the exit code indicates an on-failure error.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - restart: no
  - restart: always
  - restart: on-failure
</code></pre></div></div>

<h3 id="cpu-and-other-resources">cpu_count, cpu_percent, cpu_shares, cpu_period, cpu_quota, cpus, cpuset, domainname, hostname, ipc, mac_address, mem_limit, memswap_limit, mem_swappiness, mem_reservation, oom_kill_disable, oom_score_adj, privileged, read_only, shm_size, stdin_open, tty, user, working_dir</h3>

<p>Each of these is a single value, analogous to its
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/run.md">docker run</a> counterpart.</p>

<blockquote>
  <p><strong>Note</strong>: The following options were added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-22">version 2.2</a>:
<code class="highlighter-rouge">cpu_count</code>, <code class="highlighter-rouge">cpu_percent</code>, <code class="highlighter-rouge">cpus</code>.
The following options were added in <a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">version 2.1</a>:
<code class="highlighter-rouge">oom_kill_disable</code>, <code class="highlighter-rouge">cpu_period</code></p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cpu_count: 2
cpu_percent: 50
cpus: 0.5
cpu_shares: 73
cpu_quota: 50000
cpu_period: 20ms
cpuset: 0,1

user: postgresql
working_dir: /code

domainname: foo.com
hostname: foo
ipc: host
mac_address: 02:42:ac:11:65:43

mem_limit: 1000000000
memswap_limit: 2000000000
mem_reservation: 512m
privileged: true

oom_score_adj: 500
oom_kill_disable: true

read_only: true
shm_size: 64M
stdin_open: true
tty: true
</code></pre></div></div>

<h2 id="orig-resources">Specifying durations</h2>

<p>Some configuration options, such as the <code class="highlighter-rouge">interval</code> and <code class="highlighter-rouge">timeout</code> sub-options for
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#healthcheck"><code class="highlighter-rouge">healthcheck</code></a>, accept a duration as a string in a
format that looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2.5s
10s
1m30s
2h32m
5h34m56s
</code></pre></div></div>

<p>The supported units are <code class="highlighter-rouge">us</code>, <code class="highlighter-rouge">ms</code>, <code class="highlighter-rouge">s</code>, <code class="highlighter-rouge">m</code> and <code class="highlighter-rouge">h</code>.</p>

<h2 id="specifying-byte-values">Specifying byte values</h2>

<p>Some configuration options, such as the <code class="highlighter-rouge">device_read_bps</code> sub-option for
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#blkioconfig"><code class="highlighter-rouge">blkio_config</code></a>, accept a byte value as a string in a format
that looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2b
1024kb
2048k
300m
1gb
</code></pre></div></div>

<p>The supported units are <code class="highlighter-rouge">b</code>, <code class="highlighter-rouge">k</code>, <code class="highlighter-rouge">m</code> and <code class="highlighter-rouge">g</code>, and their alternative notation <code class="highlighter-rouge">kb</code>,
<code class="highlighter-rouge">mb</code> and <code class="highlighter-rouge">gb</code>. Decimal values are not supported at this time.</p>

<h2 id="volume-configuration-reference">Volume configuration reference</h2>

<p>While it is possible to declare volumes on the fly as part of the service
declaration, this section allows you to create named volumes that can be
reused across multiple services (without relying on <code class="highlighter-rouge">volumes_from</code>), and are
easily retrieved and inspected using the docker command line or API.
See the <a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/volume_create.md">docker volume</a>
subcommand documentation for more information.</p>

<p>Here’s an example of a two-service setup where a database’s data directory is
shared with another service as a volume so that it can be periodically backed
up:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"

services:
  db:
    image: db
    volumes:
      - data-volume:/var/lib/db
  backup:
    image: backup-service
    volumes:
      - data-volume:/var/lib/backup/data

volumes:
  data-volume:
</code></pre></div></div>

<p>An entry under the top-level <code class="highlighter-rouge">volumes</code> key can be empty, in which case it
uses the default driver configured by the Engine (in most cases, this is the
<code class="highlighter-rouge">local</code> driver). Optionally, you can configure it with the following keys:</p>

<h3 id="driver">driver</h3>

<p>Specify which volume driver should be used for this volume. Defaults to whatever
driver the Docker Engine has been configured to use, which in most cases is
<code class="highlighter-rouge">local</code>. If the driver is not available, the Engine returns an error when
<code class="highlighter-rouge">docker-compose up</code> tries to create the volume.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> driver: foobar
</code></pre></div></div>

<h3 id="driver_opts">driver_opts</h3>

<p>Specify a list of options as key-value pairs to pass to the driver for this
volume. Those options are driver-dependent - consult the driver’s
documentation for more information. Optional.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> driver_opts:
   foo: "bar"
   baz: 1
</code></pre></div></div>

<h3 id="external">external</h3>

<p>If set to <code class="highlighter-rouge">true</code>, specifies that this volume has been created outside of
Compose. <code class="highlighter-rouge">docker-compose up</code> does not attempt to create it, and raises
an error if it doesn’t exist.</p>

<p>For version 2.0 of the format, <code class="highlighter-rouge">external</code> cannot be used in
conjunction with other volume configuration keys (<code class="highlighter-rouge">driver</code>, <code class="highlighter-rouge">driver_opts</code>,
<code class="highlighter-rouge">labels</code>). This limitation no longer exists for
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">version 2.1</a> and above.</p>

<p>In the example below, instead of attempting to create a volume called
<code class="highlighter-rouge">[projectname]_data</code>, Compose looks for an existing volume simply
called <code class="highlighter-rouge">data</code> and mount it into the <code class="highlighter-rouge">db</code> service’s containers.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"

services:
  db:
    image: postgres
    volumes:
      - data:/var/lib/postgresql/data

volumes:
  data:
    external: true
</code></pre></div></div>

<p>You can also specify the name of the volume separately from the name used to
refer to it within the Compose file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>volumes:
  data:
    external:
      name: actual-name-of-volume
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: In newer versions of Compose, the <code class="highlighter-rouge">external.name</code> property is
deprecated in favor of simply using the <code class="highlighter-rouge">name</code> property.</p>
</blockquote>

<h3 id="labels-2">labels</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Add metadata to containers using
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/userguide/labels-custom-metadata.md">Docker labels</a>. You can use either
an array or a dictionary.</p>

<p>It’s recommended that you use reverse-DNS notation to prevent your labels from
conflicting with those used by other software.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>labels:
  com.example.description: "Database volume"
  com.example.department: "IT/Ops"
  com.example.label-with-empty-value: ""

labels:
  - "com.example.description=Database volume"
  - "com.example.department=IT/Ops"
  - "com.example.label-with-empty-value"
</code></pre></div></div>

<h3 id="name">name</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a></p>
</blockquote>

<p>Set a custom name for this volume.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
volumes:
  data:
    name: my-app-data
</code></pre></div></div>

<p>It can also be used in conjunction with the <code class="highlighter-rouge">external</code> property:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
volumes:
  data:
    external: true
    name: my-app-data
</code></pre></div></div>

<h2 id="network-configuration-reference">Network configuration reference</h2>

<p>The top-level <code class="highlighter-rouge">networks</code> key lets you specify networks to be created. For a full
explanation of Compose’s use of Docker networking features, see the
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/networking.md">Networking guide</a>.</p>

<h3 id="driver-1">driver</h3>

<p>Specify which driver should be used for this network.</p>

<p>The default driver depends on how the Docker Engine you’re using is configured,
but in most instances it is <code class="highlighter-rouge">bridge</code> on a single host and <code class="highlighter-rouge">overlay</code> on a
Swarm.</p>

<p>The Docker Engine returns an error if the driver is not available.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>driver: overlay
</code></pre></div></div>

<p>Starting in Compose file format 2.1, overlay networks are always created as
<code class="highlighter-rouge">attachable</code>, and this is not configurable. This means that standalone
containers can connect to overlay networks.</p>

<h3 id="driver_opts-1">driver_opts</h3>

<p>Specify a list of options as key-value pairs to pass to the driver for this
network. Those options are driver-dependent - consult the driver’s
documentation for more information. Optional.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  driver_opts:
    foo: "bar"
    baz: 1
</code></pre></div></div>

<h3 id="enable_ipv6">enable_ipv6</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Enable IPv6 networking on this network.</p>

<h3 id="ipam">ipam</h3>

<p>Specify custom IPAM config. This is an object with several properties, each of
which is optional:</p>

<ul>
  <li><code class="highlighter-rouge">driver</code>: Custom IPAM driver, instead of the default.</li>
  <li><code class="highlighter-rouge">config</code>: A list with zero or more config blocks, each containing any of
the following keys:
    <ul>
      <li><code class="highlighter-rouge">subnet</code>: Subnet in CIDR format that represents a network segment</li>
      <li><code class="highlighter-rouge">ip_range</code>: Range of IPs from which to allocate container IPs</li>
      <li><code class="highlighter-rouge">gateway</code>: IPv4 or IPv6 gateway for the master subnet</li>
      <li><code class="highlighter-rouge">aux_addresses</code>: Auxiliary IPv4 or IPv6 addresses used by Network driver,
as a mapping from hostname to IP</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">options</code>: Driver-specific options as a key-value mapping.</li>
</ul>

<p>A full example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ipam:
  driver: default
  config:
    - subnet: 172.28.0.0/16
      ip_range: 172.28.5.0/24
      gateway: 172.28.5.254
      aux_addresses:
        host1: 172.28.1.5
        host2: 172.28.1.6
        host3: 172.28.1.7
  options:
    foo: bar
    baz: "0"
</code></pre></div></div>

<h3 id="internal">internal</h3>

<p>By default, Docker also connects a bridge network to it to provide external
connectivity. If you want to create an externally isolated overlay network,
you can set this option to <code class="highlighter-rouge">true</code>.</p>

<h3 id="labels-3">labels</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>Add metadata to containers using
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/engine/userguide/labels-custom-metadata.md">Docker labels</a>. You can use either
an array or a dictionary.</p>

<p>It’s recommended that you use reverse-DNS notation to prevent your labels from
conflicting with those used by other software.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>labels:
  com.example.description: "Financial transaction network"
  com.example.department: "Finance"
  com.example.label-with-empty-value: ""

labels:
  - "com.example.description=Financial transaction network"
  - "com.example.department=Finance"
  - "com.example.label-with-empty-value"
</code></pre></div></div>

<h3 id="external-1">external</h3>

<p>If set to <code class="highlighter-rouge">true</code>, specifies that this network has been created outside of
Compose. <code class="highlighter-rouge">docker-compose up</code> does not attempt to create it, and raises
an error if it doesn’t exist.</p>

<p>For version 2.0 of the format, <code class="highlighter-rouge">external</code> cannot be used in conjunction with
other network configuration keys (<code class="highlighter-rouge">driver</code>, <code class="highlighter-rouge">driver_opts</code>, <code class="highlighter-rouge">ipam</code>, <code class="highlighter-rouge">internal</code>).
This limitation no longer exists for
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">version 2.1</a> and above.</p>

<p>In the example below, <code class="highlighter-rouge">proxy</code> is the gateway to the outside world. Instead of
attempting to create a network called <code class="highlighter-rouge">[projectname]_outside</code>, Compose
looks for an existing network simply called <code class="highlighter-rouge">outside</code> and connect the <code class="highlighter-rouge">proxy</code>
service’s containers to it.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"

services:
  proxy:
    build: ./proxy
    networks:
      - outside
      - default
  app:
    build: ./app
    networks:
      - default

networks:
  outside:
    external: true
</code></pre></div></div>

<p>You can also specify the name of the network separately from the name used to
refer to it within the Compose file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>networks:
  outside:
    external:
      name: actual-name-of-network
</code></pre></div></div>

<p>Not supported for version 2 <code class="highlighter-rouge">docker-compose</code> files. Use
<a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#network_mode">network_mode</a> instead.</p>

<h3 id="name-1">name</h3>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a></p>
</blockquote>

<p>Set a custom name for this network.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
networks:
  network1:
    name: my-app-net
</code></pre></div></div>

<p>It can also be used in conjunction with the <code class="highlighter-rouge">external</code> property:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>version: "2.4"
networks:
  network1:
    external: true
    name: my-app-net
</code></pre></div></div>

<h2 id="variable-substitution">Variable substitution</h2>

<!--
Your configuration options can contain environment variables. Compose uses the
variable values from the shell environment in which `docker-compose` is run. For
example, suppose the shell contains `POSTGRES_VERSION=9.3` and you supply this
configuration:
-->
<p>設定オプションには環境変数を含めることができます。
Compose は <code class="highlighter-rouge">docker-compose</code> が実行されたシェル環境から変数値を取得します。
たとえばシェル環境に <code class="highlighter-rouge">POSTGRES_VERSION=9.3</code> が定義されているとして、以下のような設定を行ったとします。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">db</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">postgres:${POSTGRES_VERSION}"</span>
</code></pre></div></div>

<!--
When you run `docker-compose up` with this configuration, Compose looks for the
`POSTGRES_VERSION` environment variable in the shell and substitutes its value
in. For this example, Compose resolves the `image` to `postgres:9.3` before
running the configuration.
-->
<p>上の設定を使って <code class="highlighter-rouge">docker-compose up</code> を実行すると、Compose はシェル環境内の環境変数 <code class="highlighter-rouge">POSTGRES_VERSION</code> を見にいき、その値を使って設定を置換します。
この例では <code class="highlighter-rouge">image</code> が <code class="highlighter-rouge">postgres:9.3</code> と置換された上で、設定に関する処理へ進みます。</p>

<!--
If an environment variable is not set, Compose substitutes with an empty
string. In the example above, if `POSTGRES_VERSION` is not set, the value for
the `image` option is `postgres:`.
-->
<p>その環境変数が何も設定されていなかった場合、Compose は空文字に置換します。
上の例でいうと <code class="highlighter-rouge">POSTGRES_VERSION</code> が設定されていなかったとき、<code class="highlighter-rouge">image</code> オプションの値は <code class="highlighter-rouge">postgres:</code> になります。</p>

<!--
You can set default values for environment variables using a
[`.env` file](../env-file.md), which Compose automatically looks for. Values
set in the shell environment override those set in the `.env` file.
-->
<p>環境変数のデフォルト値を <a href="../env-file.md"><code class="highlighter-rouge">.env</code> ファイル</a>に設定しておくことができます。
Compose はこのファイルを自動的に探しにいきます。
<code class="highlighter-rouge">.env</code> ファイルで定義されたものよりも、シェル環境で設定された値が優先されます。</p>

<!--
> **Important**: The `.env file` feature only works when you use the
> `docker-compose up` command and does not work with `docker stack deploy`.
{: .important }
-->
<blockquote class="important">
  <p><strong>重要</strong>： <code class="highlighter-rouge">.env</code> ファイルによる機能は <code class="highlighter-rouge">docker-compose up</code> コマンドを使うときだけ動作します。
<code class="highlighter-rouge">docker stack deploy</code> コマンドでは動作しません。</p>
</blockquote>

<p><code class="highlighter-rouge">$VARIABLE</code> と <code class="highlighter-rouge">${VARIABLE}</code> という 2 つの文法がともにサポートされます。
さらに <a href="compose-versioning.md#version-21">2.1 ファイルフォーマット</a>を利用している場合は、シェル上でも利用されているインラインのデフォルト指定方法を行うことができます。</p>

<!--
- `${VARIABLE:-default}` evaluates to `default` if `VARIABLE` is unset or
  empty in the environment.
- `${VARIABLE-default}` evaluates to `default` only if `VARIABLE` is unset
  in the environment.
-->
<ul>
  <li><code class="highlighter-rouge">${VARIABLE:-default}</code> は <code class="highlighter-rouge">VARIABLE</code> がセットされていないか空文字であるときに <code class="highlighter-rouge">default</code> として評価されます。</li>
  <li><code class="highlighter-rouge">${VARIABLE-default}</code> は <code class="highlighter-rouge">VARIABLE</code> がセットされていないときのみ <code class="highlighter-rouge">default</code> として評価されます。</li>
</ul>

<!--
Similarly, the following syntax allows you to specify mandatory variables:
-->
<p>同様に以下の文法により、変数を必須とする扱いができます。</p>

<!--
- `${VARIABLE:?err}` exits with an error message containing `err` if
  `VARIABLE` is unset or empty in the environment.
- `${VARIABLE?err}` exits with an error message containing `err` if
  `VARIABLE` is unset in the environment.
-->
<ul>
  <li><code class="highlighter-rouge">${VARIABLE:?err}</code> は <code class="highlighter-rouge">VARIABLE</code> がセットされていないか空文字であるときに、<code class="highlighter-rouge">err</code> を含むエラーメッセージを表示して終了します。</li>
  <li><code class="highlighter-rouge">${VARIABLE?err}</code> は <code class="highlighter-rouge">VARIABLE</code> がセットされていないときに、<code class="highlighter-rouge">err</code> を含むエラーメッセージを表示して終了します。</li>
</ul>

<!--
Other extended shell-style features, such as `${VARIABLE/foo/bar}`, are not
supported.
-->
<p>シェル風のこの他の機能、たとえば <code class="highlighter-rouge">${VARIABLE/foo/bar}</code> などはサポートされていません。</p>

<!--
You can use a `$$` (double-dollar sign) when your configuration needs a literal
dollar sign. This also prevents Compose from interpolating a value, so a `$$`
allows you to refer to environment variables that you don't want processed by
Compose.
-->
<p>設定ファイル内にドル記号そのものが必要な場合は <code class="highlighter-rouge">$$</code>（ドル記号 2 つ）を書きます。
この記述は Compose が値を取り違えないようにします。
つまり <code class="highlighter-rouge">$$</code> と書くことで、環境変数を参照しつつ Compose には処理させないようにすることができます。</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">web</span><span class="pi">:</span>
  <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
  <span class="na">command</span><span class="pi">:</span> <span class="s2">"</span><span class="s">$$VAR_NOT_INTERPOLATED_BY_COMPOSE"</span>
</code></pre></div></div>

<!--
If you forget and use a single dollar sign (`$`), Compose interprets the value
as an environment variable and warns you:
-->
<p>このことを忘れてドル記号 1 つ（<code class="highlighter-rouge">$</code>）を用いてしまうと、Compose は環境変数として値を解釈し、以下の警告を出します。</p>

<!--
The VAR_NOT_INTERPOLATED_BY_COMPOSE is not set. Substituting an empty string.
-->
<p>VAR_NOT_INTERPOLATED_BY_COMPOSE は設定されていません。空文字として置換します。</p>

<h2 id="extension-fields">Extension fields</h2>

<blockquote>
  <p><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/#version-21">Added in version 2.1 file format</a>.</p>
</blockquote>

<p>It is possible to re-use configuration fragments using extension fields. Those
special fields can be of any format as long as they are located at the root of
your Compose file and their name start with the <code class="highlighter-rouge">x-</code> character sequence.</p>

<blockquote>
  <p><strong>Note</strong></p>

  <p>Starting with the 3.7 format (for the 3.x series) and 2.4 format
(for the 2.x series), extension fields are also allowed at the root
of service, volume, network, config and secret definitions.</p>
</blockquote>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.4'</span>
<span class="na">x-custom</span><span class="pi">:</span>
  <span class="na">items</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">a</span>
    <span class="pi">-</span> <span class="s">b</span>
  <span class="na">options</span><span class="pi">:</span>
    <span class="na">max-size</span><span class="pi">:</span> <span class="s1">'</span><span class="s">12m'</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">custom"</span>
</code></pre></div></div>

<p>The contents of those fields are ignored by Compose, but they can be
inserted in your resource definitions using <a href="http://www.yaml.org/spec/1.2/spec.html#id2765878">YAML anchors</a>.
For example, if you want several of your services to use the same logging
configuration:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">logging</span><span class="pi">:</span>
  <span class="na">options</span><span class="pi">:</span>
    <span class="na">max-size</span><span class="pi">:</span> <span class="s1">'</span><span class="s">12m'</span>
    <span class="na">max-file</span><span class="pi">:</span> <span class="s1">'</span><span class="s">5'</span>
  <span class="na">driver</span><span class="pi">:</span> <span class="s">json-file</span>
</code></pre></div></div>

<p>You may write your Compose file as follows:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.4'</span>
<span class="na">x-logging</span><span class="pi">:</span>
  <span class="nl">&amp;default-logging</span>
  <span class="na">options</span><span class="pi">:</span>
    <span class="na">max-size</span><span class="pi">:</span> <span class="s1">'</span><span class="s">12m'</span>
    <span class="na">max-file</span><span class="pi">:</span> <span class="s1">'</span><span class="s">5'</span>
  <span class="na">driver</span><span class="pi">:</span> <span class="s">json-file</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">myapp/web:latest</span>
    <span class="na">logging</span><span class="pi">:</span> <span class="nv">*default-logging</span>
  <span class="na">db</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mysql:latest</span>
    <span class="na">logging</span><span class="pi">:</span> <span class="nv">*default-logging</span>
</code></pre></div></div>

<p>It is also possible to partially override values in extension fields using
the <a href="http://yaml.org/type/merge.html">YAML merge type</a>. For example:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3.4'</span>
<span class="na">x-volumes</span><span class="pi">:</span>
  <span class="nl">&amp;default-volume</span>
  <span class="na">driver</span><span class="pi">:</span> <span class="s">foobar-storage</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">myapp/web:latest</span>
    <span class="na">volumes</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">vol1"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">vol2"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">vol3"</span><span class="pi">]</span>
<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">vol1</span><span class="pi">:</span> <span class="nv">*default-volume</span>
  <span class="na">vol2</span><span class="pi">:</span>
    <span class="s">&lt;&lt;</span> <span class="pi">:</span> <span class="nv">*default-volume</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">volume02</span>
  <span class="na">vol3</span><span class="pi">:</span>
    <span class="s">&lt;&lt;</span> <span class="pi">:</span> <span class="nv">*default-volume</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">default</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">volume-local</span>
</code></pre></div></div>

<h2 id="compose-documentation">Compose documentation</h2>

<ul>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/index.md">User guide</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/install.md">Installing Compose</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-versioning/">Compose file versions and upgrading</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/django.md">Get started with Django</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/rails.md">Get started with Rails</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/wordpress.md">Get started with WordPress</a></li>
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/reference/">Command line reference</a></li>
</ul>

							<!-- tags -->
							
							
							
							<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=fig">fig</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=composition">composition</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=compose version 3">compose version 3</a>, <a href="https://matsuand.github.io/docs.docker.jp.onthefly/glossary/?term=docker">docker</a></span>
							
							<!-- link corrections -->
              <script language="JavaScript">
							var x = document.links.length;
							var baseHref = document.getElementsByTagName('base')[0].href
							for (i = 0; i < x; i++) {
							  var munged = false;
							  var thisHREF = document.links[i].href;
							  var originalURL = "/compose/compose-file/compose-file-v2/";
							  if (thisHREF.indexOf(baseHref + "#") > -1) {
							    // hash fix
							    //console.log('BEFORE: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							    thisHREF = originalURL + thisHREF.replace(baseHref, "");
							    //console.log('AFTER: base:',baseHref,'thisHREF:',thisHREF,'originalURL:',originalURL);
							  }
							  if ((thisHREF.indexOf(window.location.hostname) > -1 || thisHREF.indexOf('http') == -1) && document.links[i].className.indexOf("nomunge") < 0) {
							    munged = true;
							    thisHREF = thisHREF.replace(".md", "/").replace("/index/", "/");
							    document.links[i].setAttribute('href', thisHREF);
							  }
							}
							</script>
							
						  <div id="ratings-div" style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
								<div id="pd_rating_holder_8453675"></div>
								<script type="text/javascript">
									PDRTJS_settings_8453675 = {
										"id": "8453675",
										"unique_id": "compose/compose-file/compose-file-v2.md",
										"title": "Compose file version 2 reference",
										"permalink": "https://github.com/docker/docker.github.io/blob/master/compose/compose-file/compose-file-v2.md"
									};
									(function(d, c, j) {
										if (!document.getElementById(j)) {
											var pd = d.createElement(c),
												s;
											pd.id = j;
											pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
											s = document.getElementsByTagName(c)[0];
											s.parentNode.insertBefore(pd, s);
										}
									}(document, 'script', 'pd-rating-js'));
								</script>
							</div>
							
						</section>
					</main>
					<nav class="col-nav">
						<div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
						<div id="navbar" class="nav-sidebar">
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

						</div>
					</nav>
					<div class="col-toc">
							<div class="sidebar hidden-xs hidden-sm">
							<div class="toc-nav">
								<div class="feedback-links">
									<ul>
										
										<li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v18.09.local/compose/compose-file/compose-file-v2.md"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
										<li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [compose/compose-file/compose-file-v2.md](https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/)"
															class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
										<li><a href="https://success.docker.com/support"><i class="fa fa-question" aria-hidden="true"></i> サポート依頼</a></li>
										<!-- toggle mode -->
										<li>
											<div class="toggle-mode">
												<div class="icon">
													<i class="fa fa-sun-o" aria-hidden="true"></i>
												</div>
												<div class="toggle-switch">
													<label class="switch">
														<input type="checkbox" id="switch-style">
														<div class="slider round"></div>
												</label>
												</div>
												<div class="icon">
													<i class="fa fa-moon-o" aria-hidden="true"></i>
												</div>
											</div>
										</li>
									</ul>
								</div>
								   
									<div id="side-toc-title">本ページ内</div>
									
<ul id="my_toc" class="inline_toc">
  <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#reference-and-guidelines" class="nomunge">Reference and guidelines</a>
    <ul>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#compose-and-docker-compatibility-matrix" class="nomunge">Compose and Docker compatibility matrix</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#service-configuration-reference" class="nomunge">Service configuration reference</a>
        <ul>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#blkio_config" class="nomunge">blkio_config</a>
            <ul>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#device_read_bps-device_write_bps" class="nomunge">device_read_bps, device_write_bps</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#device_read_iops-device_write_iops" class="nomunge">device_read_iops, device_write_iops</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#weight" class="nomunge">weight</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#weight_device" class="nomunge">weight_device</a></li>
            </ul>
          </li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#build" class="nomunge">build</a>
            <ul>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#cache_from" class="nomunge">cache_from</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#context" class="nomunge">context</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#dockerfile" class="nomunge">dockerfile</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#args" class="nomunge">args</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#extra_hosts" class="nomunge">extra_hosts</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#isolation" class="nomunge">isolation</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#labels" class="nomunge">labels</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#network" class="nomunge">network</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#shm_size" class="nomunge">shm_size</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#target" class="nomunge">target</a></li>
            </ul>
          </li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#cap_add-cap_drop" class="nomunge">cap_add, cap_drop</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#command" class="nomunge">command</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#cgroup_parent" class="nomunge">cgroup_parent</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#container_name" class="nomunge">container_name</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#cpu_rt_runtime-cpu_rt_period" class="nomunge">cpu_rt_runtime, cpu_rt_period</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#device_cgroup_rules" class="nomunge">device_cgroup_rules</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#devices" class="nomunge">devices</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#depends_on" class="nomunge">depends_on</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#dns" class="nomunge">dns</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#dns_opt" class="nomunge">dns_opt</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#dns_search" class="nomunge">dns_search</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#tmpfs" class="nomunge">tmpfs</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#entrypoint" class="nomunge">entrypoint</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#env_file" class="nomunge">env_file</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#environment" class="nomunge">environment</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#expose" class="nomunge">expose</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#extends" class="nomunge">extends</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#external_links" class="nomunge">external_links</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#extra_hosts-1" class="nomunge">extra_hosts</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#group_add" class="nomunge">group_add</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#healthcheck" class="nomunge">healthcheck</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#image" class="nomunge">image</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#init" class="nomunge">init</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#isolation-1" class="nomunge">isolation</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#labels-1" class="nomunge">labels</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#links" class="nomunge">links</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#logging" class="nomunge">logging</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#network_mode" class="nomunge">network_mode</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#networks" class="nomunge">networks</a>
            <ul>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#aliases" class="nomunge">aliases</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#ipv4_address-ipv6_address" class="nomunge">ipv4_address, ipv6_address</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#link_local_ips" class="nomunge">link_local_ips</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#priority" class="nomunge">priority</a></li>
            </ul>
          </li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#pid" class="nomunge">pid</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#pids_limit" class="nomunge">pids_limit</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#platform" class="nomunge">platform</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#ports" class="nomunge">ports</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#runtime" class="nomunge">runtime</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#scale" class="nomunge">scale</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#security_opt" class="nomunge">security_opt</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#stop_grace_period" class="nomunge">stop_grace_period</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#stop_signal" class="nomunge">stop_signal</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#storage_opt" class="nomunge">storage_opt</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#sysctls" class="nomunge">sysctls</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#ulimits" class="nomunge">ulimits</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#userns_mode" class="nomunge">userns_mode</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volumes" class="nomunge">volumes</a>
            <ul>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#short-syntax" class="nomunge">Short syntax</a></li>
              <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#long-syntax" class="nomunge">Long syntax</a></li>
            </ul>
          </li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volume_driver" class="nomunge">volume_driver</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volumes_from" class="nomunge">volumes_from</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#restart" class="nomunge">restart</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#cpu-and-other-resources" class="nomunge">cpu_count, cpu_percent, cpu_shares, cpu_period, cpu_quota, cpus, cpuset, domainname, hostname, ipc, mac_address, mem_limit, memswap_limit, mem_swappiness, mem_reservation, oom_kill_disable, oom_score_adj, privileged, read_only, shm_size, stdin_open, tty, user, working_dir</a></li>
        </ul>
      </li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#orig-resources" class="nomunge">Specifying durations</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#specifying-byte-values" class="nomunge">Specifying byte values</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#volume-configuration-reference" class="nomunge">Volume configuration reference</a>
        <ul>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#driver" class="nomunge">driver</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#driver_opts" class="nomunge">driver_opts</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#external" class="nomunge">external</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#labels-2" class="nomunge">labels</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#name" class="nomunge">name</a></li>
        </ul>
      </li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#network-configuration-reference" class="nomunge">Network configuration reference</a>
        <ul>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#driver-1" class="nomunge">driver</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#driver_opts-1" class="nomunge">driver_opts</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#enable_ipv6" class="nomunge">enable_ipv6</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#ipam" class="nomunge">ipam</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#internal" class="nomunge">internal</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#labels-3" class="nomunge">labels</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#external-1" class="nomunge">external</a></li>
          <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#name-1" class="nomunge">name</a></li>
        </ul>
      </li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#variable-substitution" class="nomunge">Variable substitution</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#extension-fields" class="nomunge">Extension fields</a></li>
      <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/compose/compose-file/compose-file-v2/#compose-documentation" class="nomunge">Compose documentation</a></li>
    </ul>
  </li>
</ul>


								</div>
								
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	
	<footer class="footer">
		  
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/what-docker">What is Docker</a></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners/partner-program">Partners</a></li>
                        <li class="break"><a href="https://www.docker.com/industry-government">For Government</a></li>
                        <li><a href="https://www.docker.com/company">About Docker</a></li>
                        <li><a href="https://www.docker.com/company/management">Management</a></li>
                        <li><a href="https://www.docker.com/company/news-and-press">Press &amp; News</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/products/overview">Product</a></li>
                        <li><a href="https://www.docker.com/pricing">Pricing</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community Edition</a></li>
                        <li class="break"><a href="https://www.docker.com/enterprise">Enterprise Edition </a></li>
                        <li><a href="https://www.docker.com/products/docker-datacenter">Docker Datacenter</a></li>
                        <li><a href="https://hub.docker.com/">Docker Hub</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/">Documentation</a></li>
                        <li><a href="https://www.docker.com/docker">Learn</a></li>
                        <li><a href="https://blog.docker.com" target="_blank">Blog</a></li>
                        <li><a href="https://engineering.docker.com" target="_blank">Engineering Blog</a></li>
                        <li><a href="https://training.docker.com/" target="_blank">Training</a></li>
                        <li><a href="https://success.docker.com/support">Support</a></li>
                        <li><a href="https://success.docker.com/kbase">Knowledge Base</a></li>
                        <li><a href="https://www.docker.com/products/resources">Resources</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/technologies/overview">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/events">Events</a></li>
                        <li><a href="https://forums.docker.com/" target="_blank">Forums</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                        <li><a href="https://www.docker.com/docker-community/scholarships">Scholarships</a></li>
                        <li><a href="https://blog.docker.com/curated/">Community News</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2019 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-google-plus"><a href="https://plus.google.com/u/0/communities/108146856671494713993">Google</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker/docker">Github</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-reddit"><a href="http://www.reddit.com/r/docker">Reddit</a></li>
                    <li class="fa fa-slideshare"><a href="http://www.slideshare.net/docker">Slideshare</a></li>
                </ul>
            </div>
        </div>
    </div>

	</footer>
	<link rel="stylesheet" href="https://matsuand.github.io/docs.docker.jp.onthefly/css/github.css">
	
	<!-- <script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/anchorlinks.js"></script> -->
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/menu.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/jquery.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
	<!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
	<script language="javascript">
	// Default to assuming this is an archive and hiding some stuff
	// See js/archive.js and js/docs.js for logic relating to this
	var isArchive = true;
	var dockerVersion = 'v18.09';
	// In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
	var jekyllEnv = 'development';
	// If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
	if (jekyllEnv == 'development') {
		jekyllEnv = '';
	}
	var pageURL = jekyllEnv + '/compose/compose-file/compose-file-v2/';
	</script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/archive.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/metadata.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/glossary.js"></script>
	<script src="https://matsuand.github.io/docs.docker.jp.onthefly/js/collections_tocs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/docs.js"></script>
	<script defer src="https://matsuand.github.io/docs.docker.jp.onthefly/js/toc.js"></script>
	<script language="javascript">
	jQuery(document).ready(function(){
				hookupTOCEvents();
			});
	</script>
</body>

</html>
