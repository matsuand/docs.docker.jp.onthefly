<!-- Page generated 2020-05-30 14:52:22 +0900 -->
<!-- Logic for 'edit this button'


    

    

    

    

    

    

    

    

-->
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <style type="text/css">
      @charset "UTF-8";
      [ng\:cloak],
      [ng-cloak],
      [data-ng-cloak],
      [x-ng-cloak],
      .ng-cloak,
      .x-ng-cloak,
      .ng-hide:not(.ng-hide-animate) {
          display: none !important;
      }

      ng\:form {
          display: block;
      }
  </style>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-WL2QLG5');</script>

  
  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <!-- metadata -->
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2020-05-30T14:52:22+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:domain" content="docs.docker.com"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:title" itemprop="title name" content="Docker Machine をローカル VM で始めるには"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="Let’s take a look at using docker-machine to create, use and manage a Docker host inside of a local virtual machine. 前提条件 With the advent of Docker Desktop for Mac..." />
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker Documentation"/>
  <meta property="article:published_time" itemprop="datePublished" content="2020-05-30T14:52:22+09:00"/>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="keywords" content="machine, virtualbox">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link id="pygments" rel="stylesheet" href="/docs.docker.jp.onthefly/css/pygments/perldoc.css">
  <link id="pagestyle" rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css">

  <!-- Go get "Open Sans" font from Google -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <!-- SEO stuff -->
  <title>Docker Machine をローカル VM で始めるには | Docker Documentation</title>
  <meta property="og:title" content="Docker Machine をローカル VM で始めるには" />
  <meta property="og:locale" content="ja_JP" />
  <meta name="description" content="Get started with Docker Machine and a local VM" />
  <meta property="og:description" content="Get started with Docker Machine and a local VM" />
  <link rel="canonical" href="/machine/get-started/" />
  <meta property="og:url" content="https://docs.docker.com/machine/get-started/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"Docker Machine をローカル VM で始めるには","description":"Get started with Docker Machine and a local VM","url":"https://docs.docker.com/machine/get-started/"}</script>
  <!-- END SEO STUFF -->
  <meta name="robots" content="noindex" />
  <script>
  // Default to assuming this is an archive and hiding some stuff
  // See js/archive.js and js/docs.js for logic relating to this
  var isArchive = true;
  var dockerVersion = 'v19.03';
  </script>
</head>


    <body ng-app="Docker" ng-controller="DockerController" class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <!-- <div class="fan"></div> -->
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs">
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs">
    </a>
</div>
<div class="search-form" id="search-div" style="visibility: hidden">
    <form class="search-form form-inline ng-pristine ng-valid" id="searchForm" action="https://matsuand.github.io/docs.docker.jp.onthefly/search/">
        <input class="search-field form-control ds-input" id="st-search-input" value="" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteContainer">
            <div id="autocompleteResults"></div>
        </div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div id="tabs">
        <ul class="tabs jsTOCHorizontal">

        </ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle"><i class="fa fa-indent" aria-hidden="true"></i></a>
        <div class="btn-group" style="visibility: hidden">
  <button type="button" class="btn btn-default dropdown-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Docker v19.03 (最新)     <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.09/">Docker v18.09</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v18.03/">Docker v18.03</a></li><li><a href="https://matsuand.github.io/docs.docker.jp.onthefly/v17.06/">Docker v17.06</a></li>
  </ul>
</div>

    </div>
</div>

        </div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section">
                            
                            
                            <h1>Docker Machine をローカル VM で始めるには</h1> 
                            <span class="reading-time" title="Estimated reading time">
  <span class="reading-time-label">読む時間の目安: </span>
  
  
    10 分
  
</span>

                            
                            
                            <p>Let’s take a look at using <code class="highlighter-rouge">docker-machine</code> to create, use and manage a
Docker host inside of a local virtual machine.</p>

<h2 id="prerequisite-information">前提条件</h2>

<p>With the advent of <a href="/docs.docker.jp.onthefly/docker-for-mac/">Docker Desktop for Mac</a> and
<a href="/docs.docker.jp.onthefly/docker-for-windows/">Docker Desktop for Windows</a> as replacements for
<a href="/docs.docker.jp.onthefly/toolbox/overview/">Docker Toolbox</a>, we recommend that you use these for your
primary Docker workflows. You can use these applications to run Docker natively
on your local system without using Docker Machine at all. (See
<a href="/docs.docker.jp.onthefly/docker-for-mac/docker-toolbox/">Docker Desktop for Mac vs. Docker Toolbox</a>
for an explanation on the Mac side.)</p>

<p>For now, however, if you want to create <em>multiple</em> local machines, you still
need Docker Machine to create and manage machines for multi-node
experimentation. Both Docker Desktop for Mac and Docker Desktop for Windows include the newest
version of Docker Machine, so when you install either of these, you get
<code class="highlighter-rouge">docker-machine</code>.</p>

<p>The new solutions come with their own native virtualization solutions rather
than Oracle VirtualBox, so keep the following considerations in mind when using
Machine to create local VMs.</p>

<ul>
  <li>
    <p><strong>Docker Desktop for Mac</strong> - You can use <code class="highlighter-rouge">docker-machine create</code> with the <code class="highlighter-rouge">virtualbox</code> driver to create additional local machines.</p>
  </li>
  <li>
    <p><strong>Docker Desktop for Windows</strong> - You can use <code class="highlighter-rouge">docker-machine create</code> with the <code class="highlighter-rouge">hyperv</code> driver to create additional local machines.</p>
  </li>
</ul>

<h4 id="if-you-are-using-docker-desktop-for-windows">Docker Desktop for Windows を使っている場合</h4>

<p>Docker Desktop for Windows uses <a href="https://msdn.microsoft.com/en-us/virtualization/hyperv_on_windows/windows_welcome">Microsoft
Hyper-V</a>
for virtualization, and Hyper-V is not compatible with Oracle VirtualBox.
Therefore, you cannot run the two solutions simultaneously. But you can still
use <code class="highlighter-rouge">docker-machine</code> to create more local VMs by using the Microsoft Hyper-V
driver.</p>

<p>The prerequisites are:</p>

<ul>
  <li>
    <p>Have Docker Desktop for Windows installed, and running (which requires that virtualization and Hyper-V are enabled, as described in <a href="/docs.docker.jp.onthefly/docker-for-windows/install/#what-to-know-before-you-install">What to know before you install Docker Desktop for Windows</a>).</p>
  </li>
  <li>
    <p>Set up the Hyper-V driver to use an external virtual network switch See
the <a href="/docs.docker.jp.onthefly/machine/drivers/hyper-v/">Docker Machine driver for Microsoft Hyper-V</a> topic,
which includes an <a href="/docs.docker.jp.onthefly/machine/drivers/hyper-v/#example">example</a> of how to do this.</p>
  </li>
</ul>

<h4 id="if-you-are-using-docker-desktop-for-mac">Docker Desktop for Mac を使っている場合</h4>

<p>Docker Desktop for Mac uses <a href="https://github.com/docker/HyperKit/">HyperKit</a>, a
lightweight macOS virtualization solution built on top of the
<a href="https://developer.apple.com/reference/hypervisor">Hypervisor.framework</a>.</p>

<p>Currently, there is no <code class="highlighter-rouge">docker-machine create</code> driver for HyperKit, so
use the <code class="highlighter-rouge">virtualbox</code> driver to create local machines. (See the
<a href="/docs.docker.jp.onthefly/machine/drivers/virtualbox/">Docker Machine driver for Oracle VirtualBox</a>.) You can
run both HyperKit and Oracle VirtualBox on the same system. To learn more, see
<a href="/docs.docker.jp.onthefly/docker-for-mac/docker-toolbox/">Docker Desktop for Mac vs. Docker Toolbox</a>.</p>

<ul>
  <li><a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" class="_">最新版の VirtualBox</a> を正しくインストールできていることを確認します。（すでに示した ToolBox の一部としてインストールしているか、直接インストールしているかのどちらでも構いません。）</li>
</ul>

<h4 id="if-you-are-using-docker-toolbox">Docker Toolbox を使っている場合</h4>

<p>Docker Desktop for Mac and Docker Desktop for Windows both require newer versions of their
respective operating systems, so users with older OS versions must use Docker
Toolbox.</p>

<ul>
  <li>
    <p>If you are using Docker Toolbox on either Mac or an older version Windows
system (without Hyper-V), use the <code class="highlighter-rouge">virtualbox</code> driver to create a local machine
based on Oracle <a href="https://www.virtualbox.org/" target="_blank" class="_">VirtualBox</a>.
(See the <a href="/docs.docker.jp.onthefly/machine/drivers/virtualbox/">Docker Machine driver for Oracle VirtualBox</a>.)</p>
  </li>
  <li>
    <p>If you are using Docker Toolbox on a Windows system that has Hyper-V but cannot
run Docker Desktop for Windows (for example Windows 8 Pro), you must use the
<code class="highlighter-rouge">hyperv</code> driver to create local machines. (See th
 <a href="/docs.docker.jp.onthefly/machine/drivers/hyper-v/">Docker Machine driver for Microsoft Hyper-V</a>.)</p>
  </li>
  <li>
    <p>Make sure you have <a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" class="_">the latest VirtualBox</a>
correctly installed on your system. If you used
<a href="https://www.docker.com/products/docker-toolbox" target="_blank" class="_">Toolbox</a>
or <a href="/docs.docker.jp.onthefly/docker-for-windows/" target="_blank" class="_">Docker Desktop for Windows</a>
to install Docker Machine, VirtualBox is
automatically installed.</p>
  </li>
  <li>
    <p>If you used the Quickstart Terminal to launch your first machine and set your
terminal environment to point to it, a default machine was automatically
created. If so, you can still follow along with these steps, but
create another machine and name it something other than <code class="highlighter-rouge">default</code>.</p>
  </li>
</ul>

<h2 id="use-machine-to-run-docker-containers">Use Machine to run Docker containers</h2>

<p>Docker コンテナを実行するには、</p>

<ul>
  <li>新しい Docker 仮想マシンを生成します（あるいは既存の仮想マシンを開始します）。</li>
  <li>環境変数を新しい仮想マシンに切り替えます。</li>
  <li>docker クライアントを使ってコンテナの作成、読み込み、管理を行います。</li>
</ul>

<p>Docker Machine で作成したマシンは、必要に応じて何度も再利用できます。マシンは VirtualBox 上の仮想マシンと同じ環境であり、どちらでも同じ設定が使われます。</p>

<p>以下の例で、マシンの作成・起動方法、 Docker コマンドの実行方法、コンテナの使い方を見ていきます。</p>

<h2 id="create-a-machine">マシンの作成</h2>

<ol>
  <li>
    <p>コマンドシェルやターミナル画面を開きます。</p>

    <p>以下の例では Bash シェルを扱います。 C シェルのような他のシェルでは、いくつかのコマンドが動作しない可能性がありますので、ご注意ください。</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">docker-machine ls</code> を使って利用可能なマシンの一覧を表示します。</p>

    <p>以下の例では、マシンがまだ１台も作成されていないことが分かります。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker-machine ls
 NAME   ACTIVE   DRIVER   STATE   URL   SWARM   DOCKER   ERRORS
</code></pre></div>    </div>
  </li>
  <li>
    <p>マシンを作成します。</p>

    <p>コマンド <code class="highlighter-rouge">docker-machine create</code> の実行時、 <code class="highlighter-rouge">--driver</code> フラグに <code class="highlighter-rouge">virtualbox</code> の文字列を指定します。
 そして、最後の引数がマシン名になります。
 これが初めてのマシンであれば、名前を <code class="highlighter-rouge">default</code> にしましょう。
 すでに「default｣という名前のマシンが存在している場合は、別の新しいマシン名を指定します。</p>

    <ul>
      <li>
        <p>If you are using Toolbox on Mac, Toolbox on older Windows systems without Hyper-V, or Docker Desktop for Mac, use <code class="highlighter-rouge">virtualbox</code> as the driver, as shown in this example. (The Docker Machine VirtualBox driver reference is <a href="/docs.docker.jp.onthefly/machine/drivers/virtualbox/">here</a>.) (See <a href="/docs.docker.jp.onthefly/machine/get-started/#prerequisite-information">prerequisites</a> above to learn more.)</p>
      </li>
      <li>
        <p>On Docker Desktop for Windows systems that support Hyper-V, use the <code class="highlighter-rouge">hyperv</code> driver as shown in the <a href="/docs.docker.jp.onthefly/machine/drivers/hyper-v/">Docker Machine Microsoft Hyper-V driver reference</a> and follow the <a href="/docs.docker.jp.onthefly/machine/drivers/hyper-v/#example">example</a>, which shows how to use an external network switch and provides the flags for the full command. (See <a href="/docs.docker.jp.onthefly/machine/get-started/#prerequisite-information">prerequisites</a> above to learn more.)</p>

        <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $ docker-machine create --driver virtualbox default
  Running pre-create checks...
  Creating machine...
  (staging) Copying /Users/ripley/.docker/machine/cache/boot2docker.iso to /Users/ripley/.docker/machine/machines/default/boot2docker.iso...
  (staging) Creating VirtualBox VM...
  (staging) Creating SSH key...
  (staging) Starting the VM...
  (staging) Waiting for an IP...
  Waiting for machine to be running, this may take a few minutes...
  Machine is running, waiting for SSH to be available...
  Detecting operating system of created instance...
  Detecting the provisioner...
  Provisioning with boot2docker...
  Copying certs to the local machine directory...
  Copying certs to the remote machine...
  Setting Docker configuration on the remote daemon...
  Checking connection to Docker...
  Docker is up and running!
  To see how to connect Docker to this machine, run: docker-machine env default
</code></pre></div>        </div>

        <p>このコマンドは Docker デーモンをインストールする軽量 Linux ディストリビューション (<a href="https://github.com/boot2docker/boot2docker" target="_blank" class="_">boot2docker</a>) をダウンロードし、Docker を動かすための VirtualBox 仮想マシンを作成・起動します。</p>
      </li>
    </ul>
  </li>
  <li>
    <p>再び利用可能なマシン一覧表示したら、新しいマシンが出てきます。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker-machine ls
 NAME      ACTIVE   DRIVER       STATE     URL                         SWARM   DOCKER   ERRORS
 default   *        virtualbox   Running   tcp://192.168.99.187:2376           v1.9.1
</code></pre></div>    </div>
  </li>
  <li>
    <p>コマンドの環境変数を新しい仮想マシンに設定します。</p>

    <p>コマンド <code class="highlighter-rouge">docker-machine create</code> を実行しても、そのまま新しいマシンを操作できないので注意が必要です。新しいマシンの操作には <code class="highlighter-rouge">docker-machine env</code> コマンドを使います。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker-machine env default
 export DOCKER_TLS_VERIFY="1"
 export DOCKER_HOST="tcp://172.16.62.130:2376"
 export DOCKER_CERT_PATH="/Users/&lt;yourusername&gt;/.docker/machine/machines/default"
 export DOCKER_MACHINE_NAME="default"
 # Run this command to configure your shell:
 # eval "$(docker-machine env default)"
</code></pre></div>    </div>
  </li>
  <li>
    <p>シェルを新しいマシンに接続します。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ eval "$(docker-machine env default)"
</code></pre></div>    </div>

    <p><strong>メモ</strong>: <code class="highlighter-rouge">fish</code> や Powershell 、あるいは <code class="highlighter-rouge">cmd.exe</code> のような Windows シェルでは、先ほどのコマンドは実行できません。
   自分の使っているシェルで環境変数を有効にする方法は、 <a href="/docs.docker.jp.onthefly/machine/reference/env/" target="_blank" class="_">the <code class="highlighter-rouge">env</code> command’s documentation</a> をご覧ください。</p>

    <p>このシェル上で指定した環境変数を使えば、クライアントは指定された  TLS 設定を読み込みます。
 新しいシェルの起動時やマシン再起動時には、再度指定する必要があります。
 （<a href="/docs.docker.jp.onthefly/machine/get-started/#unset-environment-variables-in-the-current-shell">カレントシェルの環境変数クリア</a> も参照してください。）</p>

    <p>あとはホスト上で Docker コマンドを実行できます。</p>
  </li>
</ol>

<h2 id="run-containers-and-experiment-with-machine-commands">Machine コマンドを使ってコンテナを実行</h2>

<p>セットアップが完了したことを確認するため、<code class="highlighter-rouge">docker run</code> コマンドを使ってコンテナを起動しましょう。</p>

<ol>
  <li>
    <p><code class="highlighter-rouge">docker run</code> コマンドを使い、 <code class="highlighter-rouge">busybox</code> イメージをダウンロードし、 簡単な ‘echo’ コマンドを実行します。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker run busybox echo hello world
 Unable to find image 'busybox' locally
 Pulling repository busybox
 e72ac664f4f0: Download complete
 511136ea3c5a: Download complete
 df7546f9f060: Download complete
 e433a6c5b276: Download complete
 hello world
</code></pre></div>    </div>
  </li>
  <li>
    <p>ホストの IP アドレスを確認します。</p>

    <p>Docker ホスト上でポート番号が利用可能な IP アドレスの確認は、 <code class="highlighter-rouge">docker-machine ip</code> コマンドを使います。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker-machine ip default
 192.168.99.100
</code></pre></div>    </div>
  </li>
  <li>
    <p>コンテナで<a href="https://www.nginx.com/" target="_blank" class="_">Nginx</a> を実行するため、次のコマンドを実行します。</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ docker run -d -p 8000:80 nginx
</code></pre></div>    </div>

    <p>イメージの取得が完了したら、 <code class="highlighter-rouge">docker-machine ip</code> で確認した IP アドレス上のポート 8000 でサーバにアクセスできます。実行例：</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     $ curl $(docker-machine ip default):8000
     <span class="cp">&lt;!DOCTYPE html&gt;</span>
     <span class="nt">&lt;html&gt;</span>
     <span class="nt">&lt;head&gt;</span>
     <span class="nt">&lt;title&gt;</span>Welcome to nginx!<span class="nt">&lt;/title&gt;</span>
     <span class="nt">&lt;style&gt;</span>
         <span class="nt">body</span> <span class="p">{</span>
             <span class="nl">width</span><span class="p">:</span> <span class="m">35em</span><span class="p">;</span>
             <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>
             <span class="nl">font-family</span><span class="p">:</span> <span class="n">Tahoma</span><span class="p">,</span> <span class="n">Verdana</span><span class="p">,</span> <span class="n">Arial</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
         <span class="p">}</span>
     <span class="nt">&lt;/style&gt;</span>
     <span class="nt">&lt;/head&gt;</span>
     <span class="nt">&lt;body&gt;</span>
     <span class="nt">&lt;h1&gt;</span>Welcome to nginx!<span class="nt">&lt;/h1&gt;</span>
     <span class="nt">&lt;p&gt;</span>If you see this page, the nginx web server is successfully installed and
     working. Further configuration is required.<span class="nt">&lt;/p&gt;</span>

     <span class="nt">&lt;p&gt;</span>For online documentation and support, refer to
     <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://nginx.org/"</span><span class="nt">&gt;</span>nginx.org<span class="nt">&lt;/a&gt;</span>.<span class="nt">&lt;br/&gt;</span>
     Commercial support is available at
     <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://nginx.com/"</span><span class="nt">&gt;</span>nginx.com<span class="nt">&lt;/a&gt;</span>.<span class="nt">&lt;/p&gt;</span>

     <span class="nt">&lt;p&gt;&lt;em&gt;</span>Thank you for using nginx.<span class="nt">&lt;/em&gt;&lt;/p&gt;</span>
     <span class="nt">&lt;/body&gt;</span>
     <span class="nt">&lt;/html&gt;</span>
</code></pre></div>    </div>
  </li>
</ol>

<p>あとは、好きなだけ実行したいローカル仮想マシンを作成・管理できます。そのためには <code class="highlighter-rouge">docker-machine create</code> を実行するだけです。作成されたマシン全ての情報を確認するには <code class="highlighter-rouge">docker-machine ls</code> を使います。</p>

<h2 id="start-and-stop-machines">マシンの起動と停止</h2>

<p>ホストを使い終わり、しばらく使わないのであれば、 <code class="highlighter-rouge">docker-machine stop</code> を実行して停止できます。あとで起動したい場合は <code class="highlighter-rouge">docker-machine start</code>  を実行します。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    $ docker-machine stop default
    $ docker-machine start default
</code></pre></div></div>

<h2 id="operate-on-machines-without-specifying-the-name">マシンの名前を指定せずに操作するには</h2>

<p>いくつかの <code class="highlighter-rouge">docker-machine</code> コマンドは、マシン名を明示しれなければ <code class="highlighter-rouge">default</code> という名称のマシン（が存在している場合）に対して処理を行います。そのため、 <code class="highlighter-rouge">default</code> ローカル仮想マシンは一般的なパターンとして、頻繁に利用できるでしょう。</p>

<p>実行例：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      $ docker-machine stop
      Stopping "default"....
      Machine "default" was stopped.

      $ docker-machine start
      Starting "default"...
      (default) Waiting for an IP...
      Machine "default" was started.
      Started machines may have new IP addresses.  You may need to re-run the `docker-machine env` command.

      $ eval $(docker-machine env)

      $ docker-machine ip
        192.168.99.100
</code></pre></div></div>

<p>コマンドは以下の形式でも利用可能です。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    - `docker-machine config`
    - `docker-machine env`
    - `docker-machine inspect`
    - `docker-machine ip`
    - `docker-machine kill`
    - `docker-machine provision`
    - `docker-machine regenerate-certs`
    - `docker-machine restart`
    - `docker-machine ssh`
    - `docker-machine start`
    - `docker-machine status`
    - `docker-machine stop`
    - `docker-machine upgrade`
    - `docker-machine url`
</code></pre></div></div>

<p><code class="highlighter-rouge">default</code> 以外のマシンでは、常に特定のマシン名をコマンドの引数として明示する必要があります。</p>

<h2 id="unset-environment-variables-in-the-current-shell">カレントシェルの環境変数クリア</h2>

<p>You might want to use the current shell to connect to a different Docker Engine.
This would be the case if, for example, you are
<a href="/docs.docker.jp.onthefly/docker-for-mac/docker-toolbox/">running Docker Desktop for Mac concurrent with Docker Toolbox</a>
and want to talk to two different Docker Engines.
In both scenarios, you have the option to switch the environment for the current
shell to talk to different Docker engines.</p>

<ol>
  <li>
    <p>Run <code class="highlighter-rouge">env|grep DOCKER</code> to check whether DOCKER environment variables are set.</p>

    <pre><code class="language-none">$ env | grep DOCKER
DOCKER_HOST=tcp://192.168.99.100:2376
DOCKER_MACHINE_NAME=default
DOCKER_TLS_VERIFY=1
DOCKER_CERT_PATH=/Users/&lt;your_username&gt;/.docker/machine/machines/default
</code></pre>

    <p>If it returns output (as shown in the example), you can unset the <code class="highlighter-rouge">DOCKER</code> environment variables.</p>
  </li>
  <li>
    <p>Use one of two methods to unset DOCKER environment variables in the current shell.</p>

    <ul>
      <li>
        <p>Run the <code class="highlighter-rouge">unset</code> command on the following <code class="highlighter-rouge">DOCKER</code> environment variables.</p>

        <pre><code class="language-none">unset DOCKER_TLS_VERIFY
unset DOCKER_CERT_PATH
unset DOCKER_MACHINE_NAME
unset DOCKER_HOST
</code></pre>
      </li>
      <li>
        <p>Alternatively, run a shortcut command <code class="highlighter-rouge">docker-machine env -u</code> to show the command you need to run to unset all DOCKER variables:</p>

        <pre><code class="language-none">$ docker-machine env -u
unset DOCKER_TLS_VERIFY
unset DOCKER_HOST
unset DOCKER_CERT_PATH
unset DOCKER_MACHINE_NAME
# Run this command to configure your shell:
# eval $(docker-machine env -u)
</code></pre>

        <p>Run <code class="highlighter-rouge">eval $(docker-machine env -u)</code> to unset all DOCKER variables in the current shell.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Now, after running either of the above commands, this command should return no output.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> $ env | grep DOCKER
</code></pre></div>    </div>

    <p>If you are running Docker Desktop for Mac, you can run Docker commands to talk
 to the Docker Engine installed with that app.</p>

    <p>Since <a href="/docs.docker.jp.onthefly/docker-for-windows/install/#what-to-know-before-you-install">Docker Desktop for Windows is incompatible with Toolbox</a>,
 this scenario isn’t applicable because Docker Desktop for Windows uses the Docker
 Engine and Docker Machine that come with it.</p>
  </li>
</ol>

<h2 id="start-local-machines-on-startup">起動時にローカル・マシンの自動起動</h2>

<p>To ensure that the Docker client is automatically configured at the start of
each shell session, you can embed <code class="highlighter-rouge">eval $(docker-machine env default)</code> in your
shell profiles, by adding it to the <code class="highlighter-rouge">~/.bash_profile</code> file or the equivalent
configuration file for your shell. However, this fails if a machine called
<code class="highlighter-rouge">default</code> is not running. You can configure your system to start the <code class="highlighter-rouge">default</code>
machine automatically. The following example shows how to do this in macOS.</p>

<p><code class="highlighter-rouge">~/Library/LaunchAgents</code> 以下に <code class="highlighter-rouge">com.docker.machine.default.plist</code> ファイルを作成します。
内容は次の通りです。</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span>
<span class="nt">&lt;plist</span> <span class="na">version=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>EnvironmentVariables<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;dict&gt;</span>
            <span class="nt">&lt;key&gt;</span>PATH<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;string&gt;</span>/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;/dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>Label<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;string&gt;</span>com.docker.machine.default<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;key&gt;</span>ProgramArguments<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;array&gt;</span>
            <span class="nt">&lt;string&gt;</span>/usr/local/bin/docker-machine<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;string&gt;</span>start<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;string&gt;</span>default<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;/array&gt;</span>
        <span class="nt">&lt;key&gt;</span>RunAtLoad<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;true/&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</code></pre></div></div>

<p>この中にある <code class="highlighter-rouge">LaunchAgent</code> の <code class="highlighter-rouge">default</code>  を書き換えれば、任意のマシン（群）を起動できます。</p>

<h2 id="where-to-go-next">次はどこへ行きますか</h2>

<ul>
  <li>Provision multiple Docker hosts <a href="/docs.docker.jp.onthefly/machine/get-started-cloud/">on your cloud provider</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/concepts/">Understand Machine concepts</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/drivers/">Docker Machine list of reference pages for all supported drivers</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/drivers/virtualbox/">Docker Machine ドライバー Oracle VirtualBox 用</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/drivers/hyper-v/">Docker Machine ドライバー Microsoft Hyper-V 用</a></li>
  <li><a href="/docs.docker.jp.onthefly/machine/reference/"><code class="highlighter-rouge">docker-machine</code> コマンドラインリファレンス</a></li>
</ul>

                            <!-- tags -->
                            
                            <span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span
                                style="vertical-align: 2px"><a
                                    href="https://docs.docker.com/search/?q=machine">machine</a>, <a
                                    href="https://docs.docker.com/search/?q=virtualbox">virtualbox</a></span>
                            
                            
                            <div id="ratings-div"
                                style="color:#b9c2cc; text-align: center; margin-top: 150px; visibility: hidden">
                                <div id="pd_rating_holder_8453675"></div>
                                <script type="text/javascript">
                                    PDRTJS_settings_8453675 = {
                                        "id": "8453675",
                                        "unique_id": "machine/get-started.md",
                                        "title": "Docker Machine をローカル VM で始めるには",
                                        "permalink": "https://github.com/docker/docker.github.io/blob/master/machine/get-started.md"
                                    };
                                    (function (d, c, j) {
                                        if (!document.getElementById(j)) {
                                            var pd = d.createElement(c),
                                                s;
                                            pd.id = j;
                                            pd.src = ('https:' == document.location.protocol) ? 'https://polldaddy.com/js/rating/rating.js' : 'http://i0.poll.fm/js/rating/rating.js';
                                            s = document.getElementsByTagName(c)[0];
                                            s.parentNode.insertBefore(pd, s);
                                        }
                                    }(document, 'script', 'pd-rating-js'));
                                </script>
                            </div>
                            
                        </section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
    <ul class="nav jsTOCHorizontal hidden-md hidden-lg">
    </ul>
    <div class="divider hidden-md hidden-lg"></div>
    <ul class="nav" id="jsTOCLeftNav">
    </ul>
</div>

                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul>
                                        
                                        <li style="visibility: hidden"><a href="https://github.com/matsuand/docs.docker.jp/edit/v19.03.local/machine/get-started.md"><i
                                                    class="fa fa-pencil-square-o" aria-hidden="true"></i> このページの編集</a></li>
                                        <li><a href="https://github.com/matsuand/docs.docker.jp/issues/new?body=ファイル: [machine/get-started.md](https://matsuand.github.io/docs.docker.jp.onthefly/machine/get-started/)"
                                                class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 文書変更のリクエスト</a></li>
                                        <!-- toggle mode -->
                                        <li>
                                            <div class="toggle-mode">
                                                <div class="icon">
                                                    <i class="fa fa-sun-o" aria-hidden="true"></i>
                                                </div>
                                                <div class="toggle-switch">
                                                    <label class="switch">
                                                        <input type="checkbox" id="switch-style">
                                                        <div class="slider round"></div>
                                                    </label>
                                                </div>
                                                <div class="icon">
                                                    <i class="fa fa-moon-o" aria-hidden="true"></i>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                
                                
                                
                                <div id="side-toc-title">本ページ内:</div>
                                
<ul id="my_toc" class="inline_toc">
  <li><a href="#prerequisite-information" class="nomunge">前提条件</a></li>
  <li><a href="#use-machine-to-run-docker-containers" class="nomunge">Use Machine to run Docker containers</a></li>
  <li><a href="#create-a-machine" class="nomunge">マシンの作成</a></li>
  <li><a href="#run-containers-and-experiment-with-machine-commands" class="nomunge">Machine コマンドを使ってコンテナを実行</a></li>
  <li><a href="#start-and-stop-machines" class="nomunge">マシンの起動と停止</a></li>
  <li><a href="#operate-on-machines-without-specifying-the-name" class="nomunge">マシンの名前を指定せずに操作するには</a></li>
  <li><a href="#unset-environment-variables-in-the-current-shell" class="nomunge">カレントシェルの環境変数クリア</a></li>
  <li><a href="#start-local-machines-on-startup" class="nomunge">起動時にローカル・マシンの自動起動</a></li>
  <li><a href="#where-to-go-next" class="nomunge">次はどこへ行きますか</a></li>
</ul>


                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">Why Docker</a></b></li>
                        <li><a href="https://www.docker.com/what-container">What is a Container</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/overview">Products</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Features</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">Container Runtime</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">Developer Tools</a></li>
                        <li><a href="https://www.docker.com/products/kubernetes">Kubernetes</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">Developers</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">Use Cases</a></li>
                        <li><a href="https://www.docker.com/play-with-docker">Play with Docker</a></li>
                        <li><a href="https://www.docker.com/docker-community">Community</a></li>
                        <li><a href="https://www.docker.com/open-source">Open Source</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker Captains</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank">Company</a></b></li>
                        <li><a href="https://www.docker.com/company">About Us</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank">Blog</a></li>
                        <li><a href="https://www.docker.com/customers">Customers</a></li>
                        <li><a href="https://www.docker.com/partners">Partners</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">Newsroom</a></li>
                        <li><a href="https://www.docker.com/careers">Careers</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact Us</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">Status</a></li>
                        <li><a href="https://www.docker.com/docker-security">Security</a></li>
                        <li><a href="https://www.docker.com/legal">Legal</a></li>
                        <li><a href="https://www.docker.com/company/contact">Contact</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2020 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/github.css">
    
    <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/menu.js"></script>
    <script src="/docs.docker.jp.onthefly/js/jquery.js"></script>
    <script src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
    <!-- Always include the archive.js, but it doesn't do much unless we are an archive -->
    <script>
        // Default to assuming this is an archive and hiding some stuff
        // See js/archive.js and js/docs.js for logic relating to this
        var isArchive = true;
        var dockerVersion = 'v19.03';
        // In archives, we need to know the page root and we get it from JEKYLL_ENV in the jekyll build command
        var jekyllEnv = 'development';
        // If unset (in non-archive branches), defaults to "development". In that case, reset it to empty
        if (jekyllEnv === 'development') {
            jekyllEnv = '';
        }
        var pageURL = jekyllEnv + '/machine/get-started/';
    </script>
    <script src="/docs.docker.jp.onthefly/js/archive.js"></script>
    <script src="/docs.docker.jp.onthefly/js/stickyfill.min.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/metadata.js"></script>
    <script src="/docs.docker.jp.onthefly/js/glossary.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script>
    <script defer src="/docs.docker.jp.onthefly/js/toc.js"></script>
    <script defer src="/js/search.js"></script>
</body>


</html>
