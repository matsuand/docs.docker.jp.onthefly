<!-- Page generated 2022-03-03 12:37:21 +0900-->
<!DOCTYPE html>
<html lang="ja"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Run your tests | Docker ドキュメント</title>
  <meta name="description" content="How to build and run your Tests" />
  <meta name="keywords" content="Java, build, test">
  <link rel="canonical" href="https://localhost:4000{{ site.baseurl }}/language/java/run-tests/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- hide elements that are only shown without JavaScript enabled -->
  <script>document.documentElement.classList.add('js')</script>
  <style>html.js .no-js { display: none !important; }</style><script defer src="/docs.docker.jp.onthefly/js/theme-switcher.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/jquery.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script><script defer src="/docs.docker.jp.onthefly/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Run your tests"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="matsuand.github.io"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="og:title" content="Run your tests" />
  <meta property="og:description" content="How to build and run your Tests" />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2022-03-03T12:37:21+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta property="og:locale" content="ja_JP" />
  <meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/language/java/run-tests/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <meta property="article:published_time" itemprop="datePublished" content="2022-03-03T12:37:21+09:00"/>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","headline":"Run your tests","description":"How to build and run your Tests","url":"https://docs.docker.com/language/java/run-tests/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/docs.docker.jp.onthefly/search/" method="get">
        <label for="st-search-input" class="sr-only">検索</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/docs.docker.jp.onthefly/" id="home">ホーム</a></li><li><a href="/docs.docker.jp.onthefly/get-started/overview/" id="guides">ガイド</a></li><li><a href="/docs.docker.jp.onthefly/desktop/" id="manuals">マニュアル</a></li><li><a href="/docs.docker.jp.onthefly/reference/" id="reference">リファレンス</a></li><li><a href="/docs.docker.jp.onthefly/samples/" id="samples">サンプル</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="現在ページのメニュートグル"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/docs.docker.jp.onthefly/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/docs.docker.jp.onthefly/get-started/overview/">ガイド</a></li><li><a href="/docs.docker.jp.onthefly/language/">各種言語別ガイド (New)</a></li><li><a href="/docs.docker.jp.onthefly/language/java/">Java</a></li><li><a href="/docs.docker.jp.onthefly/language/java/run-tests/">テストの実行</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Run your tests</h1><p><em class="reading-time">読む時間の目安: 7 分</em></p><ul class="pagination">
  <li><a href="/docs.docker.jp.onthefly/language/java/build-images/">イメージのビルド</a></li>
  <li><a href="/docs.docker.jp.onthefly/language/java/run-containers/">コンテナーとしてイメージ実行</a></li>
  <li><a href="/docs.docker.jp.onthefly/language/java/develop/">コンテナーの開発利用</a></li>
  <li class="active"><a href="/docs.docker.jp.onthefly/language/java/run-tests/">テストの実行</a></li>
  <li><a href="/docs.docker.jp.onthefly/language/java/configure-ci-cd/">CI/CD の設定</a></li>
  <li><a href="/docs.docker.jp.onthefly/language/java/deploy/">アプリのデプロイ</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>Work through the steps to build an image and run it as a containerized application in <a href="/docs.docker.jp.onthefly/language/java/develop/">Use your container for development</a>.</p>

<h2 id="introduction">Introduction</h2>

<p>Testing is an essential part of modern software development. Testing can mean a lot of things to different development teams. There are unit tests, integration tests and end-to-end testing. In this guide we take a look at running your unit tests in Docker.</p>

<h2 id="refactor-dockerfile-to-run-tests">Refactor Dockerfile to run tests</h2>

<p>The <strong>Spring Pet Clinic</strong> source code has already tests defined in the test directory <code class="highlighter-rouge">src/test/java/org/springframework/samples/petclinic</code>. You just need to update the JaCoCo version in your <code class="highlighter-rouge">pom.xml</code> to ensure your tests work with JDK v15 or higher with <code class="highlighter-rouge">&lt;jacoco.version&gt;0.8.6&lt;/jacoco.version&gt;</code>, so we can use the following Docker command to start the container and run tests:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--name</span> springboot-test java-docker ./mvnw <span class="nb">test</span>
<span class="c">...
</span><span class="go">[INFO] Results:
[INFO]
[WARNING] Tests run: 40, Failures: 0, Errors: 0, Skipped: 1
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:49 min
</span></code></pre></div></div>

<h3 id="multi-stage-dockerfile-for-testing">Multi-stage Dockerfile for testing</h3>

<p>Let’s take a look at pulling the testing commands into our Dockerfile. Below is a multi-stage Dockerfile that we will use to build our production image and our test image. Add the highlighted lines to your Dockerfile</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># syntax=docker/dockerfile:1</span>

<span class="k">FROM</span><span class="s"> openjdk:16-alpine3.13 as base</span>

<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="k">COPY</span><span class="s"> .mvn/ .mvn</span>
<span class="k">COPY</span><span class="s"> mvnw pom.xml ./</span>
<span class="k">RUN </span>./mvnw dependency:go-offline
<span class="k">COPY</span><span class="s"> src ./src</span>

<span class="k">FROM</span><span class="s"> base as test</span>
<span class="k">CMD</span><span class="s"> ["./mvnw", "test"]</span>

<span class="k">FROM</span><span class="s"> base as development</span>
<span class="k">CMD</span><span class="s"> ["./mvnw", "spring-boot:run", "-Dspring-boot.run.profiles=mysql", "-Dspring-boot.run.jvmArguments='-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000'"]</span>

<span class="k">FROM</span><span class="s"> base as build</span>
<span class="k">RUN </span>./mvnw package

<span class="k">FROM</span><span class="s"> openjdk:11-jre-slim as production</span>
<span class="k">EXPOSE</span><span class="s"> 8080</span>

<span class="k">COPY</span><span class="s"> --from=build /app/target/spring-petclinic-*.jar /spring-petclinic.jar</span>

<span class="k">CMD</span><span class="s"> ["java", "-Djava.security.egd=file:/dev/./urandom", "-jar", "/spring-petclinic.jar"]</span>
</code></pre></div></div>

<p>We first add a label to the <code class="highlighter-rouge">FROM openjdk:16-alpine3.13</code> statement. This allows us to refer to this build stage in other build stages. Next, we added a new build stage labeled <code class="highlighter-rouge">test</code>. We’ll use this stage for running our tests.</p>

<p>Now let’s rebuild our image and run our tests. We will run the <code class="highlighter-rouge">docker build</code> command as above, but this time we will add the <code class="highlighter-rouge">--target test</code> flag so that we specifically run the test build stage.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker build <span class="nt">-t</span> java-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
<span class="go">[+] Building 0.7s (6/6) FINISHED
</span><span class="c">...
</span><span class="gp"> =&gt;</span> <span class="o">=&gt;</span> writing image sha256:967ac80cb7799a5d12a4bdfc67c37b5a6533c6e418c903907d3e86b7d4ebf89a
<span class="gp"> =&gt;</span> <span class="o">=&gt;</span> naming to docker.io/library/java-docker
</code></pre></div></div>

<p>Now that our test image is built, we can run it as a container and see if our tests pass.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-it</span> <span class="nt">--rm</span> <span class="nt">--name</span> springboot-test java-docker
<span class="go">[INFO] Scanning for projects...
[INFO]
</span><span class="gp">[INFO] ------------&lt; org.springframework.samples:spring-petclinic &gt;</span><span class="nt">------------</span>
<span class="go">[INFO] Building petclinic 2.4.2
</span><span class="c">...
</span><span class="go">
[INFO] Results:
[INFO]
[WARNING] Tests run: 40, Failures: 0, Errors: 0, Skipped: 1
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  01:22 min
</span></code></pre></div></div>

<p>The build output is truncated, but you can see that the Maven test runner was successful and all our tests passed.</p>

<p>This is great. However, we’ll have to run two Docker commands to build and run our tests. We can improve this slightly by using a <code class="highlighter-rouge">RUN</code> statement instead of the <code class="highlighter-rouge">CMD</code> statement in the test stage. The <code class="highlighter-rouge">CMD</code> statement is not executed during the building of the image, but is executed when you run the image in a container. When using the <code class="highlighter-rouge">RUN</code> statement, our tests run when building the image, and stop the build when they fail.</p>

<p>Update your Dockerfile with the highlighted line below.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># syntax=docker/dockerfile:1</span>

<span class="k">FROM</span><span class="s"> openjdk:16-alpine3.13 as base</span>

<span class="k">WORKDIR</span><span class="s"> /app</span>

<span class="k">COPY</span><span class="s"> .mvn/ .mvn</span>
<span class="k">COPY</span><span class="s"> mvnw pom.xml ./</span>
<span class="k">RUN </span>./mvnw dependency:go-offline
<span class="k">COPY</span><span class="s"> src ./src</span>

<span class="k">FROM</span><span class="s"> base as test</span>
<span class="k">RUN </span><span class="o">[</span><span class="s2">"./mvnw"</span>, <span class="s2">"test"</span><span class="o">]</span>

<span class="k">FROM</span><span class="s"> base as development</span>
<span class="k">CMD</span><span class="s"> ["./mvnw", "spring-boot:run", "-Dspring-boot.run.profiles=mysql", "-Dspring-boot.run.jvmArguments='-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000'"]</span>

<span class="k">FROM</span><span class="s"> base as build</span>
<span class="k">RUN </span>./mvnw package

<span class="k">FROM</span><span class="s"> openjdk:11-jre-slim as production</span>
<span class="k">EXPOSE</span><span class="s"> 8080</span>

<span class="k">COPY</span><span class="s"> --from=build /app/target/spring-petclinic-*.jar /spring-petclinic.jar</span>

<span class="k">CMD</span><span class="s"> ["java", "-Djava.security.egd=file:/dev/./urandom", "-jar", "/spring-petclinic.jar"]</span>
</code></pre></div></div>

<p>Now, to run our tests, we just need to run the <code class="highlighter-rouge">docker build</code> command as above.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker build <span class="nt">-t</span> java-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
<span class="go">[+] Building 27.6s (11/12)
</span><span class="gp"> =&gt;</span> CACHED <span class="o">[</span>base 3/6] COPY .mvn/ .mvn
<span class="gp"> =&gt;</span> CACHED <span class="o">[</span>base 4/6] COPY mvnw pom.xml ./
<span class="gp"> =&gt;</span> CACHED <span class="o">[</span>base 5/6] RUN ./mvnw dependency:go-offline
<span class="gp"> =&gt;</span> CACHED <span class="o">[</span>base 6/6] COPY src ./src
<span class="gp"> =&gt;</span> <span class="o">[</span><span class="nb">test </span>1/1] RUN <span class="o">[</span><span class="s2">"./mvnw"</span>, <span class="s2">"test"</span><span class="o">]</span>
<span class="gp"> =&gt;</span> exporting to image
<span class="gp"> =&gt;</span> <span class="o">=&gt;</span> exporting layers
<span class="gp">=&gt;</span> <span class="o">=&gt;</span> writing image sha256:10cb585a7f289a04539e95d583ae97bcf8725959a6bd32c2f5632d0e7c1d16a0
<span class="gp">=&gt;</span> <span class="o">=&gt;</span> naming to docker.io/library/java-docker
</code></pre></div></div>

<p>The build output is truncated for simplicity, but you can see that our tests ran succesfully and passed. Let’s break one of the tests and observe the output when our tests fail.</p>

<p>Open the <code class="highlighter-rouge">src/test/java/org/springframework/samples/petclinic/model/ValidatorTests.java</code> file and change <strong>line 57</strong> to the following.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>55   ConstraintViolation&lt;Person&gt; violation <span class="o">=</span> constraintViolations.iterator<span class="o">()</span>.next<span class="o">()</span><span class="p">;</span>
56   assertThat<span class="o">(</span>violation.getPropertyPath<span class="o">()</span>.toString<span class="o">())</span>.isEqualTo<span class="o">(</span><span class="s2">"firstName"</span><span class="o">)</span><span class="p">;</span>
57   assertThat<span class="o">(</span>violation.getMessage<span class="o">())</span>.isEqualTo<span class="o">(</span><span class="s2">"must be empty"</span><span class="o">)</span><span class="p">;</span>
58 <span class="o">}</span>
</code></pre></div></div>

<p>Now, run the <code class="highlighter-rouge">docker build</code> command from above and observe that the build fails and the failing testing information is printed to the console.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker build <span class="nt">-t</span> java-docker <span class="nt">--target</span> <span class="nb">test</span> <span class="nb">.</span>
<span class="gp"> =&gt;</span> <span class="o">[</span>base 6/6] COPY src ./src
<span class="gp"> =&gt;</span> ERROR <span class="o">[</span><span class="nb">test </span>1/1] RUN <span class="o">[</span><span class="s2">"./mvnw"</span>, <span class="s2">"test"</span><span class="o">]</span>
<span class="c">...
</span><span class="go">------
executor failed running [./mvnw test]: exit code: 1
</span></code></pre></div></div>

<h3 id="multi-stage-dockerfile-for-development">Multi-stage Dockerfile for development</h3>

<p>The new version of the Dockerfile produces a final image which is ready for production, but as you can notice, you also have a dedicated step to produce a development container.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> base as development</span>
<span class="k">CMD</span><span class="s"> ["./mvnw", "spring-boot:run", "-Dspring-boot.run.profiles=mysql", "-Dspring-boot.run.jvmArguments='-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000'"]</span>
</code></pre></div></div>

<p>We can now update our <code class="highlighter-rouge">docker-compose.dev.yml</code> to use this specific target to build the <code class="highlighter-rouge">petclinic</code> service and remove the <code class="highlighter-rouge">command</code> definition as follows:</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code>services:
 petclinic:
   build:
     context: .
     target: development
   ports:
     - 8000:8000
     - 8080:8080
   environment:
     - SERVER_PORT=8080
     - MYSQL_URL=jdbc:mysql://mysqlserver/petclinic
   volumes:
     - ./:/app
</code></pre></div></div>

<p>Now, let’s run the Compose application. You should now see that application behaves as previously and you can still debug it.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker-compose <span class="nt">-f</span> docker-compose.dev.yml up <span class="nt">--build</span>
</code></pre></div></div>

<h2 id="next-steps">Next steps</h2>

<p>In this module, we took a look at running tests as part of our Docker image build process.</p>

<p>In the next module, we’ll take a look at how to set up a CI/CD pipeline using GitHub Actions. See:</p>

<p><a href="/docs.docker.jp.onthefly/language/java/configure-ci-cd/" class="button primary-btn">Configure CI/CD</a></p>

<h2 id="feedback">Feedback</h2>

<p>Help us improve this topic by providing your feedback. Let us know what you think by creating an issue in the <a href="https://github.com/docker/docker.github.io/issues/new?title=[Java%20docs%20feedback]" target="_blank" rel="noopener" class="_">Docker Docs</a> GitHub repository. Alternatively, <a href="https://github.com/docker/docker.github.io/pulls" target="_blank" rel="noopener" class="_">create a PR</a> to suggest updates.</p>

<p><br /></p>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/docs.docker.jp.onthefly/search/?q=Java">Java</a>, <a href="/docs.docker.jp.onthefly/search/?q=build">build</a>, <a href="/docs.docker.jp.onthefly/search/?q=test">test</a></span><div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/edit/master/src/language/java/run-tests.ch"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> 本ページの編集</a></li><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [language/java/run-tests.ch](https://matsuand.github.io/docs.docker.jp.onthefly/language/java/run-tests/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 変更リクエスト</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">本ページ内:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#prerequisites" class="nomunge">Prerequisites</a></li>
  <li><a href="#introduction" class="nomunge">Introduction</a></li>
  <li><a href="#refactor-dockerfile-to-run-tests" class="nomunge">Refactor Dockerfile to run tests</a>
    <ul>
      <li><a href="#multi-stage-dockerfile-for-testing" class="nomunge">Multi-stage Dockerfile for testing</a></li>
      <li><a href="#multi-stage-dockerfile-for-development" class="nomunge">Multi-stage Dockerfile for development</a></li>
    </ul>
  </li>
  <li><a href="#next-steps" class="nomunge">Next steps</a></li>
  <li><a href="#feedback" class="nomunge">Feedback</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products" target="_blank" rel="noopener">製品ラインアップ</a></b></li>
                        <li><a href="https://www.docker.com/products/personal" target="_blank" rel="noopener">Docker Personal</a></li>
                        <li><a href="https://www.docker.com/products/pro" target="_blank" rel="noopener">Docker Pro</a></li>
                        <li><a href="https://www.docker.com/products/team" target="_blank" rel="noopener">Docker Team</a></li>
                        <li><a href="https://www.docker.com/products/business" target="_blank" rel="noopener">Docker Business</a></li>
                        <li><a href="https://www.docker.com/products" target="_blank" rel="noopener">サブスクリプション比較</a></li>
                        <li><b><a href="https://www.docker.com/" target="_blank" rel="noopener">機能</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub" target="_blank" rel="noopener">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/products/secure-software-supply-chain" target="_blank" rel="noopener">セキュアなソフトウェアサプライチェーン</a></li>
                        <li><a href="https://www.docker.com/products/container-runtime" target="_blank" rel="noopener">コンテナーランタイム</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools" target="_blank" rel="noopener">開発ツール</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">信頼できるコンテント</a></li>
                        <li><a href="https://www.docker.com/roadmap" target="_blank" rel="noopener">Docker 製品ロードマップ</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">開発者</a></b></li>
                        <li><a href="https://www.docker.com/use-cases" target="_blank" rel="noopener">利用例</a></li>
                        <li><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">はじめよう</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">ブログ</a></li>
                        <li><a href="https://www.docker.com/docker-community" target="_blank" rel="noopener">コミュニティー</a></li>
                        <li><a href="https://www.docker.com/open-source" target="_blank" rel="noopener">オープンソース</a></li>
                        <li><a href="https://www.docker.com/community/get-involved/developer-preview" target="_blank" rel="noopener">プレビュープログラム</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">価格体系</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq" target="_blank" rel="noopener">FAQ</a></li>
                        <li><a href="https://www.docker.com/partners/programs" target="_blank" rel="noopener">Docker 認定公開者向けプログラム</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">パートナー</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">会社概要</a></b></li>
                        <li><a href="https://www.docker.com/what-container" target="_blank" rel="noopener">コンテナーって何？</a></li>
                        <li><a href="https://www.docker.com/why-docker" target="_blank" rel="noopener">なぜ Docker？</a></li>
                        <li><a href="https://www.docker.com/events" target="_blank" rel="noopener">仮想イベント</a></li>
                        <li><a href="https://www.docker.com/swag" target="_blank" rel="noopener">Swag ストア
                        </a></li>
                        <li><a href="https://www.docker.com/company/newsroom" target="_blank" rel="noopener">ニュースルーム</a></li>
                        <li><a href="https://www.docker.com/careers" target="_blank" rel="noopener">採用情報</a></li>
                        <li><a href="https://www.docker.com/company/contact" target="_blank" rel="noopener">連絡先</a></li>
                        <li><a href="https://www.docker.com/customers" target="_blank" rel="noopener">顧客</a></li>
                        <li><a href="https://www.docker.com/newsletter-subscription" target="_blank" rel="noopener">ニュースレター</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="https://www.docker.com/legal/docker-terms-service" target="_blank" rel="noopener">サービス契約</a></li>
                        <li><a href="https://status.docker.com/" target="_blank" rel="noopener">ステータス</a></li>
                        <li><a href="https://www.docker.com/legal" target="_blank" rel="noopener">法的情報</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="https://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="https://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/language/java/run-tests/";</script></body>
</html>
