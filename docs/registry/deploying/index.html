<!DOCTYPE html>
<!-- Page generated 2022-04-25 09:39:05 +0900-->
<html lang="ja"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Registry サーバーのデプロイ | Docker ドキュメント</title>
  <meta name="description" content="Explains how to deploy a registry" />
  <meta name="keywords" content="registry, on-prem, images, tags, repository, distribution, deployment">
  <link rel="canonical" href="https://localhost:4000{{ site.baseurl }}/registry/deploying/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- hide elements that are only shown without JavaScript enabled -->
  <script>document.documentElement.classList.add('js')</script>
  <style>html.js .no-js { display: none !important; }</style><script defer src="/docs.docker.jp.onthefly/js/theme-switcher.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/jquery.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script><script defer src="/docs.docker.jp.onthefly/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="Registry サーバーのデプロイ"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="" />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="matsuand.github.io"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="og:title" content="Registry サーバーのデプロイ" />
  <meta property="og:description" content="Explains how to deploy a registry" />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2022-04-25T09:39:05+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta property="og:locale" content="ja_JP" />
  <meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/registry/deploying/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <meta property="article:published_time" itemprop="datePublished" content="2022-04-25T09:39:05+09:00"/>
  <script type="application/ld+json">{"@context":"https://schema.org","@type":"WebPage","headline":"Registry サーバーのデプロイ","description":"Explains how to deploy a registry","url":"https://docs.docker.com/registry/deploying/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/docs.docker.jp.onthefly/search/" method="get">
        <label for="st-search-input" class="sr-only">検索</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/docs.docker.jp.onthefly/" id="home">ホーム</a></li><li><a href="/docs.docker.jp.onthefly/get-started/overview/" id="guides">ガイド</a></li><li><a href="/docs.docker.jp.onthefly/desktop/" id="manuals">マニュアル</a></li><li><a href="/docs.docker.jp.onthefly/reference/" id="reference">リファレンス</a></li><li><a href="/docs.docker.jp.onthefly/samples/" id="samples">サンプル</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="現在ページのメニュートグル"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/docs.docker.jp.onthefly/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/docs.docker.jp.onthefly/desktop/">マニュアル</a></li><li><a>オープンソースプロジェクト</a></li><li><a href="/docs.docker.jp.onthefly/registry/">Docker Registry</a></li><li><a href="/docs.docker.jp.onthefly/registry/deploying/">Registry サーバーのデプロイ</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>Registry サーバーのデプロイ</h1><p><em class="reading-time">読む時間の目安: 16 分</em></p><!-- This text will be included in the Docker Registry docs -->

<blockquote class="important">

  <p>このページでは、オープンソースである Docker Registry を使って、独自にレジストリを提供する情報を示しています。
Docker Hub はホスト提供込みの Registry であり、さまざまな機能を追加することができます。
たとえばチーム、組織、ウェブフック、自動ビルドなどです。
詳しくは <a href="/docker-hub/">Docker Hub</a> を参照してください。</p>
</blockquote>

<p>Registry をデプロイするには、まずホスト上に Docker をインストールする必要があります。
Registry は<code class="highlighter-rouge">registry</code>イメージのインスタンスの 1 つであり、Docker の内部において稼動します。</p>

<p>このトピックでは Registry のデプロイと設定方法に関する基本的な情報を示します。
設定オプションの全一覧については <a href="/docs.docker.jp.onthefly/registry/configuration/">設定リファレンス</a> を参照してください。</p>

<p>外部から隔離された（air-gapped）データセンターを利用している場合は、<a href="#considerations-for-air-gapped-registries">隔離されたデータセンターでの配慮</a> を参照してください。</p>

<h2 id="run-a-local-registry">ローカル Registry の起動</h2>

<p>以下のようなコマンドを実行して Registry コンテナーを起動します。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="nt">-p</span> 5000:5000 <span class="nt">--restart</span><span class="o">=</span>always <span class="nt">--name</span> registry registry:2
</code></pre></div></div>

<p>Registry がこうして利用できるようになります。</p>

<blockquote>
  <p><strong>警告</strong></p>

  <p>ここに例としていくつか示す Registry の設定は、テスト環境向けにしか考慮していません。
本番環境向けの Registry であれば、TLS によって保護することが必要であり、理想的にはアクセス制御システムの利用が求められます。
ここでの説明を読み終えたら、本番環境向け Registry をデプロイするための <a href="/docs.docker.jp.onthefly/registry/configuration/">設定ガイド</a> に進んでください。</p>
</blockquote>

<h2 id="copy-an-image-from-docker-hub-to-your-registry">Docker Hub から Registry へのイメージコピー</h2>

<p>イメージは Docker Hub からプルして、それを Registry にプッシュすることができます。
以下の例では Docker Hub から<code class="highlighter-rouge">ubuntu:16.04</code>イメージをプルして、そこに<code class="highlighter-rouge">my-ubuntu</code>というタグをつけ直します。
そしてローカルな Registry にプッシュします。
その後にローカル上から<code class="highlighter-rouge">ubuntu:16.04</code>と<code class="highlighter-rouge">my-ubuntu</code>のイメージを削除した上で、ローカル Registry から<code class="highlighter-rouge">my-ubuntu</code>イメージをプルします。</p>

<ol>
  <li>
    <p>Docker Hub から<code class="highlighter-rouge">ubuntu:16.04</code>イメージをプルします。</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker pull ubuntu:16.04
</code></pre></div>    </div>
  </li>
  <li>
    <p>イメージに<code class="highlighter-rouge">localhost:5000/my-ubuntu</code>というタグをつけます。
このようにすることで、既存のイメージに追加のタグがつけられます。
タグ名のはじめにあるのがホスト名とポート番号です。
Docker はプッシュ処理時に、その名前部分を Registry の場所として解釈します。</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker tag ubuntu:16.04 localhost:5000/my-ubuntu
</code></pre></div>    </div>
  </li>
  <li>
    <p><code class="highlighter-rouge">localhost:5000</code>として起動しているローカルの Registry にイメージをプッシュします。</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker push localhost:5000/my-ubuntu
</code></pre></div>    </div>
  </li>
  <li>
    <p>ローカルにキャッシュされている<code class="highlighter-rouge">ubuntu:16.04</code>と<code class="highlighter-rouge">localhost:5000/my-ubuntu</code>イメージを削除します。
この後には、ローカル Registry からイメージをプルしてみることができます。
Registry からは<code class="highlighter-rouge">localhost:5000/my-ubuntu</code>イメージは削除されません。</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker image remove ubuntu:16.04
<span class="gp">$</span> docker image remove localhost:5000/my-ubuntu
</code></pre></div>    </div>
  </li>
  <li>
    <p>ローカルの Registry から<code class="highlighter-rouge">localhost:5000/my-ubuntu</code>イメージをプルします。</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker pull localhost:5000/my-ubuntu
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="stop-a-local-registry">ローカル Registry の停止</h2>

<p>Registry を停止するには、コンテナーの場合と同じように<code class="highlighter-rouge">docker container stop</code>コマンドを実行します。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker container stop registry
</code></pre></div></div>

<p>コンテナーを削除するには<code class="highlighter-rouge">docker container rm</code>を実行します。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker container stop registry <span class="o">&amp;&amp;</span> docker container rm <span class="nt">-v</span> registry
</code></pre></div></div>

<h2 id="basic-configuration">基本的な設定</h2>

<p>コンテナーを設定するには、<code class="highlighter-rouge">docker run</code>コマンドの実行時に、追加のまたは修正のオプションを指定します。</p>

<p>以下の節では、Registry 設定に関する基本的なガイドラインを示します。
詳しくは <a href="/docs.docker.jp.onthefly/registry/configuration/">Registry 設定リファレンス</a> を参照してください。</p>

<h3 id="start-the-registry-automatically">Registry の自動起動</h3>

<p>常用するインフラストラクチャーの一部として Registry を利用したい場合には、Docker の再起動時あるいは Registry 終了時に、Registry を自動的に再起動することが必要になります。
以下の例では<code class="highlighter-rouge">--restart always</code>フラグを用いて、Registry に対して再起動ポリシーを設定します。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="se">\</span>
  <span class="nt">-p</span> 5000:5000 <span class="se">\</span>
  <span class="nt">--restart</span><span class="o">=</span>always <span class="se">\</span>
  <span class="nt">--name</span> registry <span class="se">\</span>
  registry:2
</code></pre></div></div>

<h3 id="customize-the-published-port">公開ポートの変更</h3>

<p>すでにポート 5000 を利用している場合、またはローカル Registry を各作業向けに切り分けて複数起動したい場合は、Registry のポート設定を変更します。
以下の例では Registry をポート 5001 で起動し、同時にその名称を<code class="highlighter-rouge">registry-test</code>とします。
ここで<code class="highlighter-rouge">-p</code>フラグの値の 1 つめはホストのポートであり、2 つめはコンテナー内のポートです。
コンテナーの内部にて Registry は、ポート<code class="highlighter-rouge">5000</code>を利用するのがデフォルトです。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="se">\</span>
  <span class="nt">-p</span> 5001:5000 <span class="se">\</span>
  <span class="nt">--name</span> registry-test <span class="se">\</span>
  registry:2
</code></pre></div></div>

<p>コンテナーの内部にて Registry が待ち受けるポートは、環境変数<code class="highlighter-rouge">REGISTRY_HTTP_ADDR</code>を使って変更することができます。
以下のコマンドは、コンテナーの内部にて Registry はポート 5001 を待ち受けるようになります。</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_ADDR</span><span class="o">=</span>0.0.0.0:5001 <span class="se">\</span>
  <span class="nt">-p</span> 5001:5001 <span class="se">\</span>
  <span class="nt">--name</span> registry-test <span class="se">\</span>
  registry:2
</code></pre></div></div>

<h2 id="storage-customization">ストレージの設定</h2>

<h3 id="customize-the-storage-location">ストレージ保存場所の変更</h3>

<p>By default, your registry data is persisted as a <a href="/docs.docker.jp.onthefly/storage/volumes/">docker volume</a>
on the host filesystem. If you want to store your registry contents at a specific
location on your host filesystem, such as if you have an SSD or SAN mounted into
a particular directory, you might decide to use a bind mount instead. A bind mount
is more dependent on the filesystem layout of the Docker host, but more performant
in many situations. The following example bind-mounts the host directory
<code class="highlighter-rouge">/mnt/registry</code> into the registry container at <code class="highlighter-rouge">/var/lib/registry/</code>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="se">\</span>
  <span class="nt">-p</span> 5000:5000 <span class="se">\</span>
  <span class="nt">--restart</span><span class="o">=</span>always <span class="se">\</span>
  <span class="nt">--name</span> registry <span class="se">\</span>
  <span class="nt">-v</span> /mnt/registry:/var/lib/registry <span class="se">\</span>
  registry:2
</code></pre></div></div>

<h3 id="customize-the-storage-back-end">Customize the storage back-end</h3>

<p>By default, the registry stores its data on the local filesystem, whether you
use a bind mount or a volume. You can store the registry data in an Amazon S3
bucket, Google Cloud Platform, or on another storage back-end by using
<a href="/docs.docker.jp.onthefly/registry/storage-drivers/">storage drivers</a>. For more information, see
<a href="/docs.docker.jp.onthefly/registry/configuration/#storage">storage configuration options</a>.</p>

<h2 id="run-an-externally-accessible-registry">Run an externally-accessible registry</h2>

<p>Running a registry only accessible on <code class="highlighter-rouge">localhost</code> has limited usefulness. In
order to make your registry accessible to external hosts, you must first secure
it using TLS.</p>

<p>This example is extended in <a href="#run-the-registry-as-a-service">Run the registry as a
service</a> below.</p>

<h3 id="get-a-certificate">Get a certificate</h3>

<p>These examples assume the following:</p>

<ul>
  <li>Your registry URL is <code class="highlighter-rouge">https://myregistry.domain.com/</code>.</li>
  <li>Your DNS, routing, and firewall settings allow access to the registry’s host
on port 443.</li>
  <li>You have already obtained a certificate from a certificate authority (CA).</li>
</ul>

<p>If you have been issued an <em>intermediate</em> certificate instead, see
<a href="#use-an-intermediate-certificate">use an intermediate certificate</a>.</p>

<ol>
  <li>
    <p>Create a <code class="highlighter-rouge">certs</code> directory.</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> mkdir <span class="nt">-p</span> certs
</code></pre></div>    </div>

    <p>Copy the <code class="highlighter-rouge">.crt</code> and <code class="highlighter-rouge">.key</code> files from the CA into the <code class="highlighter-rouge">certs</code> directory.
The following steps assume that the files are named <code class="highlighter-rouge">domain.crt</code> and
<code class="highlighter-rouge">domain.key</code>.</p>
  </li>
  <li>
    <p>Stop the registry if it is currently running.</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker container stop registry
</code></pre></div>    </div>
  </li>
  <li>
    <p>Restart the registry, directing it to use the TLS certificate. This command
bind-mounts the <code class="highlighter-rouge">certs/</code> directory into the container at <code class="highlighter-rouge">/certs/</code>, and sets
environment variables that tell the container where to find the <code class="highlighter-rouge">domain.crt</code>
and <code class="highlighter-rouge">domain.key</code> file. The registry runs on port 443, the default HTTPS port.</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="se">\</span>
  <span class="nt">--restart</span><span class="o">=</span>always <span class="se">\</span>
  <span class="nt">--name</span> registry <span class="se">\</span>
  <span class="nt">-v</span> <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">"</span>/certs:/certs <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_ADDR</span><span class="o">=</span>0.0.0.0:443 <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_TLS_CERTIFICATE</span><span class="o">=</span>/certs/domain.crt <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_TLS_KEY</span><span class="o">=</span>/certs/domain.key <span class="se">\</span>
  <span class="nt">-p</span> 443:443 <span class="se">\</span>
  registry:2
</code></pre></div>    </div>
  </li>
  <li>
    <p>Docker clients can now pull from and push to your registry using its
external address. The following commands demonstrate this:</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker pull ubuntu:16.04
<span class="gp">$</span> docker tag ubuntu:16.04 myregistry.domain.com/my-ubuntu
<span class="gp">$</span> docker push myregistry.domain.com/my-ubuntu
<span class="gp">$</span> docker pull myregistry.domain.com/my-ubuntu
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="use-an-intermediate-certificate">Use an intermediate certificate</h4>

<p>A certificate issuer may supply you with an <em>intermediate</em> certificate. In this
case, you must concatenate your certificate with the intermediate certificate to
form a <em>certificate bundle</em>. You can do this using the <code class="highlighter-rouge">cat</code> command:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">cat domain.crt intermediate-certificates.pem &gt;</span> certs/domain.crt
</code></pre></div></div>

<p>You can use the certificate bundle just as you use the <code class="highlighter-rouge">domain.crt</code> file in
the previous example.</p>

<h3 id="support-for-lets-encrypt">Support for Let’s Encrypt</h3>

<p>The registry supports using Let’s Encrypt to automatically obtain a
browser-trusted certificate. For more information on Let’s Encrypt, see
<a href="https://letsencrypt.org/how-it-works/">https://letsencrypt.org/how-it-works/</a>
and the relevant section of the
<a href="/docs.docker.jp.onthefly/registry/configuration/#letsencrypt">registry configuration</a>.</p>

<h3 id="use-an-insecure-registry-testing-only">Use an insecure registry (testing only)</h3>

<p>It is possible to use a self-signed certificate, or to use our registry
insecurely. Unless you have set up verification for your self-signed
certificate, this is for testing only. See <a href="/docs.docker.jp.onthefly/registry/insecure/">run an insecure registry</a>.</p>

<h2 id="run-the-registry-as-a-service">Run the registry as a service</h2>

<p><a href="/docs.docker.jp.onthefly/engine/swarm/services/">Swarm services</a> provide several advantages over
standalone containers. They use a declarative model, which means that you define
the desired state and Docker works to keep your service in that state. Services
provide automatic load balancing scaling, and the ability to control the
distribution of your service, among other advantages. Services also allow you to
store sensitive data such as TLS certificates in
<a href="/docs.docker.jp.onthefly/engine/swarm/secrets/">secrets</a>.</p>

<p>The storage back-end you use determines whether you use a fully scaled service
or a service with either only a single node or a node constraint.</p>

<ul>
  <li>
    <p>If you use a distributed storage driver, such as Amazon S3, you can use a
fully replicated service. Each worker can write to the storage back-end
without causing write conflicts.</p>
  </li>
  <li>
    <p>If you use a local bind mount or volume, each worker node writes to its
own storage location, which means that each registry contains a different
data set. You can solve this problem by using a single-replica service and a
node constraint to ensure that only a single worker is writing to the bind
mount.</p>
  </li>
</ul>

<p>The following example starts a registry as a single-replica service, which is
accessible on any swarm node on port 80. It assumes you are using the same
TLS certificates as in the previous examples.</p>

<p>First, save the TLS certificate and key as secrets:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker secret create domain.crt certs/domain.crt
<span class="go">
</span><span class="gp">$</span> docker secret create domain.key certs/domain.key
</code></pre></div></div>

<p>Next, add a label to the node where you want to run the registry.
To get the node’s name, use <code class="highlighter-rouge">docker node ls</code>. Substitute your node’s name for
<code class="highlighter-rouge">node1</code> below.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker node update <span class="nt">--label-add</span> <span class="nv">registry</span><span class="o">=</span><span class="nb">true </span>node1
</code></pre></div></div>

<p>Next, create the service, granting it access to the two secrets and constraining
it to only run on nodes with the label <code class="highlighter-rouge">registry=true</code>. Besides the constraint,
you are also specifying that only a single replica should run at a time. The
example bind-mounts <code class="highlighter-rouge">/mnt/registry</code> on the swarm node to <code class="highlighter-rouge">/var/lib/registry/</code>
within the container. Bind mounts rely on the pre-existing source directory,
so be sure <code class="highlighter-rouge">/mnt/registry</code> exists on <code class="highlighter-rouge">node1</code>. You might need to create it before
running the following <code class="highlighter-rouge">docker service create</code> command.</p>

<p>By default, secrets are mounted into a service at <code class="highlighter-rouge">/run/secrets/&lt;secret-name&gt;</code>.</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker service create <span class="se">\</span>
  <span class="nt">--name</span> registry <span class="se">\</span>
  <span class="nt">--secret</span> domain.crt <span class="se">\</span>
  <span class="nt">--secret</span> domain.key <span class="se">\</span>
  <span class="nt">--constraint</span> <span class="s1">'node.labels.registry==true'</span> <span class="se">\</span>
  <span class="nt">--mount</span> <span class="nb">type</span><span class="o">=</span><span class="nb">bind</span>,src<span class="o">=</span>/mnt/registry,dst<span class="o">=</span>/var/lib/registry <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_ADDR</span><span class="o">=</span>0.0.0.0:443 <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_TLS_CERTIFICATE</span><span class="o">=</span>/run/secrets/domain.crt <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_TLS_KEY</span><span class="o">=</span>/run/secrets/domain.key <span class="se">\</span>
  <span class="nt">--publish</span> <span class="nv">published</span><span class="o">=</span>443,target<span class="o">=</span>443 <span class="se">\</span>
  <span class="nt">--replicas</span> 1 <span class="se">\</span>
  registry:2
</code></pre></div></div>

<p>You can access the service on port 443 of any swarm node. Docker sends the
requests to the node which is running the service.</p>

<h2 id="load-balancing-considerations">Load balancing considerations</h2>

<p>One may want to use a load balancer to distribute load, terminate TLS or
provide high availability. While a full load balancing setup is outside the
scope of this document, there are a few considerations that can make the process
smoother.</p>

<p>The most important aspect is that a load balanced cluster of registries must
share the same resources. For the current version of the registry, this means
the following must be the same:</p>

<ul>
  <li>Storage Driver</li>
  <li>HTTP Secret</li>
  <li>Redis Cache (if configured)</li>
</ul>

<p>Differences in any of the above cause problems serving requests.
As an example, if you’re using the filesystem driver, all registry instances
must have access to the same filesystem root, on
the same machine. For other drivers, such as S3 or Azure, they should be
accessing the same resource and share an identical configuration.
The <em>HTTP Secret</em> coordinates uploads, so also must be the same across
instances. Configuring different redis instances works (at the time
of writing), but is not optimal if the instances are not shared, because
more requests are directed to the backend.</p>

<h3 id="importantrequired-http-headers">Important/Required HTTP-Headers</h3>

<p>Getting the headers correct is very important. For all responses to any
request under the “/v2/” url space, the <code class="highlighter-rouge">Docker-Distribution-API-Version</code>
header should be set to the value “registry/2.0”, even for a 4xx response.
This header allows the docker engine to quickly resolve authentication realms
and fallback to version 1 registries, if necessary. Confirming this is setup
correctly can help avoid problems with fallback.</p>

<p>In the same train of thought, you must make sure you are properly sending the
<code class="highlighter-rouge">X-Forwarded-Proto</code>, <code class="highlighter-rouge">X-Forwarded-For</code>, and <code class="highlighter-rouge">Host</code> headers to their “client-side”
values. Failure to do so usually makes the registry issue redirects to internal
hostnames or downgrading from https to http.</p>

<p>A properly secured registry should return 401 when the “/v2/” endpoint is hit
without credentials. The response should include a <code class="highlighter-rouge">WWW-Authenticate</code>
challenge, providing guidance on how to authenticate, such as with basic auth
or a token service. If the load balancer has health checks, it is recommended
to configure it to consider a 401 response as healthy and any other as down.
This secures your registry by ensuring that configuration problems with
authentication don’t accidentally expose an unprotected registry. If you’re
using a less sophisticated load balancer, such as Amazon’s Elastic Load
Balancer, that doesn’t allow one to change the healthy response code, health
checks can be directed at “/”, which always returns a <code class="highlighter-rouge">200 OK</code> response.</p>

<h2 id="restricting-access">Restricting access</h2>

<p>Except for registries running on secure local networks, registries should always
implement access restrictions.</p>

<h3 id="native-basic-auth">Native basic auth</h3>

<p>The simplest way to achieve access restriction is through basic authentication
(this is very similar to other web servers’ basic authentication mechanism).
This example uses native basic authentication using <code class="highlighter-rouge">htpasswd</code> to store the
secrets.</p>

<blockquote class="warning">
  <p><strong>Warning</strong>:
You <strong>cannot</strong> use authentication with authentication schemes that send
credentials as clear text. You must
<a href="/docs.docker.jp.onthefly/registry/deploying/#run-an-externally-accessible-registry">configure TLS first</a> for
authentication to work.</p>
</blockquote>

<ol>
  <li>
    <p>Create a password file with one entry for the user <code class="highlighter-rouge">testuser</code>, with password
<code class="highlighter-rouge">testpassword</code>:</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> mkdir auth
<span class="gp">$</span> docker run <span class="se">\</span>
  <span class="nt">--entrypoint</span> htpasswd <span class="se">\</span>
  httpd:2 <span class="nt">-Bbn</span> testuser testpassword <span class="o">&gt;</span> auth/htpasswd
</code></pre></div>    </div>

    <p>On Windows, make sure the output file is correctly encoded:</p>

    <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run --rm --entrypoint htpasswd httpd:2 -Bbn testuser testpassword | <span class="nb">Set-Content</span> -Encoding ASCII auth/htpasswd
</code></pre></div>    </div>
  </li>
  <li>
    <p>Stop the registry.</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker container stop registry
</code></pre></div>    </div>
  </li>
  <li>
    <p>Start the registry with basic authentication.</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker run <span class="nt">-d</span> <span class="se">\</span>
  <span class="nt">-p</span> 5000:5000 <span class="se">\</span>
  <span class="nt">--restart</span><span class="o">=</span>always <span class="se">\</span>
  <span class="nt">--name</span> registry <span class="se">\</span>
  <span class="nt">-v</span> <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">"</span>/auth:/auth <span class="se">\</span>
  <span class="nt">-e</span> <span class="s2">"REGISTRY_AUTH=htpasswd"</span> <span class="se">\</span>
  <span class="nt">-e</span> <span class="s2">"REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm"</span> <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_AUTH_HTPASSWD_PATH</span><span class="o">=</span>/auth/htpasswd <span class="se">\</span>
  <span class="nt">-v</span> <span class="s2">"</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">"</span>/certs:/certs <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_TLS_CERTIFICATE</span><span class="o">=</span>/certs/domain.crt <span class="se">\</span>
  <span class="nt">-e</span> <span class="nv">REGISTRY_HTTP_TLS_KEY</span><span class="o">=</span>/certs/domain.key <span class="se">\</span>
  registry:2
</code></pre></div>    </div>
  </li>
  <li>
    <p>Try to pull an image from the registry, or push an image to the registry.
These commands fail.</p>
  </li>
  <li>
    <p>Log in to the registry.</p>

    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker login myregistrydomain.com:5000
</code></pre></div>    </div>

    <p>Provide the username and password from the first step.</p>

    <p>Test that you can now pull an image from the registry or push an image to
the registry.</p>
  </li>
</ol>

<blockquote>
  <p><strong>X509 errors</strong>: X509 errors usually indicate that you are attempting to use
a self-signed certificate without configuring the Docker daemon correctly.
See <a href="/docs.docker.jp.onthefly/registry/insecure/">run an insecure registry</a>.</p>
</blockquote>

<h3 id="more-advanced-authentication">More advanced authentication</h3>

<p>You may want to leverage more advanced basic auth implementations by using a
proxy in front of the registry. See the <a href="/docs.docker.jp.onthefly/registry/recipes/">recipes list</a>.</p>

<p>The registry also supports delegated authentication which redirects users to a
specific trusted token server. This approach is more complicated to set up, and
only makes sense if you need to fully configure ACLs and need more control over
the registry’s integration into your global authorization and authentication
systems. Refer to the following <a href="/docs.docker.jp.onthefly/registry/spec/auth/token/">background information</a> and
<a href="/docs.docker.jp.onthefly/registry/configuration/#auth">configuration information here</a>.</p>

<p>This approach requires you to implement your own authentication system or
leverage a third-party implementation.</p>

<h2 id="deploy-your-registry-using-a-compose-file">Deploy your registry using a Compose file</h2>

<p>If your registry invocation is advanced, it may be easier to use a Docker
compose file to deploy it, rather than relying on a specific <code class="highlighter-rouge">docker run</code>
invocation. Use the following example <code class="highlighter-rouge">docker-compose.yml</code> as a template.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">registry</span><span class="pi">:</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">registry:2</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">5000:5000</span>
  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">REGISTRY_HTTP_TLS_CERTIFICATE</span><span class="pi">:</span> <span class="s">/certs/domain.crt</span>
    <span class="na">REGISTRY_HTTP_TLS_KEY</span><span class="pi">:</span> <span class="s">/certs/domain.key</span>
    <span class="na">REGISTRY_AUTH</span><span class="pi">:</span> <span class="s">htpasswd</span>
    <span class="na">REGISTRY_AUTH_HTPASSWD_PATH</span><span class="pi">:</span> <span class="s">/auth/htpasswd</span>
    <span class="na">REGISTRY_AUTH_HTPASSWD_REALM</span><span class="pi">:</span> <span class="s">Registry Realm</span>
  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/path/data:/var/lib/registry</span>
    <span class="pi">-</span> <span class="s">/path/certs:/certs</span>
    <span class="pi">-</span> <span class="s">/path/auth:/auth</span>
</code></pre></div></div>

<p class="warning">Replace <code class="highlighter-rouge">/path</code> with the directory which contains the <code class="highlighter-rouge">certs/</code> and <code class="highlighter-rouge">auth/</code>
directories.</p>

<p>Start your registry by issuing the following command in the directory containing
the <code class="highlighter-rouge">docker-compose.yml</code> file:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span> docker-compose up <span class="nt">-d</span>
</code></pre></div></div>

<h2 id="considerations-for-air-gapped-registries">隔離されたデータセンターでの配慮</h2>

<p>You can run a registry in an environment with no internet connectivity.
However, if you rely on any images which are not local, you need to consider the
following:</p>

<ul>
  <li>
    <p>You may need to build your local registry’s data volume on a connected
host where you can run <code class="highlighter-rouge">docker pull</code> to get any images which are available
remotely, and then migrate the registry’s data volume to the air-gapped
network.</p>
  </li>
  <li>
    <p>Certain images, such as the official Microsoft Windows base images, are not
distributable. This means that when you push an image based on one of these
images to your private registry, the non-distributable layers are <strong>not</strong>
pushed, but are always fetched from their authorized location. This is fine
for internet-connected hosts, but not in an air-gapped set-up.</p>

    <p>You can configure the Docker daemon to allow pushing non-distributable layers
to private registries.
<strong>This is only useful in air-gapped set-ups in the presence of
non-distributable images, or in extremely bandwidth-limited situations.</strong>
You are responsible for ensuring that you are in compliance with the terms of
use for non-distributable layers.</p>

    <ol>
      <li>
        <p>Edit the <code class="highlighter-rouge">daemon.json</code> file, which is located in <code class="highlighter-rouge">/etc/docker/</code> on Linux
hosts and <code class="highlighter-rouge">C:\ProgramData\docker\config\daemon.json</code> on Windows Server.
Assuming the file was previously empty, add the following contents:</p>

        <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"allow-nondistributable-artifacts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"myregistrydomain.com:5000"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>        </div>

        <p>The value is an array of registry addresses, separated by commas.</p>

        <p>Save and exit the file.</p>
      </li>
      <li>
        <p>Restart Docker.</p>
      </li>
      <li>
        <p>Restart the registry if it does not start automatically.</p>
      </li>
      <li>
        <p>When you push images to the registries in the list, their
non-distributable layers are pushed to the registry.</p>

        <blockquote>
          <p><strong>Warning</strong>: Non-distributable artifacts typically have restrictions on
how and where they can be distributed and shared. Only use this feature
to push artifacts to private registries and ensure that you are in
compliance with any terms that cover redistributing non-distributable
artifacts.</p>
        </blockquote>
      </li>
    </ol>
  </li>
</ul>

<h2 id="next-steps">次のステップ</h2>

<p>More specific and advanced information is available in the following sections:</p>

<ul>
  <li><a href="/docs.docker.jp.onthefly/registry/configuration/">Configuration reference</a></li>
  <li><a href="/docs.docker.jp.onthefly/registry/notifications/">Working with notifications</a></li>
  <li><a href="/docs.docker.jp.onthefly/registry/recipes/">Advanced “recipes”</a></li>
  <li><a href="/docs.docker.jp.onthefly/registry/spec/api/">Registry API</a></li>
  <li><a href="/docs.docker.jp.onthefly/registry/storage-drivers/">Storage driver model</a></li>
  <li><a href="/docs.docker.jp.onthefly/registry/spec/auth/token/">Token authentication</a></li>
</ul>
<span class="glyphicon glyphicon-tags" style="padding-right: 10px"></span><span style="vertical-align: 2px"><a href="/docs.docker.jp.onthefly/search/?q=registry">registry</a>, <a href="/docs.docker.jp.onthefly/search/?q=on-prem">on-prem</a>, <a href="/docs.docker.jp.onthefly/search/?q=images">images</a>, <a href="/docs.docker.jp.onthefly/search/?q=tags">tags</a>, <a href="/docs.docker.jp.onthefly/search/?q=repository">repository</a>, <a href="/docs.docker.jp.onthefly/search/?q=distribution">distribution</a>, <a href="/docs.docker.jp.onthefly/search/?q=deployment">deployment</a></span><div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/edit/master/src/registry/deploying.ch"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> 本ページの編集</a></li><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [registry/deploying.ch](https://matsuand.github.io/docs.docker.jp.onthefly/registry/deploying/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 変更リクエスト</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">本ページ内:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#run-a-local-registry" class="nomunge">ローカル Registry の起動</a></li>
  <li><a href="#copy-an-image-from-docker-hub-to-your-registry" class="nomunge">Docker Hub から Registry へのイメージコピー</a></li>
  <li><a href="#stop-a-local-registry" class="nomunge">ローカル Registry の停止</a></li>
  <li><a href="#basic-configuration" class="nomunge">基本的な設定</a>
    <ul>
      <li><a href="#start-the-registry-automatically" class="nomunge">Registry の自動起動</a></li>
      <li><a href="#customize-the-published-port" class="nomunge">公開ポートの変更</a></li>
    </ul>
  </li>
  <li><a href="#storage-customization" class="nomunge">ストレージの設定</a>
    <ul>
      <li><a href="#customize-the-storage-location" class="nomunge">ストレージ保存場所の変更</a></li>
      <li><a href="#customize-the-storage-back-end" class="nomunge">Customize the storage back-end</a></li>
    </ul>
  </li>
  <li><a href="#run-an-externally-accessible-registry" class="nomunge">Run an externally-accessible registry</a>
    <ul>
      <li><a href="#get-a-certificate" class="nomunge">Get a certificate</a></li>
      <li><a href="#support-for-lets-encrypt" class="nomunge">Support for Let’s Encrypt</a></li>
      <li><a href="#use-an-insecure-registry-testing-only" class="nomunge">Use an insecure registry (testing only)</a></li>
    </ul>
  </li>
  <li><a href="#run-the-registry-as-a-service" class="nomunge">Run the registry as a service</a></li>
  <li><a href="#load-balancing-considerations" class="nomunge">Load balancing considerations</a>
    <ul>
      <li><a href="#importantrequired-http-headers" class="nomunge">Important/Required HTTP-Headers</a></li>
    </ul>
  </li>
  <li><a href="#restricting-access" class="nomunge">Restricting access</a>
    <ul>
      <li><a href="#native-basic-auth" class="nomunge">Native basic auth</a></li>
      <li><a href="#more-advanced-authentication" class="nomunge">More advanced authentication</a></li>
    </ul>
  </li>
  <li><a href="#deploy-your-registry-using-a-compose-file" class="nomunge">Deploy your registry using a Compose file</a></li>
  <li><a href="#considerations-for-air-gapped-registries" class="nomunge">隔離されたデータセンターでの配慮</a></li>
  <li><a href="#next-steps" class="nomunge">次のステップ</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products" target="_blank" rel="noopener">製品ラインアップ</a></b></li>
                        <li><a href="https://www.docker.com/products/personal" target="_blank" rel="noopener">Docker Personal</a></li>
                        <li><a href="https://www.docker.com/products/pro" target="_blank" rel="noopener">Docker Pro</a></li>
                        <li><a href="https://www.docker.com/products/team" target="_blank" rel="noopener">Docker Team</a></li>
                        <li><a href="https://www.docker.com/products/business" target="_blank" rel="noopener">Docker Business</a></li>
                        <li><a href="https://www.docker.com/products" target="_blank" rel="noopener">サブスクリプション比較</a></li>
                        <li><b><a href="https://www.docker.com/" target="_blank" rel="noopener">機能</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub" target="_blank" rel="noopener">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/products/secure-software-supply-chain" target="_blank" rel="noopener">セキュアなソフトウェアサプライチェーン</a></li>
                        <li><a href="https://www.docker.com/products/container-runtime" target="_blank" rel="noopener">コンテナーランタイム</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools" target="_blank" rel="noopener">開発ツール</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">信頼できるコンテント</a></li>
                        <li><a href="https://www.docker.com/roadmap" target="_blank" rel="noopener">Docker 製品ロードマップ</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">開発者</a></b></li>
                        <li><a href="https://www.docker.com/use-cases" target="_blank" rel="noopener">利用例</a></li>
                        <li><a href="https://docs.docker.com/get-started/" target="_blank" rel="noopener">はじめよう</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">ブログ</a></li>
                        <li><a href="https://www.docker.com/docker-community" target="_blank" rel="noopener">コミュニティー</a></li>
                        <li><a href="https://www.docker.com/open-source" target="_blank" rel="noopener">オープンソース</a></li>
                        <li><a href="https://www.docker.com/community/get-involved/developer-preview" target="_blank" rel="noopener">プレビュープログラム</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop" target="_blank" rel="noopener">価格体系</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq" target="_blank" rel="noopener">FAQ</a></li>
                        <li><a href="https://www.docker.com/partners/programs" target="_blank" rel="noopener">Docker 認定公開者向けプログラム</a></li>
                        <li><a href="https://www.docker.com/partners" target="_blank" rel="noopener">パートナー</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">会社概要</a></b></li>
                        <li><a href="https://www.docker.com/what-container" target="_blank" rel="noopener">コンテナーって何？</a></li>
                        <li><a href="https://www.docker.com/why-docker" target="_blank" rel="noopener">なぜ Docker？</a></li>
                        <li><a href="https://www.docker.com/events" target="_blank" rel="noopener">仮想イベント</a></li>
                        <li><a href="https://www.docker.com/swag" target="_blank" rel="noopener">Swag ストア
                        </a></li>
                        <li><a href="https://www.docker.com/company/newsroom" target="_blank" rel="noopener">ニュースルーム</a></li>
                        <li><a href="https://www.docker.com/careers" target="_blank" rel="noopener">採用情報</a></li>
                        <li><a href="https://www.docker.com/company/contact" target="_blank" rel="noopener">連絡先</a></li>
                        <li><a href="https://www.docker.com/customers" target="_blank" rel="noopener">顧客</a></li>
                        <li><a href="https://www.docker.com/newsletter-subscription" target="_blank" rel="noopener">ニュースレター</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="https://www.docker.com/legal/docker-terms-service" target="_blank" rel="noopener">サービス契約</a></li>
                        <li><a href="https://status.docker.com/" target="_blank" rel="noopener">ステータス</a></li>
                        <li><a href="https://www.docker.com/legal" target="_blank" rel="noopener">法的情報</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="https://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="https://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/registry/deploying/";</script></body>
</html>
