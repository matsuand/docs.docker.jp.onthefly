<!-- Page generated 2021-08-18 13:42:38 +0900-->
<!DOCTYPE html>
<html lang="ja"><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>docker buildx build | Docker ドキュメント</title>
  <meta name="description" content="docker buildx build: The `buildx build` command starts a build using BuildKit. This command is similar to the UI of `docker build` command and takes the same flags and arguments...." />
  <meta name="keywords" content="docker, docker open source, docker platform, distributed applications, microservices, containers, docker containers, docker software, docker virtualization">
  <link rel="canonical" href="https://localhost:4000{{ site.baseurl }}/engine/reference/commandline/buildx_build/" />

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <link rel="apple-touch-icon" type="image/x-icon" href="/docs.docker.jp.onthefly/favicons/docs@2x.ico" sizes="129x128">
  <meta name="msapplication-TileImage" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico">
  <meta property="og:image" content="/docs.docker.jp.onthefly/favicons/docs@2x.ico"/>
  <meta name="theme-color" content="#2496ed" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0"><script defer src="/docs.docker.jp.onthefly/js/theme-switcher.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/anchorlinks.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/jquery.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/bootstrap.min.js"></script>
  <script defer src="/docs.docker.jp.onthefly/js/docs.js"></script><script defer src="/docs.docker.jp.onthefly/js/search.js"></script><link rel="preload" as="font" href="https://fonts.gstatic.com/s/opensans/v18/mem8YaGs126MiZpBA-UFVZ0bf8pkAg.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Book.woff2"    type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/geomanist/hinted-Geomanist-Regular.woff2" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/glyphicons-halflings-regular.woff2"       type="font/woff2" crossorigin="anonymous">
  <link rel="preload" as="font" href="/docs.docker.jp.onthefly/fonts/fontawesome-webfont.woff2?v=4.7.0"        type="font/woff2" crossorigin="anonymous">

  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/font-awesome.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/bootstrap.min.css">
  <link rel="stylesheet" href="/docs.docker.jp.onthefly/css/style.css" id="pagestyle">

  <!-- SEO stuff -->
  <meta name="twitter:title" itemprop="title name" content="docker buildx build"/>
  <meta name="twitter:description" property="og:description" itemprop="description" content="docker buildx build: The `buildx build` command starts a build using BuildKit. This command is similar to the UI of `docker build` command and takes the same flags and arguments...." />
  <meta name="twitter:card" content="summary_large_image"/>
  <meta name="twitter:domain" content="matsuand.github.io"/>
  <meta name="twitter:site" content="@docker_docs"/>
  <meta name="twitter:url" content="https://twitter.com/docker_docs"/>
  <meta name="twitter:image:src" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta name="twitter:image:alt" content="Docker ドキュメント"/>
  <meta property="og:title" content="docker buildx build" />
  <meta property="og:description" content="docker buildx build: The `buildx build` command starts a build using BuildKit. This command is similar to the UI of `docker build` command and takes the same flags and arguments...." />
  <meta property="og:type" content="website"/>
  <meta property="og:updated_time" itemprop="dateUpdated" content="2021-08-18T13:42:38+09:00"/>
  <meta property="og:image" itemprop="image primaryImageOfPage" content="/docs.docker.jp.onthefly/images/docs@2x.png"/>
  <meta property="og:locale" content="ja_JP" />
  <meta property="og:url" content="https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/buildx_build/" />
  <meta property="og:site_name" content="Docker ドキュメント" />
  <meta property="article:published_time" itemprop="datePublished" content="2021-08-18T13:42:38+09:00"/>
  <script type="application/ld+json">{"@context":"http://schema.org","@type":"WebPage","headline":"docker buildx build","description":"docker buildx build: The `buildx build` command starts a build using BuildKit. This command is similar to the UI of `docker build` command and takes the same flags and arguments....","url":"https://docs.docker.com/engine/reference/commandline/buildx_build/"}</script>
  <!-- END SEO STUFF -->
</head>
<body class="colums">
    <header>
        <nav class="nav-secondary navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <a href="/docs.docker.jp.onthefly/">
                <img class="logo" src="/docs.docker.jp.onthefly/images/docker-docs-logo.svg" alt="Docker Docs" title="Docker Docs" width="160" height="28" />
            </a>
        </div>
        <div class="navbar-collapse" aria-expanded="false" style="height: 1px;">
            <div class="logo-mobile">
    <a href="/docs.docker.jp.onthefly/">
        <img src="/docs.docker.jp.onthefly/images/docker-icon.svg" alt="Docker Docs" title="Docker Docs" width="30" height="30" />
    </a>
</div>
<div class="search-form" id="search-div">
    <form class="search-form form-inline" id="searchForm" action="/docs.docker.jp.onthefly/search/" method="get">
        <label for="st-search-input" class="sr-only">検索</label>
        <input class="search-field form-control ds-input" id="st-search-input" name="q" placeholder="文書内検索" type="search" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;">
        <div id="autocompleteResults"></div>
        <!-- <button type="submit" class="search-submit btn btn-default">検索</button> -->
    </form>
</div>
<div class="sidebar-toggle">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</div>
<div class="nav-container hidden-sm hidden-xs">
    <div>
        <ul class="nav navbar-nav"><li><a href="/docs.docker.jp.onthefly/" id="home">ホーム</a></li><li><a href="/docs.docker.jp.onthefly/get-started/overview/" id="guides">ガイド</a></li><li><a href="/docs.docker.jp.onthefly/desktop/" id="manuals">製品マニュアル</a></li><li><a href="/docs.docker.jp.onthefly/reference/" id="reference">リファレンス</a></li><li><a href="/docs.docker.jp.onthefly/samples/" id="samples">サンプル</a></li></ul>
    </div>
    <div class="ctrl-right">
        <a href="javascript:void(0)" id="menu-toggle" aria-label="現在ページのメニュートグル"><i class="fa fa-indent" aria-hidden="true"></i></a>
    </div>
</div>
<div class="row hidden-sm hidden-xs">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/docs.docker.jp.onthefly/" title="Docker docs homepage"><i class="fa fa-home"></i></a></li>
            <li><a href="/docs.docker.jp.onthefly/reference/">リファレンス</a></li><li><a>コマンドラインインターフェイス</a></li><li><a href="/docs.docker.jp.onthefly/engine/reference/run/">Docker CLI (docker)</a></li><li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx/">docker buildx</a></li><li><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_build/">docker buildx build</a></li></ol>
    </nav>
</div></div>
    </div>
</nav>

    </header>
    <div class="wrapper right-open">
        <div class="container-fluid">
            <div class="row">
                <div class="col-body">
                    <main class="col-content content">
                        <section class="section"><h1>docker buildx build</h1><p><em class="reading-time">読む時間の目安: 11 分</em></p><!--
This page is automatically generated from Docker's source code. If you want to
suggest a change to the text that appears here, open a ticket or pull request
in the source repository on GitHub:

https://github.com/docker/buildx
-->
<!-- Make sure atom is using hard tabs -->

<h2 id="description">説明</h2>

<p>ビルドを開始します。</p>

<h2 id="usage">利用方法</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker buildx build <span class="o">[</span>オプション] PATH | URL | -
</code></pre></div></div>

<h2 id="extended-description">追加説明</h2>

<p>The <code class="language-plaintext highlighter-rouge">buildx build</code> command starts a build using BuildKit. This command is similar
to the UI of <code class="language-plaintext highlighter-rouge">docker build</code> command and takes the same flags and arguments.</p>

<p>For documentation on most of these flags, refer to the <a href="/engine/reference/commandline/build/"><code class="language-plaintext highlighter-rouge">docker build</code>
documentation</a>. In
here we’ll document a subset of the new flags.</p>

<p>本コマンドの利用例については、以下に示す <a href="#examples">利用例の節</a> を参照してください。</p>

<h2 id="options">オプション</h2>

<table>
<thead>
  <tr>
    <td>名前／省略形</td>
    <td>デフォルト</td>
    <td>説明</td>
  </tr>
</thead>
<tbody>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="/engine/reference/commandline/build/#add-entries-to-container-hosts-file---add-host"><code class="language-plaintext highlighter-rouge">--add-host</code></a></td>
    <td></td>
    <td>ホスト－IP マッピングのカスタム設定を追加します。(ホスト名:ip)</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="#allow"><code class="language-plaintext highlighter-rouge">--allow</code></a></td>
    <td></td>
    <td>追加の権限資格を許可します。たとえば network.host、security.insecure など</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="/engine/reference/commandline/build/#set-build-time-variables---build-arg"><code class="language-plaintext highlighter-rouge">--build-arg</code></a></td>
    <td></td>
    <td>ビルド時の変数を設定します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="#cache-from"><code class="language-plaintext highlighter-rouge">--cache-from</code></a></td>
    <td></td>
    <td>外部キャッシュソース。（user/app:cache, type=local,src=path/to/dir など。）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="#cache-to"><code class="language-plaintext highlighter-rouge">--cache-to</code></a></td>
    <td></td>
    <td>キャッシュのエクスポート先。（たとえば user/app:cache, type=local,dest=path/to/dir）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--cgroup-parent</code></td>
    <td></td>
    <td>任意に指定するコンテナーの親 cgroup。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--compress</code></td>
    <td></td>
    <td>ビルドコンテキストを gzip を使って圧縮します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--cpu-period</code></td>
    <td></td>
    <td>CPU の CFS（Completely Fair Scheduler）間隔を制限します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--cpu-quota</code></td>
    <td></td>
    <td>CPU の CFS（Completely Fair Scheduler）クォータを制限します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--cpu-shares</code> , <code class="language-plaintext highlighter-rouge">-c</code></td>
    <td></td>
    <td>CPU 配分。（相対的な重みづけ）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--cpuset-cpus</code></td>
    <td></td>
    <td>利用を許容する CPU 数。（0-3、0,1）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--cpuset-mems</code></td>
    <td></td>
    <td>利用を許容するメモリ数。（0-3、0,1）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="/engine/reference/commandline/build/#specify-a-dockerfile--f"><code class="language-plaintext highlighter-rouge">--file</code></a> , <a href="/engine/reference/commandline/build/#specify-a-dockerfile--f"><code class="language-plaintext highlighter-rouge">-f</code></a></td>
    <td></td>
    <td>Dockerfile 名。（デフォルトは 'PATH/Dockerfile'）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--force-rm</code></td>
    <td></td>
    <td>中間コンテナーを常に削除します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--iidfile</code></td>
    <td></td>
    <td>イメージ ID をファイルに出力します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--isolation</code></td>
    <td></td>
    <td>コンテナーの分離技術（isolation technology）方式。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--label</code></td>
    <td></td>
    <td>イメージに対してメタデータを設定します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="#load"><code class="language-plaintext highlighter-rouge">--load</code></a></td>
    <td></td>
    <td>--output=type=docker の短縮形。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--memory</code> , <code class="language-plaintext highlighter-rouge">-m</code></td>
    <td></td>
    <td>メモリ上限。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--memory-swap</code></td>
    <td></td>
    <td>メモリとスワップの総量を制限します。'-1' 設定時はスワップ無制限。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--network</code></td>
    <td></td>
    <td>ビルド時の RUN 命令に対してネットワークモードを設定します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--no-cache</code></td>
    <td></td>
    <td>イメージビルド時にキャッシュを利用しません。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="#output"><code class="language-plaintext highlighter-rouge">--output</code></a> , <a href="#output"><code class="language-plaintext highlighter-rouge">-o</code></a></td>
    <td></td>
    <td>出力先。（フォーマット: type=local,dest=path）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="#platform"><code class="language-plaintext highlighter-rouge">--platform</code></a></td>
    <td></td>
    <td>ビルドにおける対象プラットフォームを設定します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--progress</code></td>
    <td><code class="language-plaintext highlighter-rouge">auto</code></td>
    <td>処理経過の出力タイプを設定します（auto、plain、tty）。コンテナー出力には plain が用いられます。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--pull</code></td>
    <td></td>
    <td>常に最新イメージのプルを試みます。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="#push"><code class="language-plaintext highlighter-rouge">--push</code></a></td>
    <td></td>
    <td>--output=type=registry の短縮形。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--quiet</code> , <code class="language-plaintext highlighter-rouge">-q</code></td>
    <td></td>
    <td>ビルド出力を省略し、処理成功時にはイメージ ID を表示します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--rm</code></td>
    <td><code class="language-plaintext highlighter-rouge">true</code></td>
    <td>ビルド成功後に中間コンテナーを削除します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--secret</code></td>
    <td></td>
    <td>ビルド時に公開する Secret ファイル。 id=mysecret,src=/local/secret</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--security-opt</code></td>
    <td></td>
    <td>セキュリティオプション。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--shm-size</code></td>
    <td></td>
    <td>/dev/shm のサイズ。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--squash</code></td>
    <td></td>
    <td>ビルドしたレイヤーを単一の新レイヤーに押し込みます（squash します）。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--ssh</code></td>
    <td></td>
    <td>ビルド時に公開する SSH エージェントソケットまたは SSH 鍵（BuildKit 有効時のみ）。（フォーマット: default|&lt;id&gt;[=&lt;socket&gt;|&lt;key&gt;[,&lt;key&gt;]]）</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="/engine/reference/commandline/build/#tag-an-image--t"><code class="language-plaintext highlighter-rouge">--tag</code></a> , <a href="/engine/reference/commandline/build/#tag-an-image--t"><code class="language-plaintext highlighter-rouge">-t</code></a></td>
    <td></td>
    <td>書式 'name:tag' により名前および任意のタグを指定します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><a href="/engine/reference/commandline/build/#specifying-target-build-stage---target"><code class="language-plaintext highlighter-rouge">--target</code></a></td>
    <td></td>
    <td>ビルド対象とするビルドステージを指定します。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--ulimit</code></td>
    <td></td>
    <td>ulimit オプション。</td>
  </tr>

  
  
  
  
  
  
  
  
  <tr>
    <td><code class="language-plaintext highlighter-rouge">--builder</code></td>
    <td></td>
    <td>設定された builder インスタンスをオーバーライドします。</td>
  </tr>
 <!-- end for option -->
</tbody>
</table>
<p><!-- end if options --></p>

<h2 id="examples">利用例</h2>

<h3 id="platform">Set the target platforms for the build (--platform)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--platform=value[,value]
</code></pre></div></div>

<p>Set the target platform for the build. All <code class="language-plaintext highlighter-rouge">FROM</code> commands inside the Dockerfile
without their own <code class="language-plaintext highlighter-rouge">--platform</code> flag will pull base images for this platform and
this value will also be the platform of the resulting image. The default value
will be the current platform of the buildkit daemon.</p>

<p>When using <code class="language-plaintext highlighter-rouge">docker-container</code> driver with <code class="language-plaintext highlighter-rouge">buildx</code>, this flag can accept multiple
values as an input separated by a comma. With multiple values the result will be
built for all of the specified platforms and joined together into a single manifest
list.</p>

<p>If the <code class="language-plaintext highlighter-rouge">Dockerfile</code> needs to invoke the <code class="language-plaintext highlighter-rouge">RUN</code> command, the builder needs runtime
support for the specified platform. In a clean setup, you can only execute <code class="language-plaintext highlighter-rouge">RUN</code>
commands for your system architecture.
If your kernel supports <a href="https://en.wikipedia.org/wiki/Binfmt_misc"><code class="language-plaintext highlighter-rouge">binfmt_misc</code></a>
launchers for secondary architectures, buildx will pick them up automatically.
Docker desktop releases come with <code class="language-plaintext highlighter-rouge">binfmt_misc</code> automatically configured for <code class="language-plaintext highlighter-rouge">arm64</code>
and <code class="language-plaintext highlighter-rouge">arm</code> architectures. You can see what runtime platforms your current builder
instance supports by running <code class="language-plaintext highlighter-rouge">docker buildx inspect --bootstrap</code>.</p>

<p>Inside a <code class="language-plaintext highlighter-rouge">Dockerfile</code>, you can access the current platform value through
<code class="language-plaintext highlighter-rouge">TARGETPLATFORM</code> build argument. Please refer to the <a href="/engine/reference/builder/#automatic-platform-args-in-the-global-scope"><code class="language-plaintext highlighter-rouge">docker build</code>
documentation</a>
for the full description of automatic platform argument variants .</p>

<p>The formatting for the platform specifier is defined in the <a href="https://github.com/containerd/containerd/blob/v1.4.3/platforms/platforms.go#L63">containerd source
code</a>.</p>

<p><strong>Examples</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--platform</span><span class="o">=</span>linux/arm64 <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--platform</span><span class="o">=</span>linux/amd64,linux/arm64,linux/arm/v7 <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--platform</span><span class="o">=</span>darwin <span class="nb">.</span>
</code></pre></div></div>

<h3 id="output">Set the export action for the build result (-o, --output)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-o, --output=[PATH,-,type=TYPE[,KEY=VALUE]
</code></pre></div></div>

<p>Sets the export action for the build result. In <code class="language-plaintext highlighter-rouge">docker build</code> all builds finish
by creating a container image and exporting it to <code class="language-plaintext highlighter-rouge">docker images</code>. <code class="language-plaintext highlighter-rouge">buildx</code> makes
this step configurable allowing results to be exported directly to the client,
oci image tarballs, registry etc.</p>

<p>Buildx with <code class="language-plaintext highlighter-rouge">docker</code> driver currently only supports local, tarball exporter and
image exporter. <code class="language-plaintext highlighter-rouge">docker-container</code> driver supports all the exporters.</p>

<p>If just the path is specified as a value, <code class="language-plaintext highlighter-rouge">buildx</code> will use the local exporter
with this path as the destination. If the value is “-“, <code class="language-plaintext highlighter-rouge">buildx</code> will use <code class="language-plaintext highlighter-rouge">tar</code>
exporter and write to <code class="language-plaintext highlighter-rouge">stdout</code>.</p>

<p><strong>Examples</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">-o</span> <span class="nb">.</span> <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">-o</span> outdir <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">-o</span> - - <span class="o">&gt;</span> out.tar
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">-o</span> <span class="nb">type</span><span class="o">=</span>docker <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">-o</span> <span class="nb">type</span><span class="o">=</span>docker,dest<span class="o">=</span>- <span class="nb">.</span> <span class="o">&gt;</span> myimage.tar
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">-t</span> tonistiigi/foo <span class="nt">-o</span> <span class="nb">type</span><span class="o">=</span>registry
</code></pre></div></div>

<p>Supported exported types are:</p>

<h4 id="local"><code class="language-plaintext highlighter-rouge">local</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">local</code> export type writes all result files to a directory on the client. The
new files will be owned by the current user. On multi-platform builds, all results
will be put in subdirectories by their platform.</p>

<p>Attribute key:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">dest</code> - destination directory where files will be written</li>
</ul>

<h4 id="tar"><code class="language-plaintext highlighter-rouge">tar</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">tar</code> export type writes all result files as a single tarball on the client.
On multi-platform builds all results will be put in subdirectories by their platform.</p>

<p>Attribute key:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">dest</code> - destination path where tarball will be written. “-” writes to stdout.</li>
</ul>

<h4 id="oci"><code class="language-plaintext highlighter-rouge">oci</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">oci</code> export type writes the result image or manifest list as an <a href="https://github.com/opencontainers/image-spec/blob/v1.0.1/image-layout.md">OCI image
layout</a>
tarball on the client.</p>

<p>Attribute key:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">dest</code> - destination path where tarball will be written. “-” writes to stdout.</li>
</ul>

<h4 id="docker"><code class="language-plaintext highlighter-rouge">docker</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">docker</code> export type writes the single-platform result image as a <a href="https://github.com/docker/docker/blob/v20.10.2/image/spec/v1.2.md">Docker image
specification</a>
tarball on the client. Tarballs created by this exporter are also OCI compatible.</p>

<p>Currently, multi-platform images cannot be exported with the <code class="language-plaintext highlighter-rouge">docker</code> export type.
The most common usecase for multi-platform images is to directly push to a registry
(see <a href="#registry"><code class="language-plaintext highlighter-rouge">registry</code></a>).</p>

<p>Attribute keys:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">dest</code> - destination path where tarball will be written. If not specified the
tar will be loaded automatically to the current docker instance.</li>
  <li><code class="language-plaintext highlighter-rouge">context</code> - name for the docker context where to import the result</li>
</ul>

<h4 id="image"><code class="language-plaintext highlighter-rouge">image</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">image</code> exporter writes the build result as an image or a manifest list. When
using <code class="language-plaintext highlighter-rouge">docker</code> driver the image will appear in <code class="language-plaintext highlighter-rouge">docker images</code>. Optionally, image
can be automatically pushed to a registry by specifying attributes.</p>

<p>Attribute keys:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">name</code> - name (references) for the new image.</li>
  <li><code class="language-plaintext highlighter-rouge">push</code> - boolean to automatically push the image.</li>
</ul>

<h4 id="registry"><code class="language-plaintext highlighter-rouge">registry</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">registry</code> exporter is a shortcut for <code class="language-plaintext highlighter-rouge">type=image,push=true</code>.</p>

<h3 id="push">Push the build result to a registry (--push)</h3>

<p>Shorthand for <a href="#registry"><code class="language-plaintext highlighter-rouge">--output=type=registry</code></a>. Will automatically push the
build result to registry.</p>

<h3 id="load">Load the single-platform build result to <code class="language-plaintext highlighter-rouge">docker images</code> (--load)</h3>

<p>Shorthand for <a href="#docker"><code class="language-plaintext highlighter-rouge">--output=type=docker</code></a>. Will automatically load the
single-platform build result to <code class="language-plaintext highlighter-rouge">docker images</code>.</p>

<h3 id="cache-from">Use an external cache source for a build (--cache-from)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--cache-from=[NAME|type=TYPE[,KEY=VALUE]]
</code></pre></div></div>

<p>Use an external cache source for a build. Supported types are <code class="language-plaintext highlighter-rouge">registry</code> and <code class="language-plaintext highlighter-rouge">local</code>.
The <code class="language-plaintext highlighter-rouge">registry</code> source can import cache from a cache manifest or (special) image
configuration on the registry. The <code class="language-plaintext highlighter-rouge">local</code> source can import cache from local
files previously exported with <code class="language-plaintext highlighter-rouge">--cache-to</code>.</p>

<p>If no type is specified, <code class="language-plaintext highlighter-rouge">registry</code> exporter is used with a specified reference.</p>

<p><code class="language-plaintext highlighter-rouge">docker</code> driver currently only supports importing build cache from the registry.</p>

<p><strong>Examples</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-from</span><span class="o">=</span>user/app:cache <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-from</span><span class="o">=</span>user/app <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-from</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span>registry,ref<span class="o">=</span>user/app <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-from</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span><span class="nb">local</span>,src<span class="o">=</span>path/to/cache <span class="nb">.</span>
</code></pre></div></div>

<h3 id="cache-to">Export build cache to an external cache destination (--cache-to)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--cache-to=[NAME|type=TYPE[,KEY=VALUE]]
</code></pre></div></div>

<p>Export build cache to an external cache destination. Supported types are <code class="language-plaintext highlighter-rouge">registry</code>,
<code class="language-plaintext highlighter-rouge">local</code> and <code class="language-plaintext highlighter-rouge">inline</code>. Registry exports build cache to a cache manifest in the
registry, local exports cache to a local directory on the client and inline writes
the cache metadata into the image configuration.</p>

<p><code class="language-plaintext highlighter-rouge">docker</code> driver currently only supports exporting inline cache metadata to image
configuration. Alternatively, <code class="language-plaintext highlighter-rouge">--build-arg BUILDKIT_INLINE_CACHE=1</code> can be used
to trigger inline cache exporter.</p>

<p>Attribute key:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mode</code> - Specifies how many layers are exported with the cache. “min” on only
exports layers already in the final build stage, “max” exports layers for
all stages. Metadata is always exported for the whole build.</li>
</ul>

<p><strong>Examples</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-to</span><span class="o">=</span>user/app:cache <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-to</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span>inline <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-to</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span>registry,ref<span class="o">=</span>user/app <span class="nb">.</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--cache-to</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span><span class="nb">local</span>,dest<span class="o">=</span>path/to/cache <span class="nb">.</span>
</code></pre></div></div>

<h3 id="allow">Allow extra privileged entitlement (--allow)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--allow=ENTITLEMENT
</code></pre></div></div>

<p>Allow extra privileged entitlement. List of entitlements:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">network.host</code> - Allows executions with host networking.</li>
  <li><code class="language-plaintext highlighter-rouge">security.insecure</code> - Allows executions without sandbox. See
<a href="https://github.com/moby/buildkit/blob/master/frontend/dockerfile/docs/experimental.md#run---securityinsecuresandbox">related Dockerfile extensions</a>.</li>
</ul>

<p>For entitlements to be enabled, the <code class="language-plaintext highlighter-rouge">buildkitd</code> daemon also needs to allow them
with <code class="language-plaintext highlighter-rouge">--allow-insecure-entitlement</code> (see <a href="/engine/reference/commandline/buildx_create/#--buildkitd-flags-flags"><code class="language-plaintext highlighter-rouge">create --buildkitd-flags</code></a>)</p>

<p><strong>Examples</strong></p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>docker buildx create <span class="nt">--use</span> <span class="nt">--name</span> insecure-builder <span class="nt">--buildkitd-flags</span> <span class="s1">'--allow-insecure-entitlement security.insecure'</span>
<span class="gp">$</span><span class="w"> </span>docker buildx build <span class="nt">--allow</span> security.insecure <span class="nb">.</span>
</code></pre></div></div>

<h2 id="parent-command">上位コマンド</h2>

<table>
  <thead>
    <tr>
      <th>コマンド</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx/">docker buildx</a></td>
      <td>BuildKit を使ってビルドします。</td>
    </tr>
  </tbody>
</table>

<h2 id="related-commands">関連コマンド</h2>

<table>
<thead>
  <tr>
    <td>コマンド</td>
    <td>説明</td>
  </tr>
</thead>
<tbody>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_bake/">docker buildx bake</a></td>
    <td>ファイルからビルドします。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_build/">docker buildx build</a></td>
    <td>ビルドを開始します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_create/">docker buildx create</a></td>
    <td>新規にビルダーインスタンスを生成します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_du/">docker buildx du</a></td>
    <td>ディスク利用量。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_imagetools/">docker buildx imagetools</a></td>
    <td>レジストリ上のイメージを操作するコマンドです。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_inspect/">docker buildx inspect</a></td>
    <td>現在のビルダーインスタンスを確認します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_ls/">docker buildx ls</a></td>
    <td>ビルダーインスタンスを一覧表示します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_prune/">docker buildx prune</a></td>
    <td>ビルドキャッシュを削除します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_rm/">docker buildx rm</a></td>
    <td>ビルダーインスタンスを削除します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_stop/">docker buildx stop</a></td>
    <td>ビルダーインスタンスを停止します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_use/">docker buildx use</a></td>
    <td>現在のビルダーインスタンスを設定します。</td>
  </tr>

  
  <tr>
    <td><a href="/docs.docker.jp.onthefly/engine/reference/commandline/buildx_version/">docker buildx version</a></td>
    <td>Buildx のバージョンを表示します。</td>
  </tr>

</tbody>
</table>

<div class="ratings-div"><div id="pd_rating_holder_8453675"></div></div></section>
                    </main>
                    <nav class="col-nav">
                        <div id="sidebar-nav" class="sidebar hidden-sm hidden-xs">
                            <div id="navbar" class="nav-sidebar">
                                <ul class="nav hidden-md hidden-lg"></ul>
                                <ul class="nav" id="jsTOCLeftNav"></ul>
                            </div>
                        </div>
                    </nav>
                    <div class="col-toc">
                        <div class="sidebar hidden-xs hidden-sm">
                            <div class="toc-nav">
                                <div class="feedback-links">
                                    <ul><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/edit/master/src/engine/reference/commandline/buildx_build.ch"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> 本ページの編集</a></li><li><a href="https://github.com/matsuand/docs.docker.jp.onthefly/issues/new?body=File: [engine/reference/commandline/buildx_build.ch](https://matsuand.github.io/docs.docker.jp.onthefly/engine/reference/commandline/buildx_build/)" class="nomunge"><i class="fa fa-check" aria-hidden="true"></i> 変更リクエスト</a></li>
                                        <li><div class="toggle-mode">
  <div class="icon">
      <i class="fa fa-sun-o" aria-hidden="true"></i>
  </div>
  <div class="toggle-switch">
      <label class="switch">
          <input type="checkbox" id="switch-style">
          <span class="slider round"></span>
      </label>
  </div>
  <div class="icon">
      <i class="fa fa-moon-o" aria-hidden="true"></i>
  </div>
</div>
</li>
                                    </ul>
                                </div><div id="side-toc-title">本ページ内:</div>
<ul id="my_toc" class="inline_toc">
  <li><a href="#description" class="nomunge">説明</a></li>
  <li><a href="#usage" class="nomunge">利用方法</a></li>
  <li><a href="#extended-description" class="nomunge">追加説明</a></li>
  <li><a href="#options" class="nomunge">オプション</a></li>
  <li><a href="#examples" class="nomunge">利用例</a>
    <ul>
      <li><a href="#platform" class="nomunge">Set the target platforms for the build (--platform)</a></li>
      <li><a href="#output" class="nomunge">Set the export action for the build result (-o, --output)</a></li>
      <li><a href="#push" class="nomunge">Push the build result to a registry (--push)</a></li>
      <li><a href="#load" class="nomunge">Load the single-platform build result to docker images (--load)</a></li>
      <li><a href="#cache-from" class="nomunge">Use an external cache source for a build (--cache-from)</a></li>
      <li><a href="#cache-to" class="nomunge">Export build cache to an external cache destination (--cache-to)</a></li>
      <li><a href="#allow" class="nomunge">Allow extra privileged entitlement (--allow)</a></li>
    </ul>
  </li>
  <li><a href="#parent-command" class="nomunge">上位コマンド</a></li>
  <li><a href="#related-commands" class="nomunge">関連コマンド</a></li>
</ul>

</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer">
          
    <div class="container">
        <div class="top_footer">
            <div class="row">
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/why-docker">なぜ Docker なのか？</a></b></li>
                        <li><a href="https://www.docker.com/what-container">コンテナーって何？</a></li>
                        <li><a href="https://docker.events.cube365.net/dockercon/">DockerCon</a></li>
                        <li><b><a href="https://www.docker.com/products/overview">製品</a></b></li>
                        <li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
                        <li><a href="https://www.docker.com/products/docker-hub">Docker Hub</a></li>
                        <li><a href="https://www.docker.com/roadmap">Docker 製品ロードマップ</a></li>
                        <li><b><a href="https://www.docker.com/products/docker-desktop">機能</a></b></li>
                        <li><a href="https://www.docker.com/products/container-runtime">コンテナーランタイム</a></li>
                        <li><a href="https://www.docker.com/products/developer-tools">開発ツール</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">開発者</a></b></li>
                        <li><a href="https://www.docker.com/use-cases">利用例</a></li>
                        <li><a href="https://www.docker.com/docker-community">コミュニティ</a></li>
                        <li><a href="https://www.docker.com/open-source">オープンソース</a></li>
                        <li><a href="https://www.docker.com/community/docker-captains">Docker キャプテン</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/products/docker-desktop">価格体系</a></b></li>
                        <li><a href="https://www.docker.com/pricing/faq">FAQ</a></li>
                        <li><a href="https://www.docker.com/partners/programs">Verified Publisher Program</a></li>
                    </ul>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-3">
                    <ul class="footer_links">
                        <li><b><a href="https://www.docker.com/company" target="_blank" rel="noopener">会社</a></b></li>
                        <li><a href="https://www.docker.com/company">概要</a></li>
                        <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener">ブログ</a></li>
                        <li><a href="https://www.docker.com/customers">顧客</a></li>
                        <li><a href="https://www.docker.com/partners">パートナー</a></li>
                        <li><a href="https://www.docker.com/company/newsroom">ニュースルーム</a></li>
                        <li><a href="https://www.docker.com/careers">採用情報</a></li>
                        <li><a href="https://www.docker.com/company/contact">連絡先</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-nav">
                <nav class="footer_sub_nav">
                    <ul class="menu">
                        <li><a href="http://status.docker.com/">ステータス</a></li>
                        <li><a href="https://www.docker.com/legal">法的情報</a></li>
                        <li><a href="https://www.docker.com/company/contact">連絡</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="bottom_footer">
            <div class="footer-copyright col-xs-12 col-md-8">
                <p class="copyright">
                    Copyright &copy; 2013-2021 Docker Inc. All rights reserved. </p>
            </div>
            <div class="footer_social_nav">
                <ul class="nav-social">
                    <li class="fa fa-twitter"><a href="http://twitter.com/docker">Twitter</a></li>
                    <li class="fa fa-youtube"><a href="http://www.youtube.com/user/dockerrun">Youtube</a></li>
                    <li class="fa fa-github"><a href="https://github.com/docker">GitHub</a></li>
                    <li class="fa fa-linkedin"><a href="https://www.linkedin.com/company/docker">Linkedin</a></li>
                    <li class="fa fa-facebook"><a href="https://www.facebook.com/docker.run">Facebook</a></li>
                    <li class="fa fa-slideshare"><a href="https://www.slideshare.net/docker">Slideshare</a></li>
                    <li class="fa fa-reddit"><a href="https://www.reddit.com/r/docker">Reddit</a></li>
                </ul>
            </div>
        </div>
    </div>

    </footer>
    <script>const pageURL = "/engine/reference/commandline/buildx_build/";</script></body>
</html>
